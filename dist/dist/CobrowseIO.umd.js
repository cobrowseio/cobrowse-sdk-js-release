/*! For license information please see CobrowseIO.umd.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CobrowseIO=t():e.CobrowseIO=t()}(self,(function(){return function(){"use strict";var e={3606:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,r){return(t=u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.EbmlElementId=void 0,t.getEbmlElementIdLength=s,t.getEbmlElementLevel=function(e){switch(e){case c.Ebml:case c.Segment:return 0;case c.Cluster:case c.Cues:case c.DocType:case c.DocTypeReadVersion:case c.DocTypeVersion:case c.EbmlMaxIdLength:case c.EbmlMaxSizeLength:case c.EbmlReadVersion:case c.EbmlVersion:case c.Info:case c.SeekHead:case c.Tracks:return 1;case c.CuePoint:case c.DateUTC:case c.Duration:case c.MuxingApp:case c.Position:case c.SegmentUID:case c.Seek:case c.SimpleBlock:case c.Timestamp:case c.TimestampScale:case c.Title:case c.TrackEntry:case c.WritingApp:return 2;case c.Audio:case c.CodecDecodeAll:case c.CodecID:case c.CodecName:case c.CodecPrivate:case c.CueTime:case c.CueTrackPositions:case c.DefaultDuration:case c.FlagDefault:case c.FlagEnabled:case c.FlagForced:case c.FlagLacing:case c.MaxBlockAdditionID:case c.MinCache:case c.SeekID:case c.SeekPosition:case c.SeekPreRoll:case c.TrackNumber:case c.TrackTimestampScale:case c.TrackType:case c.TrackUID:case c.Video:return 3;case c.Channels:case c.CueBlockNumber:case c.CueClusterPosition:case c.CueTrack:case c.FlagInterlaced:case c.PixelHeight:case c.PixelWidth:case c.SamplingFrequency:case c.Colour:return 4;case c.CueRefTime:return 5;case c.Void:return-1;default:throw Error("cannot determine level of unknown ebml element with id ".concat(e))}},t.getEbmlElementName=function(e){switch(e){case c.Ebml:return"EBML";case c.EbmlVersion:return"EBMLVersion";case c.EbmlReadVersion:return"EBMLReadVersion";case c.EbmlMaxIdLength:return"EBMLMaxIDLength";case c.EbmlMaxSizeLength:return"EBMLMaxSizeLength";case c.DocType:return"DocType";case c.DocTypeVersion:return"DocTypeVersion";case c.DocTypeReadVersion:return"DocTypeReadVersion";case c.Void:return"Void";case c.Segment:return"Segment";case c.SeekHead:return"SeekHead";case c.Seek:return"Seek";case c.SeekID:return"SeekID";case c.SeekPosition:return"SeekPosition";case c.Info:return"Info";case c.TimestampScale:return"TimestampScale";case c.Duration:return"Duration";case c.DateUTC:return"DateUTC";case c.Title:return"Title";case c.MuxingApp:return"MuxingApp";case c.WritingApp:return"WritinApp";case c.Cluster:return"Cluster";case c.Timestamp:return"Timestamp";case c.SimpleBlock:return"SimpleBlock";case c.SegmentUID:return"SegmentUID (unsupported by WebM)";case c.Tracks:return"Tracks";case c.TrackEntry:return"TrackEntry";case c.TrackNumber:return"TrackNumber";case c.TrackUID:return"TrackUID";case c.TrackType:return"TrackType";case c.FlagEnabled:return"FlagEnabled";case c.FlagDefault:return"FlagDefault";case c.FlagForced:return"FlagForced";case c.FlagLacing:return"FlagLacing";case c.MinCache:return"MinCache";case c.MaxBlockAdditionID:return"MaxBlockAdditionID";case c.CodecID:return"CodecID";case c.CodecDecodeAll:return"CodecDecodeAll";case c.SeekPreRoll:return"SeekPreRoll";case c.Video:return"Video";case c.FlagInterlaced:return"FlagInterlaced";case c.PixelWidth:return"PixelWidth";case c.PixelHeight:return"PixelHeight";case c.DefaultDuration:return"DefaultDuration";case c.TrackTimestampScale:return"TrackTimestampScale";case c.CodecName:return"CodecName";case c.CodecPrivate:return"CodecPrivate";case c.Audio:return"Audio";case c.SamplingFrequency:return"SamplingFrequency";case c.Channels:return"Channels";case c.Cues:return"Cues";case c.CuePoint:return"CuePoint";case c.CueTime:return"CueTime";case c.CueTrackPositions:return"CueTrackPositions";case c.CueTrack:return"CueTrack";case c.CueClusterPosition:return"CueClusterPosition";case c.CueRefTime:return"CueRefTime";case c.CueBlockNumber:return"CueBlockNumber";case c.Position:return"Position";case c.Colour:return"Colour";default:return""}},t.readEbmlElementId=function(e,t){var r=s(e.current);if(r>e.bytesAvailable)return!1;for(var n=e.current,o=0;o<r-1;++o)n=n<<8|e.nextUnsafe();return e.nextUnsafe(),e.checkBounds(),t.id=n,t.idLength=r,!0},r(9244),r(2593),r(444),r(1076),r(1e3),r(5538);var c=i((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));function s(e){for(var t=7;t>3;t--)if(e&1<<t)return 8-t;throw Error("invalid ebml element id")}t.EbmlElementId=c,a(c,"Ebml",440786851),a(c,"EbmlVersion",17030),a(c,"EbmlReadVersion",17143),a(c,"EbmlMaxIdLength",17138),a(c,"EbmlMaxSizeLength",17139),a(c,"DocType",17026),a(c,"DocTypeVersion",17031),a(c,"DocTypeReadVersion",17029),a(c,"Void",236),a(c,"Segment",408125543),a(c,"SeekHead",290298740),a(c,"Seek",19899),a(c,"SeekID",21419),a(c,"SeekPosition",21420),a(c,"Info",357149030),a(c,"TimestampScale",2807729),a(c,"Duration",17545),a(c,"DateUTC",17505),a(c,"Title",31657),a(c,"MuxingApp",19840),a(c,"WritingApp",22337),a(c,"Cluster",524531317),a(c,"Timestamp",231),a(c,"SimpleBlock",163),a(c,"SegmentUID",29604),a(c,"Tracks",374648427),a(c,"TrackEntry",174),a(c,"TrackNumber",215),a(c,"TrackUID",29637),a(c,"TrackType",131),a(c,"FlagEnabled",185),a(c,"FlagDefault",136),a(c,"FlagForced",21930),a(c,"FlagLacing",156),a(c,"MinCache",28135),a(c,"MaxBlockAdditionID",21998),a(c,"CodecID",134),a(c,"CodecDecodeAll",170),a(c,"SeekPreRoll",22203),a(c,"Video",224),a(c,"FlagInterlaced",154),a(c,"PixelWidth",176),a(c,"PixelHeight",186),a(c,"DefaultDuration",2352003),a(c,"TrackTimestampScale",2306383),a(c,"CodecName",2459272),a(c,"CodecPrivate",25506),a(c,"Audio",225),a(c,"SamplingFrequency",181),a(c,"Channels",159),a(c,"Cues",475249515),a(c,"CuePoint",187),a(c,"CueTime",179),a(c,"CueTrackPositions",183),a(c,"CueTrack",247),a(c,"CueClusterPosition",241),a(c,"CueRefTime",150),a(c,"CueBlockNumber",21368),a(c,"Position",167),a(c,"Colour",21936)},3300:function(e,t,r){r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.EbmlElementType=void 0,t.getEbmlElementType=function(e){switch(e){case n.EbmlElementId.Segment:case n.EbmlElementId.Ebml:case n.EbmlElementId.SeekHead:case n.EbmlElementId.Seek:case n.EbmlElementId.Cluster:case n.EbmlElementId.Info:case n.EbmlElementId.Tracks:case n.EbmlElementId.TrackEntry:case n.EbmlElementId.Video:case n.EbmlElementId.Audio:case n.EbmlElementId.Cues:case n.EbmlElementId.CuePoint:case n.EbmlElementId.CueTrackPositions:case n.EbmlElementId.Colour:return s.Master;case n.EbmlElementId.EbmlVersion:case n.EbmlElementId.EbmlReadVersion:case n.EbmlElementId.EbmlMaxIdLength:case n.EbmlElementId.EbmlMaxSizeLength:case n.EbmlElementId.DocTypeVersion:case n.EbmlElementId.DocTypeReadVersion:case n.EbmlElementId.SeekPosition:case n.EbmlElementId.TimestampScale:case n.EbmlElementId.Timestamp:case n.EbmlElementId.TrackNumber:case n.EbmlElementId.TrackUID:case n.EbmlElementId.TrackType:case n.EbmlElementId.FlagEnabled:case n.EbmlElementId.FlagDefault:case n.EbmlElementId.FlagForced:case n.EbmlElementId.FlagLacing:case n.EbmlElementId.MinCache:case n.EbmlElementId.MaxBlockAdditionID:case n.EbmlElementId.CodecDecodeAll:case n.EbmlElementId.SeekPreRoll:case n.EbmlElementId.FlagInterlaced:case n.EbmlElementId.PixelWidth:case n.EbmlElementId.PixelHeight:case n.EbmlElementId.DefaultDuration:case n.EbmlElementId.Channels:case n.EbmlElementId.CueTime:case n.EbmlElementId.CueTrack:case n.EbmlElementId.CueClusterPosition:case n.EbmlElementId.CueRefTime:case n.EbmlElementId.CueBlockNumber:case n.EbmlElementId.Position:return s.UnsignedInteger;case n.EbmlElementId.DocType:case n.EbmlElementId.CodecID:return s.String;case n.EbmlElementId.Void:case n.EbmlElementId.SeekID:case n.EbmlElementId.SimpleBlock:case n.EbmlElementId.SegmentUID:case n.EbmlElementId.CodecPrivate:return s.Binary;case n.EbmlElementId.Duration:case n.EbmlElementId.TrackTimestampScale:case n.EbmlElementId.SamplingFrequency:return s.Float;case n.EbmlElementId.DateUTC:return s.Date;case n.EbmlElementId.Title:case n.EbmlElementId.MuxingApp:case n.EbmlElementId.WritingApp:case n.EbmlElementId.CodecName:return s.Utf8String;default:throw Error("cannot determine type of unknown ebml element with id ".concat(e))}},r(9244),r(2593),r(444),r(1076),r(1e3),r(5538);var n=r(3606);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===o(t)?t:String(t)}var s=a((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));t.EbmlElementType=s,u(s,"Unknown",0),u(s,"Master",1),u(s,"UnsignedInteger",2),u(s,"SignedInteger",3),u(s,"String",4),u(s,"Utf8String",5),u(s,"Binary",6),u(s,"Float",7),u(s,"Date",8)},1981:function(e,t,r){r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.epochTimestampOffset=t.EbmlElement=void 0,t.getEbmlElementSizeLength=l,t.getEbmlElementValue=function(e,t){switch(e){case o.EbmlElementType.UnsignedInteger:case o.EbmlElementType.SignedInteger:return(0,i.readBigEndianNumber)(t);case o.EbmlElementType.String:return String.fromCharCode.apply(null,t);case o.EbmlElementType.Utf8String:case o.EbmlElementType.Float:throw new Error("cannot read value of element with type ".concat(e));case o.EbmlElementType.Date:return c+(0,i.readBigEndianNumber)(t);case o.EbmlElementType.Binary:return t}},t.readEbmlLementSize=function(e,t){var r=l(e.current);if(r>e.bytesAvailable)return!1;for(var n=e.current-(1<<8-r),o=0;o<r-1;++o)n=n<<8|e.nextUnsafe();return e.nextUnsafe(),e.checkBounds(),t.sizeLength=r,t.size=n===1<<8*r-1?-1:n,!0},r(6941),r(9244),r(2593),r(444),r(1076),r(1e3),r(5538);var n=r(3606),o=r(3300),i=r(2706);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===a(o)?o:String(o)),n)}var o}var c=978307200;t.epochTimestampOffset=c;var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"elementSize",get:function(){return this.idLength+this.sizeLength+this.size}},{key:"id",get:function(){return this._id},set:function(e){this._id=e,this.name=(0,n.getEbmlElementName)(this._id),this.type=(0,o.getEbmlElementType)(this._id)}}])&&u(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e){if(1==e)return 8;for(var t=7;t>0;t--)if(e&1<<t)return 8-t;throw Error("invalid ebml element size")}t.EbmlElement=s},1639:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MediaInfo",{enumerable:!0,get:function(){return u.MediaInfo}}),Object.defineProperty(t,"MediaPacket",{enumerable:!0,get:function(){return a.MediaPacket}}),Object.defineProperty(t,"MediaRecorderDemuxer",{enumerable:!0,get:function(){return n.MediaRecorderDemuxer}}),Object.defineProperty(t,"MediaRecorderDemuxerEvents",{enumerable:!0,get:function(){return o.MediaRecorderDemuxerEvents}}),Object.defineProperty(t,"createMediaRecorderDemuxer",{enumerable:!0,get:function(){return i.createMediaRecorderDemuxer}});var n=r(9285),o=r(2981),i=r(6202),a=r(4151),u=r(5504)},5504:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}r(9244),r(2593),r(444),r(1076),r(1e3),r(5538),r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.MediaInfo=void 0;var a=i((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.videoTrack={},this.audioTrack={}}));t.MediaInfo=a},4151:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}r(9244),r(2593),r(444),r(1076),r(1e3),r(5538),r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.MediaPacket=void 0;var a=i((function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.ptsMs=r}));t.MediaPacket=a},2981:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,r){return(t=u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.MediaRecorderDemuxerEvents=void 0,r(9244),r(2593),r(444),r(1076),r(1e3),r(5538);var c=i((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));t.MediaRecorderDemuxerEvents=c,a(c,"Error","error"),a(c,"MediaInfo","media-info"),a(c,"MediaPacket","media-packet")},6202:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.createMediaRecorderDemuxer=function(e,t){var r;return"undefined"!=typeof MediaRecorder==0?null:(("function"==typeof MediaRecorder.isTypeSupported==0||MediaRecorder.isTypeSupported("video/webm;codecs=h264"))&&(r=new n.WebmMediaRecorderDemuxer(new MediaRecorder(e,{mimeType:"video/webm;codecs=h264"}),t)),r)};var n=r(5102);r(2981)},9285:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(1e3),r(9616),r(9244),r(2593),r(444),r(1076),r(5538),r(5128),r(4011),r(5226),r(3275),r(9270),r(5547),r(1624),r(2047),r(8534),r(8496),r(4802),r(2112),r(6353),r(6941),r(6257),Object.defineProperty(t,"__esModule",{value:!0}),t.defaultMediaRecorderOptions=t.MediaRecorderDemuxer=void 0,r(3064);var o=r(5504),i=r(2981);function a(){a=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),u=new P(n||[]);return o(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function y(){}function v(){}var m={};l(m,u,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,u)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(o,a,u,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),l(w,s,"Generator"),l(w,u,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function u(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function d(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var y=r(1239),v={timerInterval:100,logCallback:null};t.defaultMediaRecorderOptions=v;var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(m,e);var t,r,c,l,d,y=(l=m,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(l);if(d){var r=h(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function m(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(r=y.call(this)).options=t?s(s({},v),t):v,r.mediaRecorder=e,r.mediaInfo=new o.MediaInfo,r.mediaRecorder.addEventListener("dataavailable",function(){var e,t=(e=a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.addBlob(t.data);case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,c,"next",e)}function c(e){u(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()),r.mediaRecorder.addEventListener("error",(function(e){r.emit(i.MediaRecorderDemuxerEvents.Error,e.error)})),r}return t=m,c=[{key:"isSupported",value:function(e){return"undefined"!=typeof MediaRecorder&&"function"==typeof MediaRecorder.prototype.requestData&&"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported(e)}}],(r=[{key:"start",value:function(){var e=this;this.mediaRecorder.start(),"function"==typeof this.mediaRecorder.requestData?this.timer=window.setInterval((function(){e.mediaRecorder.requestData()}),this.options.timerInterval):this.timer=window.setTimeout((function(){e.mediaRecorder.stop()}),this.options.timerInterval)}},{key:"stop",value:function(){"recording"===this.mediaRecorder.state&&this.mediaRecorder.stop(),this.timer&&(clearInterval(this.timer),this.timer=null)}}])&&f(t.prototype,r),c&&f(t,c),Object.defineProperty(t,"prototype",{writable:!1}),m}(y);t.MediaRecorderDemuxer=m},5102:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(3064),r(9616),r(5547),r(2047),r(8534),r(8496),r(4802),r(2112),r(6353),r(3275),r(6257),Object.defineProperty(t,"__esModule",{value:!0}),t.webmVideoTrackType=t.webmAudioTrackType=t.WebmMediaRecorderDemuxer=void 0,r(1e3),r(1624),r(2827),r(7639),r(6996),r(1366),r(3558),r(8852),r(8630),r(8858),r(6480),r(7219),r(2160),r(4289),r(8165),r(4613),r(3292),r(3748),r(9157),r(5529),r(4882),r(7233),r(1086),r(8786),r(5544),r(1304),r(3114),r(6941),r(6369),r(242);var o=r(9285),i=r(3606),a=r(1981),u=r(2706),c=r(3300),s=r(2981),l=r(4151);function f(){f=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),u=new P(n||[]);return o(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p={};function h(){}function y(){}function v(){}var m={};s(m,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,a)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(o,a,u,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),s(S.prototype,u,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),s(w,c,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function d(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function v(e,t,r){return(t=m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}function b(){var e=this;return new Promise((function(t){var r=new FileReader;r.onload=function(){t(r.result)},r.readAsArrayBuffer(e)}))}t.webmVideoTrackType=1,t.webmAudioTrackType=2;var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(E,e);var t,r,o,v,m,g,w=(m=E,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(m);if(g){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function E(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E),(r=w.call(this,e,t)).state=E.stateParseElementId,r.currentEbmlElement=new a.EbmlElement,r.uint8ArrayAggregator=new u.Uint8ArrayAggregator,r.clusterTimestamp=0,r.timestampMsScale=1,r.ebmlElementStack=[],Blob.prototype.arrayBuffer=Blob.prototype.arrayBuffer||b,r}return t=E,r=[{key:"addBlob",value:(o=f().mark((function e(t){var r,n,o,d,p,h,y,v,m,b,g,w,S;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this.uint8ArrayAggregator,e.t1=Uint8Array,e.next=5,t.arrayBuffer();case 5:e.t2=e.sent,e.t3=new e.t1(e.t2),e.t0.addArray.call(e.t0,e.t3);case 8:if(!this.uint8ArrayAggregator.bytesAvailable){e.next=106;break}e.t4=this.state,e.next=e.t4===E.stateParseElementId?12:e.t4===E.stateParseElementLength?19:e.t4===E.stateParseElementValue?27:104;break;case 12:if(!(0,i.readEbmlElementId)(this.uint8ArrayAggregator,this.currentEbmlElement)){e.next=16;break}null==this.options.logCallback||this.options.logCallback("got new current ebml element (id: ".concat(this.currentEbmlElement.id,", name: ").concat(this.currentEbmlElement.name,")")),e.next=17;break;case 16:return e.abrupt("break",104);case 17:return this.state=E.stateParseElementLength,e.abrupt("break",104);case 19:if(!(0,a.readEbmlLementSize)(this.uint8ArrayAggregator,this.currentEbmlElement)){e.next=23;break}null==this.options.logCallback||this.options.logCallback("got size ".concat(this.currentEbmlElement.size," for current ebml element (id: ").concat(this.currentEbmlElement.id,", name: ").concat(this.currentEbmlElement.name,")")),e.next=24;break;case 23:return e.abrupt("break",104);case 24:return this.ebmlElementStack.length&&-1==this.currentEbmlElement.size&&(this.ebmlElementStack=[]),this.state=E.stateParseElementValue,e.abrupt("break",104);case 27:if(r=(0,c.getEbmlElementType)(this.currentEbmlElement.id),n=r!==c.EbmlElementType.Master||this.currentEbmlElement.id===i.EbmlElementId.Colour,r===c.EbmlElementType.Master&&-1!==this.currentEbmlElement.size&&this.ebmlElementStack.push({element:Object.assign(new a.EbmlElement,this.currentEbmlElement),bytesRemaining:this.currentEbmlElement.size}),this.currentEbmlElement.id!==i.EbmlElementId.CodecID){e.next=40;break}if(n=!1,null!=(o=this.uint8ArrayAggregator.extract(this.currentEbmlElement.size))){e.next=35;break}return e.abrupt("break",104);case 35:d=(0,a.getEbmlElementValue)(this.currentEbmlElement.type,o),1===this.currentTrackType?this.mediaInfo.videoTrack.codecName=d:2===this.currentTrackType&&(this.mediaInfo.audioTrack.codecName=d),null==this.options.logCallback||this.options.logCallback("got codec id ".concat(d)),e.next=91;break;case 40:if(this.currentEbmlElement.id!==i.EbmlElementId.CodecPrivate){e.next=47;break}if(n=!1,null!=this.uint8ArrayAggregator.extract(this.currentEbmlElement.size)){e.next=45;break}return e.abrupt("break",104);case 45:e.next=91;break;case 47:if(this.currentEbmlElement.id!==i.EbmlElementId.TimestampScale){e.next=57;break}if(n=!1,null!=(p=this.uint8ArrayAggregator.extract(this.currentEbmlElement.size))){e.next=52;break}return e.abrupt("break",104);case 52:this.mediaInfo.timestampScale=(0,a.getEbmlElementValue)(this.currentEbmlElement.type,p),this.timestampMsScale=this.mediaInfo.timestampScale/1e6,null==this.options.logCallback||this.options.logCallback("got timestamp scale ".concat(this.mediaInfo.timestampScale)),e.next=91;break;case 57:if(this.currentEbmlElement.id!==i.EbmlElementId.Timestamp){e.next=66;break}if(n=!1,null!=(h=this.uint8ArrayAggregator.extract(this.currentEbmlElement.size))){e.next=62;break}return e.abrupt("break",104);case 62:this.clusterTimestamp=(0,a.getEbmlElementValue)(this.currentEbmlElement.type,h),null==this.options.logCallback||this.options.logCallback("got cluser timestamp ".concat(this.clusterTimestamp)),e.next=91;break;case 66:if(this.currentEbmlElement.id!==i.EbmlElementId.TrackType){e.next=75;break}if(n=!1,null!=(y=this.uint8ArrayAggregator.extract(this.currentEbmlElement.size))){e.next=71;break}return e.abrupt("break",104);case 71:this.currentTrackType=(0,a.getEbmlElementValue)(this.currentEbmlElement.type,y),null==this.options.logCallback||this.options.logCallback("got track with type ".concat(this.currentTrackType)),e.next=91;break;case 75:if(this.currentEbmlElement.id!==i.EbmlElementId.SimpleBlock){e.next=91;break}if(n=!1,null!=(v=this.uint8ArrayAggregator.extract(this.currentEbmlElement.size))){e.next=80;break}return e.abrupt("break",104);case 80:(m=new u.Uint8ArrayAggregator).addArray(v),b={},(0,a.readEbmlLementSize)(m,b),g=(0,u.readBigEndianNumber)(m.extract(2)),m.current,m.next(),m.trim(),w=(this.clusterTimestamp+g)*this.timestampMsScale,this.emit(s.MediaRecorderDemuxerEvents.MediaPacket,new l.MediaPacket(m.array,w));case 91:if(n&&this.uint8ArrayAggregator.skip(this.currentEbmlElement.size),r===c.EbmlElementType.Master||!this.ebmlElementStack.length){e.next=102;break}this.ebmlElementStack[this.ebmlElementStack.length-1].bytesRemaining-=this.currentEbmlElement.elementSize;case 94:if(0!==this.ebmlElementStack[this.ebmlElementStack.length-1].bytesRemaining){e.next=100;break}S=this.ebmlElementStack.pop(),this.ebmlElementStack.length&&(this.ebmlElementStack[this.ebmlElementStack.length-1].bytesRemaining-=S.element.elementSize),S.element.id===i.EbmlElementId.Tracks&&this.emit(s.MediaRecorderDemuxerEvents.MediaInfo,this.mediaInfo),e.next=101;break;case 100:return e.abrupt("break",102);case 101:if(this.ebmlElementStack.length){e.next=94;break}case 102:return this.state=E.stateParseElementId,e.abrupt("break",104);case 104:e.next=8;break;case 106:this.uint8ArrayAggregator.trim(),e.next=113;break;case 109:e.prev=109,e.t5=e.catch(0),this.stop(),this.emit(s.MediaRecorderDemuxerEvents.Error,e.t5);case 113:case"end":return e.stop()}}),e,this,[[0,109]])})),v=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=o.apply(e,t);function a(e){d(i,r,n,a,u,"next",e)}function u(e){d(i,r,n,a,u,"throw",e)}a(void 0)}))},function(e){return v.apply(this,arguments)})}],r&&p(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),E}(o.MediaRecorderDemuxer);t.WebmMediaRecorderDemuxer=g,v(g,"stateParseElementId",1),v(g,"stateParseElementLength",2),v(g,"stateParseElementValue",3)},2706:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}r(9244),r(2593),r(444),r(1076),r(5538),r(5547),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.Uint8ArrayAggregator=void 0,t.readBigEndianNumber=function(e){var t=0;return e.forEach((function(e){t=t<<8|e})),t},r(1e3),r(3275),r(6257),r(1624),r(2827),r(7639),r(6996),r(1366),r(3558),r(8852),r(8630),r(8858),r(6480),r(7219),r(2160),r(4289),r(8165),r(4613),r(3292),r(3748),r(9157),r(5529),r(4882),r(7233),r(1086),r(8786),r(5544),r(1304),r(3114);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.array=null,this.current=null,this.offset=0}var t,r;return t=e,(r=[{key:"addArray",value:function(e){if(null!=e&&0!=e.length)if(this.bytesToSkip>=e.length)this.bytesToSkip-=e.length;else{if(this.bytesToSkip&&(e=e.slice(this.bytesToSkip)),this.array){var t=new Uint8Array(this.array.length-this.offset+e.length);t.set(this.offset?this.array.slice(this.offset):this.array,0),t.set(e,this.array.length-this.offset),this.array=t,this.offset=0}else this.array=e;this.current=this.array[0]}}},{key:"checkBounds",value:function(){if(this.offset===this.array.length)this.offset=0,this.current=null,this.array=null;else{if(!(this.offset<this.array.length))throw Error("invalid Uint8ArrayAggregator state, offset (".concat(this.offset,") is larger than bytes in the current array (").concat(this.array.length,")"));this.current=this.array[this.offset]}}},{key:"next",value:function(){return this.array?(this.offset++,this.checkBounds(),this.current):null}},{key:"nextUnsafe",value:function(){return this.offset++,this.current=this.array[this.offset],this.current}},{key:"bytesAvailable",get:function(){return this.array?this.array.length-this.offset:0}},{key:"trim",value:function(){if(this.array)if(this.offset<this.array.length)this.array=this.array.slice(this.offset),this.offset=0,this.current=this.array[0];else{if(this.offset>this.array.length)throw Error("invalid Uint8ArrayAggregator state, offset (".concat(this.offset,") is larger than bytes in the current array (").concat(this.array.length,")"));this.array=null,this.offset=0,this.current=null}}},{key:"extract",value:function(e){if(this.bytesAvailable>=e){var t=this.offset,r=this.array.slice(t,t+e);return this.offset+=e,this.current=this.array[this.offset],this.checkBounds(),r}return null}},{key:"skip",value:function(e){if(this.bytesAvailable>=e)return this.offset+=e,this.current=this.array[this.offset],void this.checkBounds();e-=this.bytesAvailable,this.array=null,this.offset=0,this.current=null,this.bytesToSkip=e}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Uint8ArrayAggregator=i},9727:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GLOBAL_READY_MESSAGE=void 0,t.GLOBAL_READY_MESSAGE="trusted-origin-storage-ready"},3304:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(){u=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),u=new P(n||[]);return o(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function y(){}function v(){}var m={};l(m,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,a)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(o,a,u,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),l(w,s,"Generator"),l(w,a,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function c(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){c(i,n,o,a,u,"next",e)}function u(e){c(i,n,o,a,u,"throw",e)}a(void 0)}))}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function f(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}function p(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function h(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,v(e,t,"get"))}function y(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,v(e,t,"set"),r),r}function v(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(5547),r(8496),r(4802),r(2112),r(6353),r(3064),r(3275),r(6941),r(6257),r(5128),r(4011),r(5226),r(9270),r(6486),r(3524),r(1896),r(1e3),r(7285),r(887),r(3794),r(1624),r(2047),r(1157),r(8534),Object.defineProperty(t,"__esModule",{value:!0});var m=r(3059),b=r(9011),g=r(861),w=r(5625),E=r(1154),S=r(9145),_=(0,r(9796).default)("tos.TrustedOriginStorageClient"),O=new WeakMap,j=new WeakMap,x=new WeakMap,P=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,O,{writable:!0,value:void 0}),p(this,j,{writable:!0,value:void 0}),p(this,x,{writable:!0,value:void 0}),f(this,"storage",void 0),f(this,"timeout",void 0),window.addEventListener("message",this.listen.bind(this)),y(this,x,r.sort()),y(this,j,new m.default(t)),this.timeout=5e3,y(this,O,[]),Object.defineProperty(this,"storage",{writable:!1,enumerable:!0,configurable:!1,value:(0,b.default)(this.request.bind(this))}),_("Initialized with",h(this,x))}var t,r,n,i;return t=e,r=[{key:"isCrossDomainSupported",get:function(){return h(this,j).isCrossDomainSupported}},{key:"ready",value:(i=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(this,j).ready();case 2:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"destroy",value:function(){h(this,j).destroy()}},{key:"request",value:(n=s(u().mark((function e(t){var r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ready();case 2:if("string"!=typeof t.method||"string"!=typeof t.path){e.next=6;break}return e.next=5,new Promise((function(e,n){var o=a(a({},t),{},{trustedOrigins:h(r,x),id:(0,S.uuidHash)(Math.random().toString(),h(r,x).join(","))});_("Request:",o),r.addListener(e,n,o),h(r,j).postMessage(JSON.stringify(o))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"listen",value:function(e){var t;_("Message:",e,"from",e.source);var r,n=e.source===(null===(t=h(this,j).iframe)||void 0===t?void 0:t.contentWindow);if(n){if(n&&"string"==typeof e.data){var i=(0,E.default)(e.data);_("Response:",i);var a,u=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw a}}}}(h(this,O));try{var c=function(){var e=a.value;new Promise((function(t,r){try{e(i),t()}catch(e){_("Error:",e),r(e)}}))};for(u.s();!(a=u.n()).done;)c()}catch(e){u.e(e)}finally{u.f()}}}else _("Untrusted source",e.source,"expecting",null===(r=h(this,j).iframe)||void 0===r?void 0:r.contentWindow)}},{key:"addListener",value:function(e,t,r){var n=this,o=null,i=function i(a){(0,w.default)(a,r)&&(n.removeListener(i),window.clearTimeout(o),(0,g.default)(a.body)?t(a.body):e(a))};h(this,O).push(i),o=window.setTimeout((function(){n.removeListener(i),t(new Error("Timeout: time of "+n.timeout.toString()+"ms exceeded"))}),this.timeout)}},{key:"removeListener",value:function(e){var t=h(this,O).indexOf(e);t>-1&&h(this,O).splice(t,1)}}],r&&l(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=P},5453:function(e,t,r){function n(){n=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),u=new P(n||[]);return o(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function y(){}function v(){}var m={};l(m,u,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,u)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,u,c){var s=d(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==a(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,c)}),(function(e){n("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return n("throw",e,u,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),l(w,s,"Generator"),l(w,u,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function o(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function c(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}r(5547),r(1624),r(2047),r(8534),r(6257),r(6941),r(6486),r(3524),r(8496),r(4802),r(2112),r(6353),r(3064),r(3275),r(1e3),r(6565),r(9244),r(2593),r(444),r(1076),r(5538),Object.defineProperty(t,"__esModule",{value:!0});var l=r(9727),f=r(7983),d=r(2401),p=r(1154),h=r(7005),y=r(5857),v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"storage",void 0),c(this,"operations",void 0),c(this,"listenWrap",void 0),this.storage=t,this.operations=new f.default}var t,r,s,v,m;return t=e,r=[{key:"engage",value:function(){var e=this;this.listenWrap=function(t){return e.listen(t)},this.operation("GET /storage",h.getStorageEntries.bind(this)).operation("GET /storage/:key",h.getStorageItem.bind(this)).operation("PUT /storage/:key",h.putStorageItem.bind(this)).operation("DELETE /storage/:key",h.deleteStorageItem.bind(this)).operation("DELETE /storage",h.deleteStorageEntries.bind(this)),window.addEventListener("message",this.listenWrap),window.parent.postMessage(JSON.stringify({name:l.GLOBAL_READY_MESSAGE,ready:!0,isCrossDomainSupported:this.storage.isCrossDomainSupported}),"*")}},{key:"operation",value:function(e,t){return this.operations.set(e,t),this}},{key:"dismiss",value:function(){this.operations.clear(),window.removeEventListener("message",this.listenWrap),delete this.listenWrap}},{key:"isTrusted",value:function(e,t){return Array.isArray(t)||(t=[]),t.some((function(t){return t===e}))}},{key:"listen",value:function(e){if("string"==typeof e.data){var t=(0,p.default)(e.data);if(this.isTrusted(e.origin,t.trustedOrigins)&&(0,d.default)(t)){var r=t.method+" "+t.path,n=this.operations.get(r),o={id:t.id,body:void 0};if("object"===a(n))try{o.body=n.call(this.storage,{origin:e.origin,params:n.params,request:t})}catch(e){o.body=this.objectifyError(e)}else o.body=this.objectifyError(new Error("Resource '"+r+"' not found."));window.parent.postMessage(JSON.stringify(o),e.origin)}}}},{key:"objectifyError",value:function(e){var t,r={__isCrossDomainError:!0},n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw a}}}}(Object.getOwnPropertyNames(e));try{for(n.s();!(t=n.n()).done;){var o=t.value;r[o]=e[o]}}catch(e){n.e(e)}finally{n.f()}return r}}],s=[{key:"engage",value:(v=n().mark((function t(){var r,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.default.create();case 2:return r=t.sent,(o=new e(r)).engage(),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})),m=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=v.apply(e,t);function a(e){o(i,r,n,a,u,"next",e)}function u(e){o(i,r,n,a,u,"throw",e)}a(void 0)}))},function(){return m.apply(this,arguments)})}],r&&u(t.prototype,r),s&&u(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=v},3059:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),u=new P(n||[]);return i(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function y(){}function v(){}var m={};l(m,u,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,u)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function o(i,a,u,c){var s=d(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,u,c)}),(function(e){o("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return o("throw",e,u,c)}))}c(s.arg)}var a;i(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),l(w,s,"Generator"),l(w,u,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function i(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function u(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}r(5547),r(1624),r(2047),r(8534),r(8496),r(4802),r(2112),r(6353),r(3064),r(3275),r(6257),r(6941),r(1e3),r(9244),r(2593),r(444),r(1076),r(5538),Object.defineProperty(t,"__esModule",{value:!0});var s=r(9727),l=r(1154),f=r(3632),d=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"_isCrossDomainSupported",void 0),u(this,"container",void 0),u(this,"iframe",void 0),u(this,"frameReady",void 0),u(this,"neverReady",void 0),this.frameReady=!1,this.neverReady=!1;var n=function e(t){if(t.source===r.iframe.contentWindow&&"string"==typeof t.data){var n=(0,l.default)(t.data);(null==n?void 0:n.name)===s.GLOBAL_READY_MESSAGE&&!0===(null==n?void 0:n.ready)&&(window.removeEventListener("message",e),r._isCrossDomainSupported=n.isCrossDomainSupported,r.frameReady=!0)}};window.addEventListener("message",n),setTimeout((function(){r.frameReady||(window.removeEventListener("message",n),r.neverReady=!0)}),1e4);var o=window.document.createElement("div");this.styler(o),this.container=o,this.makeIFrame(t);var i=function(){window.document.body.appendChild(o),r.container.appendChild(r.iframe)};"interactive"===window.document.readyState||"complete"===window.document.readyState?i():window.document.addEventListener("readystatechange",(function e(){"interactive"!==window.document.readyState&&"complete"!==window.document.readyState||(window.document.removeEventListener("readystatechange",e),i())}))}var t,r,n,c;return t=e,r=[{key:"isCrossDomainSupported",get:function(){return this._isCrossDomainSupported}},{key:"postMessage",value:function(e){void 0!==this.iframe&&this.iframe.contentWindow.postMessage(e,"*")}},{key:"destroy",value:function(){this.container.removeChild(this.iframe),delete this.iframe}},{key:"ready",value:(n=o().mark((function e(){var t,r=this,n=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:0,!this.neverReady&&!this.frameReady&&34!==t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,new Promise((function(e){setTimeout((function(){e(r.ready(t+1))}),300)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})),c=function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function u(e){i(a,r,o,u,c,"next",e)}function c(e){i(a,r,o,u,c,"throw",e)}u(void 0)}))},function(){return c.apply(this,arguments)})},{key:"styler",value:function(e){var t={display:"none",position:"absolute",top:"-999px",left:"-999px"};for(var r in t)(0,f.default)(t,r)&&(e.style[r]=t[r])}},{key:"makeIFrame",value:function(e){this.iframe=window.document.createElement("iframe"),this.styler(this.iframe),this.iframe.sandbox.add("allow-scripts"),this.iframe.sandbox.add("allow-same-origin"),this.iframe.src=e}}],r&&a(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=d},9011:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),u=new P(n||[]);return i(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function y(){}function v(){}var m={};l(m,u,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,u)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function o(i,a,u,c){var s=d(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,u,c)}),(function(e){o("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return o("throw",e,u,c)}))}c(s.arg)}var a;i(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),l(w,s,"Generator"),l(w,u,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function i(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){i(a,n,o,u,c,"next",e)}function c(e){i(a,n,o,u,c,"throw",e)}u(void 0)}))}}r(444),r(1076),r(5547),r(2047),r(8496),r(4802),r(2112),r(6353),r(3064),r(3275),r(6941),r(6257),r(1624),r(1e3),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{clear:function(){return a(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({method:"DELETE",path:"/storage"});case 2:case"end":return t.stop()}}),t)})))()},entries:function(){return a(o().mark((function t(){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({method:"GET",path:"/storage"});case 2:return r=t.sent,t.abrupt("return",r.body.entries);case 4:case"end":return t.stop()}}),t)})))()},getItem:function(t){return a(o().mark((function r(){var n;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e({method:"GET",path:"/storage/".concat(t)});case 2:return n=r.sent,r.abrupt("return",n.body.value);case 4:case"end":return r.stop()}}),r)})))()},removeItem:function(t){return a(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e({method:"DELETE",path:"/storage/".concat(t)});case 2:case"end":return r.stop()}}),r)})))()},setItem:function(t,r){return a(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e({method:"PUT",path:"/storage/".concat(t),body:{value:r}});case 2:case"end":return n.stop()}}),n)})))()}}}},861:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(444),r(1076),r(1e3),r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return null!==e&&"object"===n(e)&&!0===e.__isCrossDomainError}},5625:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return"string"==typeof e.id&&"string"==typeof t.id&&e.id===t.id}},7345:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.TrustedOriginStorageServer=t.TrustedOriginStorageClient=void 0;var n=r(3304);Object.defineProperty(t,"TrustedOriginStorageClient",{enumerable:!0,get:function(){return n.default}});var o=r(5453);Object.defineProperty(t,"TrustedOriginStorageServer",{enumerable:!0,get:function(){return o.default}})},7983:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function i(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}r(5547),r(1624),r(2047),r(8534),r(5128),r(9806),r(3524),r(7285),r(3317),r(3114),r(9344),r(9244),r(2593),r(444),r(1076),r(1e3),r(5538),Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"operations",void 0),i(this,"routable",void 0),this.operations={},this.routable={}}var t,r;return t=e,(r=[{key:"get",value:function(e){return"function"==typeof this.operations[e]?{call:this.operations[e]}:this.getRoutable(e)}},{key:"set",value:function(e,t){this.operations[e]=t,this.setRoutable(e)}},{key:"clear",value:function(){for(var e=0,t=Object.keys(this.operations);e<t.length;e++){var r=t[e];this.operations[r]=void 0}for(var n=0,o=Object.keys(this.routable);n<o.length;n++){var i=o[n];this.routable[i]=void 0}this.operations={},this.routable={}}},{key:"isRoutable",value:function(e){var t=this.pathToRegExp(e),r=new RegExp(t,"g").exec(e);return(1!==r.length||r[0]!==e)&&t}},{key:"getRoutable",value:function(e){for(var t=Object.keys(this.routable),r=0;r<t.length;r+=1){var o=t[r],i=(0,this.routable[o])(e);if("object"===n(i))return{call:this.operations[o],params:i.params}}}},{key:"setRoutable",value:function(e){var t=this.isRoutable(e);!1!==t&&(this.routable[e]=this.match(t))}},{key:"pathToRegExp",value:function(e){return"^"+(e=e.replace(/\./g,"\\.").replace(/\//g,"/").replace(/\?/g,"\\?").replace(/\/+$/,"").replace(/\*+/g,".*").replace(/:([^\d|^/][a-zA-Z0-9_]*(?=(?:\/|\\.)|$))/g,(function(e,t){return"(?<".concat(t,">[^/]+?)")})).concat("(\\/|$)"))+"(\\?.*){0,1}$"}},{key:"match",value:function(e){return function(t){var r,n=new RegExp(e,"g").exec(t),o=Array.isArray(n);if(o)return{matches:o,params:null!==(r=null==n?void 0:n.groups)&&void 0!==r?r:void 0}}}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=u},7005:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(444),r(1076),r(5547),r(2047),r(1624),r(1e3),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.deleteStorageEntries=t.deleteStorageItem=t.putStorageItem=t.getStorageItem=t.getStorageEntries=void 0;var o=r(9975);t.getStorageEntries=function(e,t){var r=(0,o.default)(t.request.trustedOrigins);return{entries:e.entries(r)}},t.getStorageItem=function(e,t){if("object"===n(t.params)){var r=(0,o.default)(t.request.trustedOrigins);return{value:e.get(r,t.params.key)}}return{value:null}},t.putStorageItem=function(e,t){if("object"===n(t.params)&&"object"===n(t.request.body)){var r=(0,o.default)(t.request.trustedOrigins);return e.set(r,t.params.key,t.request.body.value),{key:t.params.key,value:t.request.body.value}}return{key:"undefined"}},t.deleteStorageItem=function(e,t){if("object"===n(t.params)){var r=(0,o.default)(t.request.trustedOrigins);e.delete(r,t.params.key)}},t.deleteStorageEntries=function(e,t){var r=(0,o.default)(t.request.trustedOrigins);e.clear(r)}},9975:function(e,t,r){r(887),r(1896),Object.defineProperty(t,"__esModule",{value:!0});var n=r(9145);t.default=function(e){return(0,n.uuidHash)(e.sort().join(","),"db0ec212-8371-47d7-b44a-c2d50493194d")}},2401:function(e,t,r){r(3600),Object.defineProperty(t,"__esModule",{value:!0});var n=["DELETE","GET","POST","PUT"];t.default=function(e){return"string"==typeof e.id&&"string"==typeof e.method&&n.includes(e.method)&&"string"==typeof e.path&&void 0!==e.trustedOrigins&&Array.isArray(e.trustedOrigins)}},2375:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function i(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}r(5547),r(1624),r(2047),r(8534),r(5128),r(9244),r(2593),r(444),r(1076),r(1e3),r(5538),Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"memory",void 0),i(this,"length",void 0),this.memory={},Object.defineProperty(this,"length",{get:function(){return Object.keys(this.memory).length}})}var t,r;return t=e,(r=[{key:"getItem",value:function(e){var t;return null!==(t=this.memory[e])&&void 0!==t?t:null}},{key:"setItem",value:function(e,t){this.memory[e]=t}},{key:"removeItem",value:function(e){delete this.memory[e]}},{key:"key",value:function(e){return Object.keys(this.memory)[e]}},{key:"clear",value:function(){this.memory={}}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=u},5857:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),u=new P(n||[]);return i(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function y(){}function v(){}var m={};l(m,u,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,u)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function o(i,a,u,c){var s=d(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,u,c)}),(function(e){o("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return o("throw",e,u,c)}))}c(s.arg)}var a;i(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),l(w,s,"Generator"),l(w,u,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function i(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function s(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}r(5547),r(6257),r(6941),r(6486),r(8496),r(4802),r(2112),r(6353),r(3064),r(3600),r(6770),r(3524),r(685),r(1624),r(1e3),r(8719),r(2047),r(8534),r(3275),r(9244),r(2593),r(444),r(1076),r(5538),Object.defineProperty(t,"__esModule",{value:!0});var f=r(7191),d=r(2375),p=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"storage",void 0),s(this,"isCrossDomainSupported",void 0),s(this,"sep",":||:"),s(this,"keyCache",void 0),this.storage=t,this.isCrossDomainSupported=r,this.initKeyCache()}var t,r,n,u,l;return t=e,r=[{key:"initKeyCache",value:function(){this.keyCache={};for(var e=this.storage.length,t=0;t<e;t+=1){var r=this.storage.key(t);if("string"==typeof r&&r.includes(this.sep)){var n=a(r.split(this.sep),2),o=n[0],i=n[1];this.getKeySet(o).add(i)}}}},{key:"compositeKey",value:function(e,t){return e+this.sep+t}},{key:"getKeySet",value:function(e){var t=this.keyCache[e];return void 0===t&&(t=new Set,this.keyCache[e]=t),t}},{key:"get",value:function(e,t){return this.storage.getItem(this.compositeKey(e,t))}},{key:"set",value:function(e,t,r){this.getKeySet(e).add(t),this.storage.setItem(this.compositeKey(e,t),r)}},{key:"delete",value:function(e,t){this.storage.removeItem(this.compositeKey(e,t))}},{key:"clear",value:function(e){var t=this,r=this.getKeySet(e);r.forEach((function(r){t.delete(e,r)})),r.clear()}},{key:"entries",value:function(e){var t=this,r=[];return this.getKeySet(e).forEach((function(n){r.push([n,t.get(e,n)])})),r}}],n=[{key:"create",value:(u=o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.default)("localStorage");case 2:if(!t.sent){t.next=6;break}t.t0=new e(window.localStorage,!0),t.next=7;break;case 6:t.t0=new e(new d.default,!1);case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}}),t)})),l=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=u.apply(e,t);function a(e){i(o,r,n,a,c,"next",e)}function c(e){i(o,r,n,a,c,"throw",e)}a(void 0)}))},function(){return l.apply(this,arguments)})}],r&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=p},3632:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},1154:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};try{var r;return null!==(r=JSON.parse(e))&&void 0!==r?r:t}catch(e){}return t}},7191:function(e,t,r){function n(){n=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),u=new P(n||[]);return i(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function y(){}function v(){}var m={};l(m,u,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,u)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,a,u,c){var s=d(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==o(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,c)}),(function(e){n("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return n("throw",e,u,c)}))}c(s.arg)}var a;i(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),l(w,s,"Generator"),l(w,u,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function a(){var e;return e=n().mark((function e(t){var r,i,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof document.hasStorageAccess){e.next=6;break}return e.next=3,document.hasStorageAccess();case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=void 0;case 7:if(void 0===(i=e.t0)){e.next=10;break}return e.abrupt("return",i);case 10:return e.prev=10,r="string"==typeof t?window[t]:t,a="__storage_test__",r.setItem(a,a),r.removeItem(a),e.abrupt("return",!0);case 18:return e.prev=18,e.t1=e.catch(10),e.abrupt("return",e.t1 instanceof DOMException&&(22===e.t1.code||1014===e.t1.code||"QuotaExceededError"===e.t1.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.t1.name)&&"object"===o(r)&&0!==r.length);case 21:case"end":return e.stop()}}),e,null,[[10,18]])})),a=function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){i(a,n,o,u,c,"next",e)}function c(e){i(a,n,o,u,c,"throw",e)}u(void 0)}))},a.apply(this,arguments)}r(444),r(1076),r(5547),r(1624),r(2047),r(8534),r(8496),r(4802),r(2112),r(6353),r(3064),r(3275),r(6257),r(1e3),r(6941),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.apply(this,arguments)}},9145:function(e,t,r){function n(e,t){var r=(4194303&e)*(t|=0);return 0!=(4290772992&e)&&(r+=(4290772992&e)*t|0),0|r}r(5393),r(1e3),r(7285),r(1624),r(9382),r(7639),r(6996),r(1366),r(3558),r(8852),r(8630),r(8858),r(6480),r(7219),r(2160),r(4289),r(8165),r(4613),r(3292),r(3748),r(9157),r(5529),r(4882),r(7233),r(1086),r(8786),r(5544),r(1304),r(3524),r(9344),r(887),Object.defineProperty(t,"__esModule",{value:!0}),t.uuidHash=void 0,t.uuidHash=function(e,t){var r=function(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=3735928559^r,i=1103547991^r,a=2207095982^r,u=1867964279^r,c=0;c<e.length;c++)o=n(o^(t=e.charCodeAt(c)),2654435761),i=n(i^t,1597334677),a=n(a^t,2654435761),u=n(u^t,1597334677);function s(e){return(e>>>0).toString(16).padStart(8,"0")}return o=n(o^o>>>16,2246822507)^n(i^i>>>13,3266489909),i=n(i^i>>>16,2246822507)^n(o^o>>>13,3266489909),a=n(a^a>>>16,2246822507)^n(u^u>>>13,3266489909),u=n(u^u>>>16,2246822507)^n(a^a>>>13,3266489909),function(e){for(var t=new Uint16Array(e.length),r=0;r<e.length;r++)t[r]=parseInt(e.charAt(r),16);return t}(s(i)+s(o)+s(u)+s(a))}(t+e),o=0;return[1e7,1e3,1e3,1e3,1e11].join("-").replace(/[01]/g,(function(e){var t=r[o].toString(16);return o+=1,t}))}},1043:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9244),r(2593),r(444),r(1076),r(1e3),r(5538);var i=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._message=t,this._node=r}var t,r;return t=e,(r=[{key:"message",get:function(){return this._message}},{key:"node",get:function(){return this._node}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=i},9290:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}r(5547),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(1624),r(1e3),r(8719),r(2047),r(8534),r(5226),r(3275),r(9244),r(2593),r(444),r(1076),r(5538);var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onPropertySet=t,this._klasses=new Set}var t,r;return t=e,(r=[{key:"_trackObserver",value:function(e){e.__cbio_observers||(e.__cbio_observers=new Set),e.__cbio_observers.add(this)}},{key:"_untrackObserver",value:function(e){e.__cbio_observers&&e.__cbio_observers.delete(this)}},{key:"_tap",value:function(e,t){if(!e["__cbio_override_".concat(t)]){var r=Object.getOwnPropertyDescriptor(e.prototype,t);if(r){e["__cbio_override_".concat(t)]=!0;var n=r.set;r.set=function(r){var o=this;n.call(this,r),e.__cbio_observers&&e.__cbio_observers.forEach((function(e){e.onPropertySet(o,t,r)}))},Object.defineProperty(e.prototype,t,r)}}}},{key:"observe",value:function(e,t){this._klasses.add(e),this._trackObserver(e),this._tap(e,t)}},{key:"disconnect",value:function(){var e=this;this._klasses.forEach((function(t){return e._untrackObserver(t)})),this._klasses.clear()}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=i},1213:function(e,t,r){r(5128),r(4011),r(5226),r(9270),r(5547),r(1624),r(2047),r(8534),r(1157),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(1e3),r(3275),r(1087),r(3133),r(9244),r(2593),r(444),r(1076),r(5538);var n,o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(n,i,c):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(3682)),i=(n=r(1043))&&n.__esModule?n:{default:n};function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function d(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t,this._dom={id:t,childNodes:[]},this._mapping={}}var t,r,n;return t=e,n=[{key:"createMapping",value:function(e){var t={};return(0,o.default)(e,(function(e){e.id?t[e.id]=e:console.warn("node missing id",e)})),t}},{key:"applyPatch",value:function(e,t){var r=this.createMapping(e),n={};t.forEach((function(e){if(e.id){var t=r[e.id]||{};r[e.id]=s(s({},t),e),n[e.id]=!0}else console.warn("diff missing id",e)})),Object.values(r).forEach((function(e){e.childNodes=(e.childNodes||[]).map((function(t){var n=t.id||t,o=r[n];if(!o)throw new i.default("denormalisation failed for child ".concat(n),e);return o}))}));var a=r[e.id],u=(0,o.depthFirstPostOrder)(a,(function(e,t){if(e.childNodes=t,t.map((function(e){return n[e.id]})).reduce((function(e,t){return e||t}),!1)){n[e.id]=!0;var o=s({},e);return r[e.id]=o,o}return e}));return{dom:u,mapping:this.createMapping(u)}}}],(r=[{key:"id",get:function(){return this._id}},{key:"document",get:function(){return this._dom}},{key:"node",value:function(e){return this._mapping[e]}},{key:"applyPatch",value:function(t){var r=e.applyPatch(this._dom,t),n=r.dom,o=r.mapping;return this._dom=n,this._mapping=o,this}}])&&f(t.prototype,r),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=p},3682:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(5128),r(4011),r(5226),r(3275),r(9270),r(5547),r(1624),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,r){var n=t.childNodes,o=r(t,(function(){n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}));return n&&n.length?i(i({},o),{},{childNodes:Array.from(n).map((function(t){return e(t,r)}))}):o},t.depthFirstPostOrder=function e(t,r){var n=Array.from(t.childNodes||[]).map((function(t){return e(t,r)}));return r(t,n)},r(3133),r(6486),r(2047),r(9244),r(2593),r(444),r(1076),r(1e3),r(5538)},1514:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(1624),r(1e3),r(2047),r(1157),r(8534),r(5226),r(444),r(1076),r(5547),Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"CompressionError",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"PropertyObserver",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"VirtualDOM",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"depthFirst",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"depthFirstPostOrder",{enumerable:!0,get:function(){return a.depthFirstPostOrder}}),Object.defineProperty(t,"isxdoc",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"parents",{enumerable:!0,get:function(){return c.default}});var o=f(r(1043)),i=f(r(1213)),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(3682)),u=f(r(9122)),c=f(r(1725)),s=f(r(9290));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}},9122:function(e,t){function r(e){try{return!e.document&&!1}catch(e){return!0}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!!r(e)||!("IFRAME"!==e.tagName||!r(e.contentWindow))}},1725:function(e,t,r){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(444),r(1076),r(1e3),r(5547),r(1624),r(2047),r(8534),r(6486),r(6257),r(6941),r(3524),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,r){for(var o=[],i=t;i.parentNode&&i.parentNode!==r;)o.push(i.parentNode),i=i.parentNode;var a,u=i.defaultView&&i.defaultView.frameElement;return u?[].concat(o,[u],function(e){if(Array.isArray(e))return n(e)}(a=e(u))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):o},r(3114)},9796:function(e,t,r){var n;r(3524),r(3317),r(9806),r(7285),r(3794),r(9344),t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(n=!1,function(){n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=r(4701)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},4701:function(e,t,r){function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(444),r(1076),r(5547),r(1624),r(2047),r(8534),r(6486),r(6941),r(1e3),r(3275),r(5128),r(5538),r(3524),r(9344),r(3794),r(685),r(9806),r(7285),r(6257),r(887),r(3114),r(3133),e.exports=function(e){function t(e){var r,n,i,a=null;function u(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];if(u.enabled){var i=u,a=Number(new Date),c=a-(r||a);i.diff=c,i.prev=r,i.curr=a,r=a,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var s=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return"%";s++;var o=t.formatters[r];if("function"==typeof o){var a=n[s];e=o.call(i,a),n.splice(s,1),s--}return e})),t.formatArgs.call(i,n),(i.log||t.log).apply(i,n)}}return u.namespace=e,u.useColors=t.useColors(),u.color=t.selectColor(e),u.extend=o,u.destroy=t.destroy,Object.defineProperty(u,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==a?a:(n!==t.namespaces&&(n=t.namespaces,i=t.enabled(e)),i)},set:function(e){a=e}}),"function"==typeof t.init&&t.init(u),u}function o(e,r){var n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(n(t.names.map(i)),n(t.skips.map(i).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(3231),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(r){t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},1178:function(e,t,r){r(9244),r(2593),r(444),r(1076),r(5538),r(3064),r(9616),r(5547),r(8496),r(4802),r(2112),r(6353),r(3275),r(6941),r(6257),r(5226),r(9270),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CobrowseIO=void 0,r(1e3),r(4011),r(3600),r(6770),r(6706),r(5128),r(3133),r(1624),r(2047),r(8534),r(6955),r(8927),r(1157);var n=E(r(1381)),o=r(1514),i=r(1239),a=r(5064),u=r(8302),c=r(5161),s=r(6362),l=r(3042),f=E(r(1289)),d=E(r(1560)),p=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==S(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(9356)),h=E(r(3191)),y=r(1640),v=r(9426),m=E(r(2175)),b=E(r(9796)),g=E(r(3677));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function E(e){return e&&e.__esModule?e:{default:e}}function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(){j=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),u=new P(o||[]);return n(a,"_invoke",{value:E(e,r,u)}),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var f={};function d(){}function p(){}function h(){}var y={};c(y,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(k([])));m&&m!==t&&r.call(m,i)&&(y=m);var b=h.prototype=d.prototype=Object.create(y);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,u){var c=l(e[n],e,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==S(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=_(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function _(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),c(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),c(b,u,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function x(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){x(i,n,o,a,u,"next",e)}function u(e){x(i,n,o,a,u,"throw",e)}a(void 0)}))}}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M(n.key),n)}}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function C(e,t,r){return(t=M(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){var t=function(e,t){if("object"!==S(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===S(t)?t:String(t)}function N(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function A(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,D(e,t,"get"))}function R(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,D(e,t,"set"),r),r}function D(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var F=(0,b.default)("cbio.CobrowseIO"),W=new WeakMap,G=new WeakMap,z=new WeakMap,U=new WeakMap,Y=new WeakMap,B=new WeakMap,q=new WeakMap,V=new WeakMap,H=new WeakMap,K=new WeakMap,X=new WeakMap,$=new WeakMap,Q=new WeakMap,Z=new WeakMap,J=new WeakMap,ee=new WeakMap,te=new WeakMap,re=new WeakMap,ne=new WeakMap,oe=new WeakMap,ie=new WeakMap,ae=new WeakMap,ue=new WeakMap,ce=new WeakMap,se=new WeakMap,le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(_,e);var t,r,i,b,w,E=(b=_,w=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I(b);if(w){var r=I(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}(this,e)});function _(){var e,t,r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).sessionStorageFactory,i=void 0===r?function(e,t,r){var n=r.localStorage;return y.SessionStorage.create(e,t,{localStorage:n})}:r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),N(L(e=E.call(this)),W,{writable:!0,value:new a.ActivityDetection}),N(L(e),G,{writable:!0,value:void 0}),N(L(e),z,{writable:!0,value:void 0}),N(L(e),U,{writable:!0,value:!1}),N(L(e),Y,{writable:!0,value:!0}),N(L(e),B,{writable:!0,value:new v.LocalSessionStorage}),N(L(e),q,{writable:!0,value:void 0}),N(L(e),V,{writable:!0,value:void 0}),N(L(e),H,{writable:!0,value:{}}),N(L(e),K,{writable:!0,value:c.Device.info.capabilities}),N(L(e),X,{writable:!0,value:new c.Device(L(e))}),N(L(e),$,{writable:!0,value:new l.ConsentDialog}),N(L(e),Q,{writable:!0,value:new l.ConsentDialog}),N(L(e),Z,{writable:!0,value:new l.ConsentDialog}),N(L(e),J,{writable:!0,value:void 0}),N(L(e),ee,{writable:!0,value:void 0}),N(L(e),te,{writable:!0,value:void 0}),C(L(e),"start",P(j().mark((function t(){var r,n,i=arguments;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(F("start()",r=i.length>0&&void 0!==i[0]?i[0]:{},"in",document),!h.default.isHeadless()||r.allowHeadless){t.next=5;break}return console.warn("CobrowseIO: Not starting Cobrowse in a headless browser"),t.abrupt("return");case 5:if(window.self===window.top){t.next=18;break}if(!r.allowIFrameStart){t.next=10;break}a.WindowTracking.setTracksIframes(!0),t.next=18;break;case 10:if(!(0,o.isxdoc)(window.parent)){t.next=16;break}return(0,p.init)(L(e)),F("Starting Cobrowse in Iframe bridge mode with trusted origins:",p.default.trustedOrigins,"for",document),t.abrupt("return");case 16:return F("Not starting Cobrowse for same-origin iframe",document),t.abrupt("return");case 18:if(e.license){t.next=21;break}return console.error("CobrowseIO.license must be set before calling start"),t.abrupt("return");case 21:if(A(L(e),U)){t.next=37;break}return f.default.initialize(),a.WindowTracking.start(),(0,d.default)(_.version).catch((function(){})),R(L(e),V,A(L(e),q).call(L(e),e.trustedOrigins,e.api,{localStorage:A(L(e),B)})),console.log("CobrowseIO started",_.version),R(L(e),U,!0),!1===r.register&&R(L(e),Y,!1),e.registration&&(A(L(e),W).on("active",(function(){return A(L(e),X).runRegistrationLoop()})),A(L(e),W).on("inactive",(function(){return A(L(e),X).pauseRegistrationLoop()}))),A(L(e),W).start(),F("attempting to restore session after start"),t.next=34,A(L(e),re).call(L(e));case 34:R(L(e),z,null),null!==(n=e.currentSession)&&void 0!==n&&n.isActive()||e.hideSessionControls(),window.addEventListener("focus",A(L(e),re),{capture:!0});case 37:case"end":return t.stop()}}),t)})))),C(L(e),"stop",P(j().mark((function t(){return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentSession||e.currentSession.isEnded()){t.next=3;break}return t.next=3,e.currentSession.end().catch((function(e){console.warn("CobrowseIO: Failed to end session on stop",e)}));case 3:return window.removeEventListener("focus",A(L(e),re),{capture:!0}),A(L(e),oe).call(L(e),null),a.WindowTracking.stop(),A(L(e),W).stop(),t.next=9,A(L(e),X).destroy();case 9:return t.next=11,A(L(e),V)&&A(L(e),V).destroy();case 11:return R(L(e),V,void 0),R(L(e),U,!1),t.abrupt("return",L(e));case 14:case"end":return t.stop()}}),t)})))),N(L(e),re,{writable:!0,value:(t=P(j().mark((function t(){var r;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(L(e),V).load(L(e));case 2:if(!(r=t.sent)){t.next=14;break}if(t.prev=4,r.state()){t.next=8;break}return t.next=8,r.fetch();case 8:A(L(e),oe).call(L(e),r,{invalidateFrames:!0}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.warn("CobrowseIO: Failed to fetch restored session",t.t0);case 14:return t.abrupt("return",null);case 15:case"end":return t.stop()}}),t,null,[[4,11]])}))),function(){return t.apply(this,arguments)})}),N(L(e),ne,{writable:!0,value:function(){A(L(e),X).bannerMessage()&&l.Toast.show(A(L(e),X).bannerMessage())}}),N(L(e),oe,{writable:!0,value:function(t){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).invalidateFrames,n=void 0!==r&&r;if(F("setting current session",t),!t||!A(L(e),G)||A(L(e),G).session.id()!==t.id()){A(L(e),$).hide(),A(L(e),Q).hide(),A(L(e),Z).hide();var o=function(e,t){return p.default.broadcastToChildren("control",[e,t])};A(L(e),G)&&(A(L(e),G).session.off("updated",A(L(e),ie)),A(L(e),G).session.off("ended",A(L(e),ae)),A(L(e),G).session.off("control",o),A(L(e),G).destroy(),R(L(e),G,null)),t&&(R(L(e),G,new s.SessionContext(t,L(e),A(L(e),V))),t.state()&&A(L(e),ie).call(L(e),t),t.on("updated",A(L(e),ie)),t.once("ended",A(L(e),ae)),t.on("control",o),n&&A(L(e),G).invalidateFrames())}}}),N(L(e),ie,{writable:!0,value:function(t){t.fullDevice()||A(L(e),Z).hide(),"requested"!==t.remoteControl()&&A(L(e),Q).hide(),t.isAuthorizing()||A(L(e),$).hide(),A(L(e),ne).call(L(e),t),e.emit("session.updated",t)}}),N(L(e),ae,{writable:!0,value:function(t){e.emit("session.ended",t),A(L(e),oe).call(L(e),null)}}),N(L(e),ue,{writable:!0,value:void 0}),C(L(e),"hideSessionControls",(function(){l.SessionStateOverlay.hide()})),N(L(e),ce,{writable:!0,value:(0,n.default)((function(){A(L(e),X).hasPendingUpdates()&&A(L(e),U)&&e.registration&&A(L(e),X).updateRegistration().catch((function(e){console.warn("CobrowseIO: updating customData failed",e)}))}),8e3,{leading:!0,trailing:!0})}),C(L(e),"confirmRemoteControl",P(j().mark((function t(){return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",A(L(e),Q).show(m.default.tr("REMOTE_CONTROL_REQUEST_TITLE"),m.default.tr("REMOTE_CONTROL_REQUEST_DESCRIPTION")));case 1:case"end":return t.stop()}}),t)})))),C(L(e),"confirmFullDevice",P(j().mark((function t(){return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",A(L(e),Z).show(m.default.tr("FULL_DEVICE_REQUEST_TITLE"),m.default.tr("FULL_DEVICE_REQUEST_DESCRIPTION")));case 1:case"end":return t.stop()}}),t)})))),C(L(e),"confirmSession",P(j().mark((function t(){return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",A(L(e),$).show(m.default.tr("SESSION_REQUEST_TITLE"),m.default.tr("SESSION_REQUEST_DESCRIPTION")));case 1:case"end":return t.stop()}}),t)})))),C(L(e),"getSession",function(){var t=P(j().mark((function t(r){var n;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(A(L(e),U)){t.next=2;break}throw new Error("CobrowseIO not started. Call CobrowseIO.start()");case 2:if(!e.currentSession||e.currentSession.id()!==r&&e.currentSession.code()!==r){t.next=4;break}return t.abrupt("return",e.currentSession.fetch());case 4:return n=new s.Session(L(e)).updateResource({id:r}),A(L(e),oe).call(L(e),n),t.next=8,n.fetch();case 8:return e.emit("session.loaded",n),t.abrupt("return",n);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),C(L(e),"createSession",P(j().mark((function t(){var r;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(A(L(e),U)){t.next=2;break}throw new Error("CobrowseIO not started. Call CobrowseIO.start()");case 2:if(!e.currentSession||!e.currentSession.isActive()&&!e.currentSession.isAuthorizing()){t.next=4;break}throw new Error("Already in a session");case 4:return r=new s.Session(L(e)),A(L(e),oe).call(L(e),r),t.next=8,r.update({custom_data:e.customData,device:c.Device.info});case 8:return e.emit("session.loaded",r),t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)})))),C(L(e),"createSessionCode",P(j().mark((function t(){var r;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createSession();case 2:return r=t.sent,t.abrupt("return",r.code());case 4:case"end":return t.stop()}}),t)})))),C(L(e),"client",P(j().mark((function t(){return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",L(e));case 1:case"end":return t.stop()}}),t)})))),N(L(e),se,{writable:!0,value:function(t){t&&["license","api","registration","customData","showSessionControls","hideSessionControls","confirmSession","confirmRemoteControl","confirmFullDevice","trustedOrigins","redactedViews","unredactedViews","ignoredViews","capabilities"].forEach((function(r){t[r]&&(e[r]=t[r])}))}}),F("interface constructed in",document),R(L(e),q,i),e.api="https://api.cobrowse.io",A(L(e),se).call(L(e),window&&window.CobrowseIO),R(L(e),z,A(L(e),B).load(L(e))),A(L(e),X).on("register",A(L(e),ne)),A(L(e),X).on("notification",(function(t){var r=t["cobrowseio-code"];r&&e.getSession(r).catch((function(e){console.warn("CobrowseIO: session fetch failed:",e)}))})),e}return t=_,i=[{key:"version",get:function(){return c.Device.info.sdk_version}}],(r=[{key:"deviceId",value:function(){return c.Device.deviceId()}},{key:"currentSession",get:function(){return A(this,G)?A(this,G).session:A(this,z)}},{key:"showSessionControls",get:function(){return A(this,ue)?A(this,ue):l.SessionStateOverlay.show},set:function(e){R(this,ue,e),l.SessionStateOverlay.hide(),this.currentSession&&this.currentSession.isActive()&&A(this,ue).call(this)}},{key:"license",get:function(){return u.RESTResource.getHeader("X-CobrowseLicense")},set:function(e){if(A(this,U)&&this.license!==e)throw new Error("Cannot change license once Cobrowse is started");u.RESTResource.setHeader("X-CobrowseLicense",e)}},{key:"api",get:function(){return u.RESTResource.api},set:function(e){if(A(this,U)&&u.RESTResource.api!==e)throw new Error("Cannot change API once Cobrowse is started");u.RESTResource.api=e}},{key:"registration",get:function(){return!!A(this,Y)},set:function(e){if(A(this,U)&&A(this,Y)!==e)throw new Error("Cannot change auto-registration state once Cobrowse is started");R(this,Y,e)}},{key:"redactedViews",get:function(){return A(this,J)},set:function(e){if(A(this,U))throw new Error("Cannot set redacted views after Cobrowse is started");R(this,J,e)}},{key:"unredactedViews",get:function(){return A(this,ee)},set:function(e){if(A(this,U))throw new Error("Cannot set unredacted views after Cobrowse is started");R(this,ee,e)}},{key:"ignoredViews",get:function(){return A(this,te)},set:function(e){if(A(this,U))throw new Error("Cannot set ignored views after Cobrowse is started");R(this,te,e),g.default.setIgnoredViews(e)}},{key:"capabilities",get:function(){var e,t;return null!==(e=null===(t=this.currentSession)||void 0===t?void 0:t.capabilities)&&void 0!==e?e:A(this,K)},set:function(e){if(A(this,U))throw new Error("Cannot set capabilities after Cobrowse is started");if(!Array.isArray(e))throw new Error("Capabilities should be an array");R(this,K,e.filter((function(e){return!!c.Device.info.capabilities.includes(e)||(console.warn("Capability '".concat(e,"' not supported. Ignoring...")),!1)})))}},{key:"customData",get:function(){return O(O({},A(this,X).customData),A(this,H))},set:function(e){if("object"!==S(e))throw new Error("Custom data must be an object");if(R(this,H,O(O({},A(this,H)),e)),A(this,U)&&setTimeout(A(this,ce),0),this.currentSession&&this.currentSession.isActive()){var t=this.currentSession.resource.custom_data;if(!Object.keys(e).find((function(r){return t[r]!==e[r]})))return void F("no changes to session custom data");this.currentSession.update({custom_data:e}).catch((function(){console.warn("CobrowseIO: failed to update custom data on active session")}))}}},{key:"trustedOrigins",get:function(){return p.default.trustedOrigins},set:function(e){var t=e.map((function(e){try{return new URL(e).origin}catch(t){return console.warn("CobrowseIO: Invalid URL in trustedOrigins:",e),null}})).filter((function(e){return e}));p.default.trustedOrigins=t}},{key:"version",get:function(){return _.version}}])&&k(t.prototype,r),i&&k(t,i),Object.defineProperty(t,"prototype",{writable:!1}),_}(i.EventEmitter);t.CobrowseIO=le,u.RESTResource.setHeader("Content-Type","application/json"),u.RESTResource.setHeader("X-CobrowsePlatform","web"),u.RESTResource.setHeader("X-CobrowseSDKVersion",le.version),u.RESTResource.setHeader("X-CobrowseDevice",c.Device.deviceId()),u.RESTResource.setHeader("X-CobrowseAPIVersion","1.2.0");var fe=new le;t.default=fe},8656:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(444),r(1076),r(5547),r(1624),r(2047),r(8534),r(8496),r(4802),r(2112),r(6353),r(3064),r(3275),r(6941),r(6257),t.yO=function(){return d.apply(this,arguments)},r(1e3);var o=i(r(1178));function i(e){return e&&e.__esModule?e:{default:e}}function a(){a=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),u=new P(n||[]);return o(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function y(){}function v(){}var m={};l(m,u,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,u)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(o,a,u,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),l(w,s,"Generator"),l(w,u,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function u(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,c,"next",e)}function c(e){u(i,n,o,a,c,"throw",e)}a(void 0)}))}}var s=(0,i(r(9796)).default)("cbio.Integrations.Freshchat");function l(){return f.apply(this,arguments)}function f(){return(f=c(a().mark((function e(){var t,r,n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.default.deviceId(),window.fcWidget.user.setProperties({cobrowse_device_id:t}),e.next=4,window.fcWidget.user.get();case 4:(r=e.sent).success&&(s("Freshchat initialized"),n=r.data,i={freshchat_numeric_user_id:n.id+"",freshchat_user_id:n.alias,cobrowse_device_id:t},n.isNameGenerated||(i.freshchat_user_first_name=n.firstName,i.freshchat_user_last_name=n.lastName),n.email&&(i.freshchat_user_email=n.email),o.default.customData=i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.fcWidget){e.next=3;break}return s("Freshchat not found"),e.abrupt("return");case 3:window.fcWidget.on("user:created",l),window.fcWidget.on("widget:opened",c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fcWidget.user.isExists();case 2:if(!e.sent){e.next=6;break}return e.next=6,l();case 6:case"end":return e.stop()}}),e)}))));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1974:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(444),r(1076),r(5547),r(1624),r(2047),r(8534),r(8496),r(4802),r(2112),r(6353),r(3064),r(3275),r(6941),r(6257),t.Z=function(){if(!c)try{var e,t,r,n=window.CXBus||(null===(e=window)||void 0===e||null===(t=e._genesys)||void 0===t||null===(r=t.widgets)||void 0===r?void 0:r.bus);if(!n)throw new Error("Genesys bus not found");c=n.registerPlugin("CobrowseIOExtension"),window.oCobrowseIOExtension=c,s("CobrowseIOExtension",c),c.subscribe("WebChat.opened",(function(e){s("CobrowseIOExtension.WebChat.opened",e),function(e){e.command("WebChatService.updateUserData",{cobrowse_device_id:o.default.deviceId()}).done((function(e){s("CobrowseIOExtension.WebChatService.updateUserData succeeded",e)})).fail((function(e){s("CobrowseIOExtension.WebChatService.updateUserData failed",e)}))}(c)})),c.subscribe("WebChatService.started",(function(e){try{s("CobrowseIOExtension.WebChatService.started",e),function(e){document.getElementsByClassName("cx-menu")[0].innerHTML+='<li role="none"><div class="cx-menu-item cx-cobrowseio cx-icon" role="button" data-icon="cobrowseio" tabindex="0" aria-label="Start Co-browse Opens the Co-browse session" title="Start Co-browse" style="display: block/;"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" viewBox="0 0 100 100" focusable="false" role="img" aria-hidden="true" alt="" data-gcb-service-node="true"><g class="cx-svg-icon-tone1" data-gcb-service-node="true"><path d="M11.5000001,3 L85.4166665,3 L87.6666668,3 C90.2624998,3 97,3.75367965 97,8.36940835 L97,30.4776335 L4.16666671,30.4776335 L4.16666671,70.4963922 C4.16666671,78.8021647 9.0333332,80.6810966 11.3333336,80.6810966 L88.6666664,80.6810966 C90.9625002,80.6810966 92.8333333,78.8021647 92.8333333,76.4963922 L92.8333333,41.8470419 L97,41.8470419 L97,79.5093796 C97,84.1251081 93.2624998,84.8787879 91.6666668,84.8787879 L8.3333332,84.8787879 C3.73750015,84.8787879 1,81.1251081 0,75.5093796 L0,8.36940835 C3,3.75367965 2.73750015,3 8.3333332,3 L8.5000001,3 Z M18.0297398,7.03030303 L5.9962825,7.03030303 C5.79033476,7.03030303 3.99999999,8.59607987 3.99999999,10.5175565 L3.999999,26.1125541 L93,26.1125541 L93,10.5175565 C93,8.59607987 91.2056692,7.03030303 89.0037175,7.03030303 L81.9702602,7.03030303 L18.0297398,7.03030303 Z M42.3451929,54.7727663 L42.3451929,68.6904309 L35,68.6904309 L35,47.7138693 C35,44.657411 37.4676761,42.1818182 40.5082059,42.1818182 L61.3971055,42.1818182 L61.3971055,49.5560425 L47.5394308,49.5560425 L66.3971054,67.9373646 L61.202867,73.154089 L42.3451929,54.7727663 Z" id="Fill-1-Copy""></path></g></svg></div></li>',document.getElementsByClassName("cx-cobrowseio")[0].onclick=function(){return function(e){return l.apply(this,arguments)}(e)}}(c);var t={cobrowse_device_id:o.default.deviceId()};e&&e.data&&(e.data.data&&e.data.data.conversationId&&(t.genesys_conversation_id=e.data.data.conversationId),e.data.userId&&"deprecated"!==e.data.userId&&(t.genesys_user_id=e.data.userId),e.data.sessionID&&"deprecated"!==e.data.sessionID&&(t.genesys_session_id=e.data.sessionID)),o.default.customData=t}catch(e){s("Error during CobrowseIOExtension.WebChatService.started",e)}})),c.subscribe("WebChatService.agentConnected",(function(e){s("CobrowseIOExtension.WebChatService.agentConnected",e)})),c.subscribe("WebChatService.clientConnected",(function(e){s("CobrowseIOExtension.WebChatService.clientConnected",e)})),c.subscribe("WebChatService.restored",(function(e){s("CobrowseIOExtension.WebChatService.restored",e)})),c.subscribe("WebChatService.ended",(function(e){s("CobrowseIOExtension.WebChatService.ended",e),o.default.currentSession&&!o.default.currentSession.isEnded()&&o.default.currentSession.end()})),c.subscribe("WebChat.started",(function(e){try{if(s("CobrowseIOExtension.WebChat.started",e),e&&e.data&&e.data.form){s("e.data.form",e.data.form);var t=e.data.form||{};t.device_name=e.data.form.firstname?"".concat(e.data.form.firstname,"'s device"):"WebChat User's Device",o.default.customData=t}}catch(e){s("Error during CobrowseIOExtension.WebChat.started",e)}})),c.republish("ready"),c.ready()}catch(e){console.error("Error syncing Cobrowse.io with Genesys, please contact hello@cobrowse.io for help!"),console.warn(e)}},r(1e3),r(3114);var o=i(r(1178));function i(e){return e&&e.__esModule?e:{default:e}}function a(){a=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),u=new P(n||[]);return o(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function y(){}function v(){}var m={};l(m,u,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,u)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(o,a,u,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),l(w,s,"Generator"),l(w,u,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function u(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}var c,s=(0,i(r(9796)).default)("cbio.Integrations.Genesys");function l(){var e;return e=a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s("Requesting cobrowse"),e.next=3,o.default.createSessionCode();case 3:r=e.sent,s("Generated session code: ".concat(r)),t.command("WebChatService.sendFilteredMessage",{message:"Customer requests Cobrowse session with code: ".concat(r.substr(0,3)," ").concat(r.substr(3)),regex:/Customer requests Cobrowse session with code:.*/}).done((function(e){s("CobrowseIOExtension.WebChatService sent filtered message successfully",e)})).fail((function(e){s("CobrowseIOExtension.WebChatService failed to send filtered message",e)}));case 6:case"end":return e.stop()}}),e)})),l=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,c,"next",e)}function c(e){u(i,n,o,a,c,"throw",e)}a(void 0)}))},l.apply(this,arguments)}},1289:function(e,t,r){var n;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===o(i)?i:String(i)),n)}var i}r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(3114),r(9244),r(2593),r(444),r(1076),r(1e3),r(5538);var a=(0,((n=r(9796))&&n.__esModule?n:{default:n}).default)("cbio.Integrations"),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"watchProperty",value:function(e,t,r){var n=e[t],o=function o(){a("monitoring changes to ".concat(t),e),Object.defineProperty(e,t,{configurable:!0,set:function(n){a("CobrowseIO detected",t,"as",n),Object.defineProperty(e,t,{configurable:!0,writable:!0,value:n}),setTimeout((function(){return r(o)}),0)},get:function(){return n}})};n?(a("".concat(t," already exists as ").concat(e[t])),r(o)):o()}},{key:"initialize",value:function(){var e=this;a("Initializing integrations"),this.watchProperty(window,"CXBus",(function(){return r(1974).Z()})),this.watchProperty(window,"_genesys",(function(){return e.watchProperty(window._genesys,"widgets",(function(){return e.watchProperty(window._genesys.widgets,"bus",(function(){setTimeout((function(){r(1974).Z()}),0)}))}))})),this.watchProperty(window,"Intercom",(function(){return r(4775).Z()})),this.watchProperty(window,"$zopim",(function(){return r(3478).z2()})),this.watchProperty(window,"embedded_svc",(function(){return e.watchProperty(window.embedded_svc,"liveAgentAPI",(function(){r(8738).Z()}))})),this.initializeZendesk(r(3478).dQ,r(3478).Bt),this.initializeFreshchat(r(8656).yO)}},{key:"initializeFreshchat",value:function(e){this.watchProperty(window,"fcWidget",(function(){return e()}))}},{key:"initializeZendesk",value:function(e,t){this.watchProperty(window,"zE",(function(r){if(!window.zE.widget)return r();"messenger"===window.zE.widget?e():t()}))}}],null&&i(t.prototype,null),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=u},4775:function(e,t,r){t.Z=function(){try{if(!window.Intercom||"function"!=typeof window.Intercom)throw new Error("expected window.Intercom to be a function");a("Initializing intercom integration"),u(),window.Intercom("onShow",(0,n.default)(u,12e4,{trailing:!1}))}catch(e){console.error("Error syncing Cobrowse.io with Intercom, please contact hello@cobrowse.io for help!"),console.warn(e)}};var n=i(r(1381)),o=i(r(1178));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,i(r(9796)).default)("cbio.Integrations.Intercom");function u(){a("Updating intercom integration"),window.intercomSettings||(window.intercomSettings={}),window.intercomSettings.CobrowseID=o.default.deviceId(),window.Intercom("update",{CobrowseID:o.default.deviceId()})}},8738:function(e,t,r){t.Z=function(){try{if("object"!==i(window.embedded_svc))throw new Error("expected window.embedded_svc to a be an object");if(window.embedded_svc&&!window.embedded_svc.liveAgentAPI)throw new Error("expected liveAgentAPI on embedded_svc");a("Initializing salesforce integration"),window.embedded_svc.addEventHandler("onChatRequestSuccess",(function(e){e&&e.liveAgentSessionKey&&(n.default.customData={salesforce_liveAgentSessionKey:e.liveAgentSessionKey})})),window.embedded_svc.addEventHandler("onChatEndedByAgent",(function(){n.default.currentSession&&n.default.currentSession.end()})),window.embedded_svc.addEventHandler("onChatEndedByChasitor",(function(){n.default.currentSession&&n.default.currentSession.end()}))}catch(e){console.error("Error syncing Cobrowse.io with Salesforce Chat, please contact hello@cobrowse.io for help!"),console.warn(e)}},r(444),r(1076),r(1e3),r(5547),r(1624),r(2047),r(8534);var n=o(r(1178));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var a=(0,o(r(9796)).default)("cbio.Integrations.Salesforce")},3478:function(e,t,r){t.Bt=function(){try{!function(){if(!window.zE||!window.zE.identify)throw new Error("missing window.zE or window.zE.identify");l();var e=window.zE.identify;window.zE.identify=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return u("identify",r[0]),e.apply(void 0,r)}}()}catch(e){console.error("Error syncing Cobrowse.io with Zendesk (classic), please contact hello@cobrowse.io for help!"),console.warn(e)}},t.dQ=function(){try{"true"===sessionStorage.getItem("ZD-widgetOpen")?y().then(f):window.zE("messenger:on","open",(function(){y().then(f)}))}catch(e){console.error("Error syncing Cobrowse.io with Zendesk (messenger), please contact hello@cobrowse.io for help!"),console.warn(e)}},t.z2=function(){try{if("function"!=typeof window.$zopim)throw new Error("expected window.$zopim to a be a function");window.$zopim((function(){i("Initializing zendesk integration"),window.$zopim.livechat.addTags("cobrowseio_deviceid_".concat(n.default.deviceId())),n.default.customData={cobrowseio_deviceid:n.default.deviceId()}}))}catch(e){console.error("Error syncing Cobrowse.io with Zendesk Chat, please contact hello@cobrowse.io for help!"),console.warn(e)}},r(6941),r(5128),r(6706),r(1e3),r(3524),r(3317);var n=o(r(1178));function o(e){return e&&e.__esModule?e:{default:e}}var i=(0,o(r(9796)).default)("cbio.Integrations.Zendesk"),a=2e3;function u(e,t){var r={};"identify"===e&&t?(t.name&&(r.user_name=t.name),t.email&&(r.user_email=t.email),t.organization&&(r.user_organization=t.organization)):"prefill"===e&&t?(t.name&&t.name.value&&(r.user_name=t.name.value),t.email&&t.email.value&&(r.user_email=t.email.value),t.phone&&t.phone.value&&(r.user_phone=t.phone.value)):"logout"===e&&(r={user_name:null,user_email:null,user_organization:null,user_phone:null}),s(r)}function c(e,t){var r={};"identify"===e&&t?r={zendesk_web_user_id:t.appUserId}:"logoutUser"===e&&(r={user_name:null,user_email:null,user_organization:null,user_phone:null,zendesk_web_user_id:null,zendesk_user_id:null,zendesk_ticket_id:null}),s(r)}function s(e){Object.keys(e).length&&(n.default.customData=e)}function l(){var e=window.zE;for(var t in window.zE=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r[0],i=r[1],a=r[2];return"webWidget"===o&&u(i,a),"messenger"===o&&c(i,a),e.apply(void 0,r)},e)window.zE[t]=e[t]}function f(){l();var e=d();if(!e)throw new Error("Missing client ID (ZD-buid)");var t=p(e);if(!t)throw new Error("Instance ID could not be found");c("identify",{appUserId:h(t)})}function d(){return localStorage.getItem("ZD-buid")}function p(e){var t,r;return null===(t=Object.keys(localStorage).find((function(t){return t.match(/\w+\.clientId/)&&localStorage[t]===e})))||void 0===t||null===(r=t.split("."))||void 0===r?void 0:r[0]}function h(e){return localStorage.getItem("".concat(e,".appUserId"))}function y(){return new Promise((function e(t,r){var n=h(p(d()));n?t(n):setTimeout(e,a,t,r)}))}},5978:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(3064),r(9616),r(5547),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(1624),r(1e3),r(2047),r(1157),r(8534);var o=r(1239),i=a(r(1381));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}function d(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function p(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,y(e,t,"get"))}function h(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,y(e,t,"set"),r),r}function y(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var v=(0,a(r(9796)).default)("cbio.ActivityDetection"),m=new WeakMap,b=new WeakMap,g=new WeakMap,w=new WeakMap,E=new WeakMap,S=new WeakMap,_=new WeakMap,O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,r,o,a=(r=f,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s(r);if(o){var i=s(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}(this,e)});function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),d(c(t=a.call(this)),m,{writable:!0,value:!1}),d(c(t),b,{writable:!0,value:!1}),d(c(t),g,{writable:!0,value:null}),d(c(t),w,{writable:!0,value:9e5}),l(c(t),"start",(function(){p(c(t),m)||(h(c(t),m,!0),v("started"),document.addEventListener("mouseenter",p(c(t),E),{capture:!0,passive:!0}),document.addEventListener("mouseleave",p(c(t),E),{capture:!0,passive:!0}),document.addEventListener("mousemove",p(c(t),E),{capture:!0,passive:!0}),document.addEventListener("touchstart",p(c(t),E),{capture:!0,passive:!0}),document.addEventListener("touchend",p(c(t),E),{capture:!0,passive:!0}),document.addEventListener("touchmove",p(c(t),E),{capture:!0,passive:!0}),document.addEventListener("visibilitychange",p(c(t),E),{capture:!0}),p(c(t),E).call(c(t)))})),l(c(t),"stop",(function(){h(c(t),b,!1),h(c(t),m,!1),v("stopped"),clearTimeout(p(c(t),g)),t.removeAllListeners(),document.removeEventListener("mouseenter",p(c(t),E),{capture:!0,passive:!0}),document.removeEventListener("mouseleave",p(c(t),E),{capture:!0,passive:!0}),document.removeEventListener("mousemove",p(c(t),E),{capture:!0,passive:!0}),document.removeEventListener("touchstart",p(c(t),E),{capture:!0,passive:!0}),document.removeEventListener("touchend",p(c(t),E),{capture:!0,passive:!0}),document.removeEventListener("touchmove",p(c(t),E),{capture:!0,passive:!0}),document.removeEventListener("visibilitychange",p(c(t),E),{capture:!0})})),l(c(t),"isActive",(function(){return p(c(t),b)})),d(c(t),E,{writable:!0,value:(0,i.default)((function(){p(c(t),S).call(c(t)),clearTimeout(p(c(t),g)),h(c(t),g,setTimeout(p(c(t),_),p(c(t),w))),t.emit("activity")}),500,{trailing:!1})}),d(c(t),S,{writable:!0,value:function(){p(c(t),b)||(document.hidden?v("window is hidden, not becoming active"):(h(c(t),b,!0),v("became active"),t.emit("active")))}}),d(c(t),_,{writable:!0,value:function(){p(c(t),b)&&(h(c(t),b,!1),v("became inactive"),t.emit("inactive"))}}),e&&h(c(t),w,e),t}return t=f,Object.defineProperty(t,"prototype",{writable:!1}),t}(o.EventEmitter);t.default=O},2650:function(e,t,r){r(5547),r(1624),r(2047),r(8534),r(6486),r(6257),r(6941),r(3524),r(5128),r(5226),r(3275),r(9270),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(3114),r(4011),r(1e3),r(3133),r(9244),r(2593),r(444),r(1076),r(5538);var n,o=(n=r(1381))&&n.__esModule?n:{default:n},i=r(1514);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function f(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t,r){return(t=p(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}var h=new(f((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"_mousePosition",{x:-1,y:-1}),d(this,"_mouseIsDown",!1),d(this,"_mouseIsIn",!1),d(this,"track",(function(e){e.addEventListener("mousedown",t._onMouseDown,{capture:!0,passive:!0}),e.addEventListener("mouseup",t._onMouseUp,{capture:!0,passive:!0}),e.addEventListener("mouseenter",t._onMouseEnter,{capture:!0,passive:!0}),e.addEventListener("mouseleave",t._onMouseLeave,{capture:!0,passive:!0}),e.addEventListener("mousemove",t._onMouseMove,{capture:!0,passive:!0})})),d(this,"untrack",(function(e){e.removeEventListener("mousedown",t._onMouseDown,{capture:!0,passive:!0}),e.removeEventListener("mouseup",t._onMouseUp,{capture:!0,passive:!0}),e.removeEventListener("mouseenter",t._onMouseEnter,{capture:!0,passive:!0}),e.removeEventListener("mouseleave",t._onMouseLeave,{capture:!0,passive:!0}),e.removeEventListener("mousemove",t._onMouseMove,{capture:!0,passive:!0})})),d(this,"isDown",(function(){return t._mouseIsDown})),d(this,"setDown",(function(e){t._mouseIsDown=e,t.onChange&&t.onChange(t.state())})),d(this,"isIn",(function(){return t._mouseIsIn>0})),d(this,"position",(function(){return t._mousePosition})),d(this,"setPosition",(function(e,r,n){if(n){var o=[n].concat((a=(0,i.parents)(n).filter((function(e){var t;return null===(t=e.matches)||void 0===t?void 0:t.call(e,"iframe")})),function(e){if(Array.isArray(e))return s(e)}(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).map((function(e){return e.getBoundingClientRect()})).reduce((function(e,t){return{x:e.x+t.x,y:e.y+t.y}}),{x:0,y:0});e+=Math.round(o.x),r+=Math.round(o.y)}var a;t._mousePosition={x:e,y:r},t.onChange&&t.onChange(t.state())})),d(this,"state",(function(){return c(c({},t.position()),{},{down:t.isDown(),in:t.isIn()})})),d(this,"_onMouseDown",(function(e){e.isTrusted&&t.setDown(!0)})),d(this,"_onMouseUp",(function(e){e.isTrusted&&t.setDown(!1)})),d(this,"_onMouseEnter",(function(e){e.isTrusted&&(t._mouseIsIn+=1)})),d(this,"_onMouseLeave",(function(e){e.isTrusted&&e.target===e.currentTarget&&(t._mouseIsIn-=1)})),d(this,"_onMouseMove",(0,o.default)((function(e){if(e.isTrusted){var r=e.clientX,n=e.clientY,o=e.view&&e.view.frameElement;t.setPosition(r,n,o)}}),100))})));t.default=h},1094:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(3064),r(9616),r(5547),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(3114),r(1624),r(1e3),r(2047),r(1157),r(8534);var o=r(1239),i=r(5828),a=u(r(5901));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,t,r){return(t=p(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}function h(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function y(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,m(e,t,"set"),r),r}function v(e,t){return b(e,m(e,t,"get"))}function m(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function b(e,t){return t.get?t.get.call(e):t.value}var g=(0,u(r(9796)).default)("cbio.WindowTracking"),w="_cobrowse_window_id",E=new WeakMap,S=new WeakMap,_=new WeakMap,O=new WeakMap,j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(p,e);var t,r,o,i,u=(o=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(o);if(i){var r=f(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}(this,e)});function p(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return h(l(e=u.call.apply(u,[this].concat(i))),E,{writable:!0,value:(t=p,r=p,n=x,function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(t,r),function(e,t){if(void 0===e)throw new TypeError("attempted to get private static field before its declaration")}(n),b(t,n)).call(p)}),h(l(e),S,{writable:!0,value:!1}),h(l(e),_,{writable:!0,value:!1}),d(l(e),"start",(function(){v(l(e),_)||(y(l(e),_,!0),g("started"),v(l(e),O).call(l(e)),document.addEventListener("visibilitychange",v(l(e),O),{capture:!0}),document.addEventListener("mouseover",v(l(e),O),{capture:!0}))})),d(l(e),"stop",(function(){g("stopped"),e.removeAllListeners(),y(l(e),_,!1),document.removeEventListener("visibilitychange",v(l(e),O),{capture:!0}),document.removeEventListener("mouseover",v(l(e),O),{capture:!0})})),d(l(e),"isActive",(function(){return(0,a.default)().getItem(w)===e.id})),d(l(e),"setTracksIframes",(function(t){y(l(e),S,t),v(l(e),O).call(l(e))})),d(l(e),"shouldTrack",(function(){return!document.hidden&&(!(window.self!==window.top)||v(l(e),S))})),d(l(e),"makeActive",(function(){e.isActive()||(g("making active",window),(0,a.default)().setItem(w,e.id),e.emit("activate",window))})),d(l(e),"resignActive",(function(){e.isActive()&&(g("resigning active",window),(0,a.default)().setItem(w,null))})),h(l(e),O,{writable:!0,value:function(){e.shouldTrack()&&e.makeActive(),e.emit("updated")}}),e}return t=p,(r=[{key:"id",get:function(){return v(this,E)}}])&&c(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(o.EventEmitter),x={writable:!0,value:function(){return document.__cobrowse_window_id=document.__cobrowse_window_id||(0,i.v4)()}},P=new j;t.default=P},5064:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ActivityDetection",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"MouseTracking",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"WindowTracking",{enumerable:!0,get:function(){return i.default}});var n=a(r(5978)),o=a(r(2650)),i=a(r(1094));function a(e){return e&&e.__esModule?e:{default:e}}},7725:function(e,t,r){r(9244),r(2593),r(444),r(1076),r(5538),r(3064),r(1112),r(5226),r(9616),r(5547),r(8496),r(4802),r(2112),r(6353),r(3275),r(6941),r(6257),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RegistrationPath=t.DeviceIdPath=void 0,r(1e3),r(7285),r(1624),r(2047),r(8534),r(6955),r(8927),r(6706),r(5128),r(3114),r(3524),r(1157);var n=r(5828),o=r(8302),i=s(r(2260)),a=s(r(5901)),u=s(r(3440)),c=s(r(9421));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(){f=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,o){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),u=new P(o||[]);return n(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var p={};function h(){}function y(){}function v(){}var m={};c(m,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,i)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function o(n,i,a,u){var c=d(e[n],e,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==l(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:y,configurable:!0}),y.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),c(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),c(w,u,"Generator"),c(w,i,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function d(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){d(i,n,o,a,u,"next",e)}function u(e){d(i,n,o,a,u,"throw",e)}a(void 0)}))}}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},m.apply(this,arguments)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===l(t)?t:String(t)}function E(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function S(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,O(e,t,"get"))}function _(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,O(e,t,"set"),r),r}function O(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var j=(0,s(r(9796)).default)("cbio.Device"),x="_cobrowse_device_id";t.DeviceIdPath=x;var P="_cobrowse_device_registration";t.RegistrationPath=P;var k=new WeakMap,T=new WeakMap,L=new WeakMap,I=new WeakMap,C=new WeakMap,M=new WeakMap,N=new WeakMap,A=new WeakMap,R=new WeakMap,D=new WeakMap,F=new WeakMap,W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(O,e);var t,r,o,s,d,w=(s=O,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(s);if(d){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(this,e)});function O(e){var t,r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,O),E(v(r=w.call(this)),k,{writable:!0,value:void 0}),E(v(r),T,{writable:!0,value:void 0}),E(v(r),L,{writable:!0,value:void 0}),E(v(r),I,{writable:!0,value:!1}),E(v(r),C,{writable:!0,value:void 0}),g(v(r),"url",(function(){return new URL("api/1/devices/".concat(r.id()),O.api).toString()})),g(v(r),"reset",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];j("resetting device"),clearTimeout(S(v(r),L)),_(v(r),L,null),e||(0,a.default)().removeItem(P),S(v(r),k)&&(S(v(r),k).close(),_(v(r),k,null))})),g(v(r),"destroy",p(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j("destroying device"),r.reset(),e.abrupt("return",m((t=v(r),b(O.prototype)),"destroy",t).call(t));case 3:case"end":return e.stop()}}),e)})))),g(v(r),"hasPendingUpdates",(function(){var e=r.field("custom_data")||{},t=S(v(r),C).customData||{};return!!Object.keys(t).find((function(r){return e[r]!==t[r]}))})),E(v(r),M,{writable:!0,value:function(){if(!S(v(r),C).license)throw new Error("License required to generate storage key");return"".concat(S(v(r),C).license,":").concat(O.api)}}),g(v(r),"_saveRegistration",(function(){var e=r.field("next_registration")||3600,t=(new Date).getTime();"number"!=typeof Date.now()&&console.error("Unexpected type returned for Date.now(), expecting number got ".concat(l(Date.now()))),"number"!=typeof t&&console.error("Unexpected type for getTime() of Date, expecting number got ".concat(l(t)));var n={notification_url:r.field("notification_url"),notification_token:r.field("notification_token"),custom_data:r.field("custom_data"),next_registration_time:t+1e3*e};return r.cache({next_registration_time:n.next_registration_time}),(0,a.default)(S(v(r),M).call(v(r))).setItem(P,n),v(r)})),g(v(r),"_loadRegistration",(function(){if(!S(v(r),I)){_(v(r),I,!0);var e=(0,a.default)(S(v(r),M).call(v(r))).getItem(P);e&&(j("restoring registration",e),r.cache(e))}})),g(v(r),"updateRegistration",function(){var e=p(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S(v(r),T).limit()){e.next=2;break}throw new Error("Cobrowse update rate limit exceeded. Maybe you're updating custom data too often?");case 2:return j("updating registration"),e.next=5,r.update({device:O.info,custom_data:S(v(r),C).customData},t);case 5:return S(v(r),F).call(v(r)),r._saveRegistration(),r.emit("register"),e.abrupt("return",v(r));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g(v(r),"runRegistrationLoop",p(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j("starting registrations"),r._loadRegistration(),r.reset(!0),!(r.hasPendingUpdates()||r.nextRegistration()<=0)){e.next=6;break}return e.next=6,r.updateRegistration().catch((function(){}));case 6:S(v(r),F).call(v(r)),S(v(r),N).call(v(r));case 8:case"end":return e.stop()}}),e)})))),g(v(r),"pauseRegistrationLoop",p(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j("pausing registrations"),r.reset(!0);case 2:case"end":return e.stop()}}),e)})))),g(v(r),"nextRegistration",(function(){return(r.field("next_registration_time")||0)-(new Date).getTime()})),g(v(r),"bannerMessage",(function(){return r.field("banner_message")||!1})),g(v(r),"_nextUpdate",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Math.max(Math.min(6e4*e,36e5),r.nextRegistration())})),E(v(r),N,{writable:!0,value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(S(v(r),L))console.error("CobrowseIO: tried to schedule registration while already scheduled");else{var t=r._nextUpdate(e);_(v(r),L,setTimeout(p(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(S(v(r),L)){t.next=2;break}return t.abrupt("return",console.error("Registration loop cancelled"));case 2:return t.prev=2,t.next=5,r.updateRegistration();case 5:return _(v(r),L,!1),t.abrupt("return",S(v(r),N).call(v(r)));case 9:return t.prev=9,t.t0=t.catch(2),console.warn("CobrowseIO: registration failed",t.t0),_(v(r),L,!1),t.abrupt("return",S(v(r),N).call(v(r),e+1));case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))),Math.max(1e3,t)))}}}),E(v(r),A,{writable:!0,value:function(){var e=r.field("notification_url"),t=r.field("notification_token");return(0,u.default)(e,t)}}),E(v(r),R,{writable:!0,value:function(){S(v(r),k)||(_(v(r),k,new i.default({getUrl:S(v(r),A)})),S(v(r),k).setMaxReconnectDelay(6e4),S(v(r),k).on("error",(function(e){e&&console.warn("CobrowseIO notification socket error:",e)})),S(v(r),k).on("event",(function(e,t){"notification"===e?r.emit("notification",t):"probe"===e&&S(v(r),k).send("alive",t)})),S(v(r),k).on("open",(function(){S(v(r),k).send("filter",{events:["probe","notification"]})})))}}),E(v(r),D,{writable:!0,value:function(){S(v(r),k)&&(console.log("CobrowseIO: Closing socket"),S(v(r),k).close(),_(v(r),k,null))}}),E(v(r),F,{writable:!0,value:function(){var e=r.field("notification_url"),t=r.field("notification_token");e&&t?S(v(r),R).call(v(r)):S(v(r),D).call(v(r))}}),j("constructed"),!e)throw new Error("Device delegate is required");return _(v(r),C,e),_(v(r),T,new c.default(10,12e4)),r}return t=O,o=[{key:"deviceCredentials",value:function(){var e=(0,a.default)().getItem(x)||{};return"string"==typeof e&&(e={id:e}),"object"!==l(e)&&(e={}),e.id||(e.id=(0,n.v4)()),e.token||(e.token=(0,n.v4)()),(0,a.default)().setItem(x,e),e}},{key:"deviceId",value:function(){return this.deviceCredentials().id}},{key:"deviceToken",value:function(){return this.deviceCredentials().token}},{key:"info",get:function(){var e=["pointer","scroll","select","keypress","drawing","laser","cursor"];return/Android|webOS|iPhone|iPad|iPod|Opera Mini/i.test(window.navigator.userAgent)||e.push("full_device"),{platform:"web",device:window.navigator.userAgent,device_locale:window.navigator.language,device_timezone:window.Intl.DateTimeFormat().resolvedOptions().timeZone,os_version:window.navigator.platform,app_id:window.location.origin,app_name:window.document.title,app_build_configuration:"release",sdk_version:"2.26.0",capabilities:e}}}],(r=[{key:"id",value:function(){return O.deviceId()}},{key:"customData",get:function(){return this.field("custom_data")||{}}}])&&h(t.prototype,r),o&&h(t,o),Object.defineProperty(t,"prototype",{writable:!1}),O}(o.RESTResource);t.default=W},5161:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Device",{enumerable:!0,get:function(){return o.default}});var n,o=(n=r(7725))&&n.__esModule?n:{default:n}},8128:function(e,t,r){r(5128),r(4011),r(5226),r(9270),r(6257),r(6486),r(3524),r(5547),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(1e3),r(3275),r(3600),r(6770),r(6941),r(1624),r(8719),r(2047),r(8534),r(9244),r(2593),r(444),r(1076),r(5538);var n,o=r(1514),i=r(5064),a=(n=r(8755))&&n.__esModule?n:{default:n};function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function d(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}var y=d((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"_init",(function(){r._propertyWatcher||(r._propertyWatcher=new o.PropertyObserver(r._onPropertySet),a.default.on("stylechange",r._onStyleSheetChange),a.default.on("navigate",r._onNavigation))})),p(this,"observe",(function(e){if(!r._observing.has(e)){r._init(),e.addEventListener("scroll",r._onEvent,{capture:!0,passive:!0}),e.addEventListener("focus",r._onFocusChange,{capture:!0,passive:!0}),e.addEventListener("blur",r._onFocusChange,{capture:!0,passive:!0}),e.addEventListener("change",r._onInputEvent,{capture:!0,passive:!0}),e.addEventListener("keydown",r._onInputEvent,{capture:!0,passive:!0}),e.addEventListener("keyup",r._onInputEvent,{capture:!0,passive:!0}),e.addEventListener("keypress",r._onInputEvent,{capture:!0,passive:!0}),e.addEventListener("selectionchange",r._onSelectionEvent,{capture:!0,passive:!0}),e.addEventListener("select",r._onSelectionEvent,{capture:!0,passive:!0}),i.MouseTracking.track(e),r._observing.add(e);var t=(e.ownerDocument||e).defaultView;t&&!r._windows.has(t)&&(r._windows.add(t),a.default.tap(t),r._propertyWatcher.observe(t.HTMLInputElement,"value"),r._propertyWatcher.observe(t.HTMLInputElement,"checked"),r._propertyWatcher.observe(t.HTMLTextAreaElement,"value"),r._propertyWatcher.observe(t.ShadowRoot,"adoptedStyleSheets"),r._propertyWatcher.observe(t.Document,"adoptedStyleSheets"),t.addEventListener&&(t.addEventListener("hashchange",r._onEvent,{capture:!0,passive:!0}),t.addEventListener("resize",r._onEvent,{capture:!0,passive:!0})))}})),p(this,"disconnect",(function(){r._observing.forEach((function(e){e.removeEventListener("scroll",r._onEvent,{capture:!0,passive:!0}),e.removeEventListener("focus",r._onFocusChange,{capture:!0,passive:!0}),e.removeEventListener("blur",r._onFocusChange,{capture:!0,passive:!0}),e.removeEventListener("change",r._onInputEvent,{capture:!0,passive:!0}),e.removeEventListener("keydown",r._onInputEvent,{capture:!0,passive:!0}),e.removeEventListener("keyup",r._onInputEvent,{capture:!0,passive:!0}),e.removeEventListener("keypress",r._onInputEvent,{capture:!0,passive:!0}),e.removeEventListener("selectionchange",r._onSelectionEvent,{capture:!0,passive:!0}),e.removeEventListener("select",r._onSelectionEvent,{capture:!0,passive:!0}),i.MouseTracking.untrack(e)})),r._observing.clear(),r._windows.forEach((function(e){a.default.untap(e),e&&!(0,o.isxdoc)(e)&&e.removeEventListener&&(e.removeEventListener("hashchange",r._onEvent,{capture:!0,passive:!0}),e.removeEventListener("resize",r._onEvent,{capture:!0,passive:!0}))})),r._windows.clear(),r._propertyWatcher&&(r._propertyWatcher.disconnect(),r._propertyWatcher=null,a.default.off("stylechange",r._onStyleSheetChange),a.default.off("navigate",r._onNavigation))})),p(this,"_target",(function(e){return e.target&&e.target.document||e.target})),p(this,"_onEvent",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r._onModification(r._target(e),l(l({},t),{},{type:e.type}))})),p(this,"_onSelectionEvent",(function(e){var t,n,o=null!==(t=e.target.ownerDocument)&&void 0!==t?t:e.target;o.__last_agent_selection_ts>Date.now()-100||("selectionchange"===e.type&&(["INPUT","TEXTAREA"].includes(null===(n=o.activeElement)||void 0===n?void 0:n.tagName)?(o.activeElement.__cobrowse_user_selection_timestamp=Date.now(),r._onModification(o.activeElement,{type:e.type})):(e.target.__cobrowse_user_selection_timestamp=Date.now(),r._onModification(e.target,{type:e.type}))),"select"===e.type&&(e.target.__cobrowse_user_selection_timestamp=Date.now(),r._onModification(e.target,{type:e.type})))})),p(this,"_onStyleSheetChange",(function(e){e.ownerNode&&r._onModification(e.ownerNode,{type:"stylesheet"});var t,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(r._observing);try{for(n.s();!(t=n.n()).done;){var o,i=t.value;null!==(o=i.adoptedStyleSheets)&&void 0!==o&&o.includes(e)&&r._onModification(i,{type:"adoptedstylesheet"})}}catch(e){n.e(e)}finally{n.f()}})),p(this,"_onNavigation",(function(e){r._onModification(e.document,{type:"navigation"})})),p(this,"_onFocusChange",(function(e){r._onModification(e.target,{type:e.type}),e.target.ownerDocument&&r._onModification(e.target.ownerDocument,{type:e.type})})),p(this,"_onInputEvent",(function(e){"SELECT"===e.target.tagName||"TEXTAREA"===e.target.tagName?r._onModification(r._target(e),{recursive:!0,type:e.type}):"INPUT"===e.target.tagName&&("radio"===e.target.type?(e.target.closest("form")||e.target.ownerDocument).querySelectorAll("input[type=radio][name=".concat(e.target.name,"]")).forEach((function(t){return r._onModification(t,{type:e.type})})):r._onModification(r._target(e),{recursive:!0,type:e.type}))})),p(this,"_onPropertySet",(function(e){r._onModification(e,{type:"property"})})),this._onModification=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return setTimeout((function(){return t.apply(void 0,r)}),0)},this._observing=new Set,this._windows=new Set}));t.default=y},638:function(e,t,r){r(5226),r(9270),r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(4011),r(1e3),r(3133),r(5128),r(1087),r(3275),r(9244),r(2593),r(444),r(1076),r(5538);var n,o=(n=r(2404))&&n.__esModule?n:{default:n},i=r(1514);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function l(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}var p=l((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"_difference",(function(e,t){return t?Object.keys(e).map((function(r){return!(0,o.default)(e[r],t[r])&&f({},r,e[r])})).filter((function(e){return e})).reduce((function(e,t){return c(c({},e),t)}),{}):c({},e)})),f(this,"compress",(function(){return Object.values(r.modified).map((function(e){var t=r.state.node(e.id),n=r._difference(e,t),o=c({id:e.id},n);return 1!==Object.keys(o).length&&o})).filter((function(e){return e}))})),f(this,"mark",(function(){return r.state.applyPatch(Object.values(r.modified)),r.modified={},r})),f(this,"_flatten",(function(e){return e.childNodes?c(c({},e),{},{childNodes:e.childNodes.map((function(e){return{id:e.id}}))}):e})),f(this,"push",(function(e){return e&&e.modified?(e.modified.filter((function(e){return e})).forEach((function(e){(0,i.depthFirst)(e,(function(e){r.modified[e.id]=c(c({},r.modified[e.id]),r._flatten(e))}))})),r):(console.error("invalid patch",e),r)})),f(this,"reset",(function(e){return r.state=new i.VirtualDOM(r._id),r.modified={},e&&r.push({_t:"reset",modified:[e]}),r})),this._id=t,this.reset()}));t.default=p},3375:function(e,t,r){r(3064),r(9616),r(5128),r(5226),r(9270),r(6941),r(6486),r(3524),r(5547),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(1624),r(1e3),r(8719),r(2047),r(8534),r(3275),r(6257),r(3114),r(4011),r(3133),r(9244),r(2593),r(444),r(1076),r(5538);var n=r(1239),o=r(1514),i=r(8541),a=r(7743),u=l(r(8128)),c=r(4039),s=l(r(9356));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=h(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function h(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function E(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===f(t)?t:String(t)}var _=(0,l(r(9796)).default)("cbio.PatchStream"),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(h,e);var t,r,n,l=(r=h,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(n){var o=w(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(this,e)});function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),E(g(t=l.call(this)),"start",(function(){_("starting patch stream for",t._root),t._documents=new Set,t._iframeBridge.on("iframe_patched",t._onXDocIframeUpdate),t._canvasUpdateInterval=setInterval(t._updateCanvasContent,2e3),t._observe(t._root)})),E(g(t),"forceUpdate",(function(){_("forcing entire state update from",t._root),t.emit("patch",{_t:"pre-force",flush:!0,modified:[m(m({},a.NodeSerializer.serialize(t._root)),{},{scroll:void 0,childNodes:[m(m({},a.NodeSerializer.serialize(t._root.documentElement)),{},{childNodes:[a.NodeTree.depthFirst(t._root.head,a.NodeSerializer.serialize)]})]})]}),t.emit("patch",{_t:"forced",modified:[a.NodeTree.depthFirst(t._root,a.NodeSerializer.serialize)]})})),E(g(t),"stop",(function(){_("stopping patch stream for",t._root),t._eventObserver.disconnect(),t._mutationObserver.disconnect(),t._iframeBridge.removeListener("iframe_patched",t._onXDocIframeUpdate),clearInterval(t._canvasUpdateInterval),t._documents&&t._documents.clear(),t._documents=null})),E(g(t),"destroy",(function(){_("destroying patch stream for",t._root),t.stop(),t.removeAllListeners(),a.NodeTree.depthFirst(t._root,t._untrack),t._mutationObserver=null,t._eventObserver=null,t._iframeBridge=null,t._root=null})),E(g(t),"_updateCanvasContent",(function(){t._documents.forEach((function(e){(0,o.isxdoc)(e)||e.nodeType!==window.Node.DOCUMENT_FRAGMENT_NODE&&[].slice.call(e.getElementsByTagName("canvas")).forEach((function(e){t.emit("patch",{_t:"canvas",modified:[a.NodeSerializer.serialize(e)]})}))}))})),E(g(t),"_track",(function(e){a.NodeUtils.isDOMNode(e)&&(a.NodeTracker.track(e),e.nodeType===window.Node.DOCUMENT_NODE&&t._observe(e),e.nodeType===window.Node.DOCUMENT_FRAGMENT_NODE&&t._observe(e),"IFRAME"===e.tagName&&((0,o.isxdoc)(e)&&t._iframeBridge.sync(e),e.removeEventListener("load",t._onIframeLoad),e.addEventListener("load",t._onIframeLoad)))})),E(g(t),"_untrack",(function(e){a.NodeTracker.forget(e),a.NodeUtils.isDOMNode(e)&&"IFRAME"===e.tagName&&(e.removeEventListener("load",t._onIframeLoad),t._iframeBridge.remove(e))})),E(g(t),"_observe",(function(e){if(e.nodeType!==window.Node.DOCUMENT_NODE&&e.nodeType!==window.Node.DOCUMENT_FRAGMENT_NODE)throw new Error("CobrowseIO: observed a non-document or fragment node (type=".concat(e.nodeType,")"));if(!t._documents.has(e)){_("starting observation of",e),t._documents.add(e),_("doing initial node tracking on observe for",e),a.NodeTree.depthFirst(e,t._track),t._eventObserver.observe(e);try{t._mutationObserver.observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}catch(t){console.error("CobrowseIO failed to start mutation observer for",e)}}})),E(g(t),"_onXDocIframeUpdate",(function(e){var r;_("xdoc iframe updated",e),null!==(r=i.RedactionIndexProvider.instance)&&void 0!==r&&r.isRedacted(e)||a.NodeTree.isIgnored(e)||t.emit("patch",{_t:"xdociframeupdate",modified:[a.NodeTree.depthFirst(e,a.NodeSerializer.serialize)]})})),E(g(t),"_onIframeLoad",(function(e){var r,n=e.target;_("iframe loaded",n),null!==(r=i.RedactionIndexProvider.instance)&&void 0!==r&&r.isRedacted(n)||((0,o.isxdoc)(n)?t._iframeBridge.sync(n):t._observe(n.contentWindow.document),a.NodeTree.isIgnored(n)||t.emit("patch",{_t:"iframeupdate",modified:[a.NodeTree.depthFirst(n,a.NodeSerializer.serialize)]}))})),E(g(t),"_onEventMutation",(function(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t._mutationObserver&&t._onDOMChange(t._mutationObserver.takeRecords()),"TEXTAREA"===e.tagName&&a.NodeTree.depthFirst(e,t._track),a.NodeTracker.get(e)&&!(null!==(r=i.RedactionIndexProvider.instance)&&void 0!==r&&r.isRedacted(e)||a.NodeTree.isIgnored(e))){var o=n.recursive?a.NodeTree.depthFirst(e,a.NodeSerializer.serialize):a.NodeSerializer.serialize(e);t.emit("patch",{_t:"eventmutation:".concat(n.type),modified:[o]})}})),E(g(t),"_discoverNodes",(function(e,t,r){var n,o=new Set(e.addedNodes?[].slice.call(e.addedNodes):[]),u=(null===(n=i.RedactionIndexProvider.instance)||void 0===n?void 0:n.notifyChanges([e]))||{added:new Set,modified:new Set},c=u.added,s=u.modified;s.add(e.target);var l,f=p(s);try{for(f.s();!(l=f.n()).done;){var h=l.value;t.has(h)||r.add(h)}}catch(e){f.e(e)}finally{f.f()}var y,v=p(new Set([].concat(d(o),d(c))));try{for(v.s();!(y=v.n()).done;){var m=y.value;a.NodeTree.depthFirst(m,(function(e){r.add(e),t.delete(e)}))}}catch(e){v.e(e)}finally{v.f()}e.removedNodes&&[].slice.call(e.removedNodes).forEach((function(e){a.NodeTree.depthFirst(e,(function(e){r.delete(e),t.add(e)}))}))})),E(g(t),"_getModifications",(function(e){var r=new Set,n=new Set;return e.forEach((function(e){("characterData"===e.type||n.has(e.target)||a.NodeTracker.get(e.target))&&t._discoverNodes(e,r,n)})),r.forEach((function(e){return t._untrack(e)})),n.forEach((function(e){return t._track(e)})),n})),E(g(t),"_onDOMChange",(function(e){var r=t._getModifications(e);_("DOM changed",r);var n=d(r).map((function(e){return a.NodeSerializer.serialize(e)})).filter((function(e){return e}));_("DOM changes serialized",n),t.emit("patch",{_t:"domchange",modified:n})})),t._root=e,t._mutationObserver=new c.MutationObserver(t._onDOMChange),t._eventObserver=new u.default(t._onEventMutation),t._iframeBridge=s.default,t}return t=h,Object.defineProperty(t,"prototype",{writable:!1}),t}(n.EventEmitter);t.default=O},5493:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PatchCompressor",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"PatchStream",{enumerable:!0,get:function(){return n.default}});var n=i(r(3375)),o=i(r(638));function i(e){return e&&e.__esModule?e:{default:e}}},6604:function(e,t,r){r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9244),r(2593),r(444),r(1076),r(1e3),r(5538);var n=u(r(1381)),o=r(5493),i=r(7743),a=r(5064);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function l(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===c(t)?t:String(t)}var p=(0,u(r(9796)).default)("cbio.DOMFrameSource"),h=l((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"_throttleCompressAndEmitFrame",(0,n.default)((function(){return r._compressAndEmitFrame()}),110)),f(this,"_compressAndEmitFrame",(function(){if(r._compression&&document&&i.NodeTracker.get(document)){var e=r._compression.compress();e.length&&r._onUpdate({document_id:i.NodeTracker.get(document),patch:e})&&r._compression.mark()}})),f(this,"capturingWillStart",(function(){if(p("capturingWillStart for DOMFrameSource in",document),r._sendInterval)throw new Error("DOMFrameSource already running");r._compression||(r._compression=new o.PatchCompressor(i.NodeTracker.track(document))),r._patchStream||(r._patchStream=new o.PatchStream(document)),a.WindowTracking.on("activate",r.reset),r._patchStream.on("patch",(function(e){r._compression.push(e),e.flush?r._compressAndEmitFrame():r._throttleCompressAndEmitFrame()})),r._sendInterval=setInterval((function(){return r._compressAndEmitFrame()}),500),r._patchStream.start()})),f(this,"capturingWillStop",(function(){p("capturingWillStop for DOMFrameSource in",document),a.WindowTracking.removeListener("activate",r.reset),r._sendInterval&&(clearInterval(r._sendInterval),r._sendInterval=null),r._patchStream&&(r._patchStream.destroy(),r._patchStream=null),r._compression&&(r._compression.reset(),r._compression=null)})),f(this,"reset",(function(){p("resetting DOMFrameSource in",document),r._compression.reset(),r._patchStream.forceUpdate()})),f(this,"destroy",(function(){p("destroying DOMFrameSource in",document),r.capturingWillStop(),r._onUpdate=null})),p("DOMFrameSource constructed in",document),this._onUpdate=t}));t.default=h},4773:function(e,t,r){var n;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(){i=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,o){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),u=new P(o||[]);return n(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function y(){}function v(){}var m={};l(m,u,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,u)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(n,a,u,c){var s=d(e[n],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==o(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),l(w,s,"Generator"),l(w,u,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function a(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function u(e){a(i,n,o,u,c,"next",e)}function c(e){a(i,n,o,u,c,"throw",e)}u(void 0)}))}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function s(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===o(t)?t:String(t)}r(5547),r(1624),r(2047),r(8534),r(8496),r(4802),r(2112),r(6353),r(3064),r(3275),r(6941),r(6257),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9244),r(2593),r(444),r(1076),r(1e3),r(5538);var d=(0,((n=r(9796))&&n.__esModule?n:{default:n}).default)("cbio.FrameLoop"),p=s((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"isRunning",(function(){return t._running})),l(this,"setSource",function(){var e=u(i().mark((function e(r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.constructor!==(t.source&&t.source.constructor)){e.next=3;break}return d("frame source type not changed"),e.abrupt("return");case 3:if(!t.isRunning()){e.next=17;break}return t.source&&t.source.capturingWillStop(),t.source=r,e.prev=6,e.next=9,t.source.capturingWillStart();case 9:t.invalidateFrame(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),console.error(e.t0);case 15:e.next=18;break;case 17:t.source=r;case 18:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()),l(this,"getSource",(function(){return t.source})),l(this,"start",u(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d("starting frame loop in",document),t.isRunning()||(t._running=!0,t.source.capturingWillStart());case 2:case"end":return e.stop()}}),e)})))),l(this,"stop",(function(){t.isRunning()&&(t.source.capturingWillStop(),t._running=!1)})),l(this,"invalidateFrame",(function(){if(!t.isRunning())throw new Error("FrameLoop was destroyed");d("invalidate frame in",document),t.source&&t.source.reset()})),l(this,"destroy",(function(){d("destroying frame loop in",document),t.stop(),t.source&&(t.source.destroy(),t.source=null)})),d("FrameLoop constructed in",document),this._running=!1}));t.default=p},5904:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(5547),r(8496),r(4802),r(2112),r(6353),r(3064),r(6941),r(6257),r(6486),r(3524),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(1624),r(1e3),r(2827),r(7639),r(6996),r(1366),r(3558),r(8852),r(8630),r(8858),r(6480),r(7219),r(2160),r(4289),r(8165),r(4613),r(3292),r(3748),r(9157),r(5529),r(4882),r(7233),r(1086),r(8786),r(5544),r(1304),r(3275),r(2047),r(1157),r(8534);var o,i=r(1639);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(){u=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),u=new P(n||[]);return o(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function y(){}function v(){}var m={};l(m,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,a)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(o,a,u,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),l(w,s,"Generator"),l(w,a,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function c(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){c(i,n,o,a,u,"next",e)}function u(e){c(i,n,o,a,u,"throw",e)}a(void 0)}))}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function f(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t,r){return(t=p(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}function h(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function y(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,m(e,t,"get"))}function v(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,m(e,t,"set"),r),r}function m(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var b=(0,((o=r(9796))&&o.__esModule?o:{default:o}).default)("cbio.MediaStreamFrameSource"),g=new WeakMap,w=new WeakMap,E=new WeakMap,S=new WeakMap,_=new WeakMap,O=new WeakMap,j=new WeakMap,x=new WeakMap,P=new WeakMap,k=new WeakMap,T=f((function e(t){var r,n,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,g,{writable:!0,value:void 0}),h(this,w,{writable:!0,value:void 0}),h(this,E,{writable:!0,value:void 0}),h(this,S,{writable:!0,value:void 0}),h(this,_,{writable:!0,value:void 0}),h(this,O,{writable:!0,value:void 0}),h(this,j,{writable:!0,value:[]}),h(this,x,{writable:!0,value:function(){var e=y(o,S).scale();y(o,E).width=y(o,w).videoWidth*e,y(o,E).height=y(o,w).videoHeight*e,y(o,E).getContext("2d").drawImage(y(o,w),0,0,y(o,E).width,y(o,E).height);var t="image/jpeg";y(o,E).toBlob(function(){var e=s(u().mark((function e(r){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,new Response(r).arrayBuffer();case 3:e.t1=e.sent,n=new e.t0(e.t1),y(o,S).handleFrame(n,t,1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t,.5)}}),h(this,P,{writable:!0,value:(r=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(o,w).srcObject=t,e.next=3,y(o,w).play();case 3:v(o,_,setInterval(y(o,x),100));case 4:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})}),h(this,k,{writable:!0,value:(n=s(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.MediaRecorderDemuxer.isSupported("video/webm;codecs=h264")){e.next=3;break}return b("MediaRecorderDemuxer not supported, falling back to canvas"),e.abrupt("return",y(o,P).call(o,t));case 3:if(v(o,O,(0,i.createMediaRecorderDemuxer)(t)),y(o,O)){e.next=7;break}return b("failed to create MediaRecorderDemuxer, falling back to canvas"),e.abrupt("return",y(o,P).call(o,t));case 7:return b("using MediaRecorderDemuxer"),y(o,O).on("media-packet",(function(e){var t,r=e.data;null!==y(o,O)&&(0===r[0]&&0===r[1]&&0===r[2]&&1===r[3]?t=r[4]:0===r[0]&&0===r[1]&&1===r[2]&&(t=r[3]),7==(31&t)&&v(o,j,[]),y(o,j).push(r),y(o,S).handleFrame(r,"video/avc",1/0))})),e.abrupt("return",y(o,O).start());case 10:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})}),d(this,"capturingWillStart",s(u().mark((function e(){var t,r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b("capturingWillStart for MediaStreamFrameSource"),!y(o,_)){e.next=3;break}throw new Error("already running");case 3:return e.next=5,y(o,S).requestPermission();case 5:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.next=10,navigator.mediaDevices.getDisplayMedia({video:{cursor:"always",width:{ideal:1400},height:{ideal:1e3},frameRate:{max:10}},audio:!1});case 10:if(t=e.sent,r=t.getVideoTracks(),s=1,n=function(e){if(Array.isArray(e))return e}(c=r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(c,s)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(c,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),(i=o,u=g,function(e,t){if(t.set)return"__destrObj"in t||(t.__destrObj={set value(r){t.set.call(e,r)}}),t.__destrObj;if(!t.writable)throw new TypeError("attempted to set read only private field");return t}(i,m(i,u,"set"))).value=n[0],y(o,g)){e.next=16;break}throw new Error("failed to get display media track");case 16:y(o,g).onended=function(){b("track ended"),v(o,g,null),y(o,S).captureEnded(),o.destroy()},y(o,k).call(o,t),y(o,S).captureStarted(t),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(7),y(o,S).captureEnded(e.t0);case 24:case"end":return e.stop()}var i,u,c,s}),e,null,[[7,21]])})))),d(this,"capturingWillStop",(function(){b("capturingWillStop for MediaStreamFrameSource"),y(o,O)&&(y(o,O).stop(),v(o,O,null)),y(o,g)&&(y(o,g).stop(),v(o,g,null),y(o,S).captureEnded()),y(o,_)&&(clearInterval(y(o,_)),v(o,_,null))})),d(this,"reset",(function(){b("resetting MediaStreamFrameSource"),y(o,j).forEach((function(e){y(o,S).handleFrame(e,"video/avc",1/0)}))})),d(this,"destroy",(function(){b("destroying MediaStreamFrameSource"),o.capturingWillStop(),v(o,S,null),v(o,w,null),v(o,E,null)})),b("MediaStreamFrameSource constructed"),v(this,S,t),v(this,w,document.createElement("video")),v(this,E,document.createElement("canvas"))}));t.default=T},7297:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DOMFrameSource",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"FrameLoop",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"MediaStreamFrameSource",{enumerable:!0,get:function(){return i.default}});var n=a(r(4773)),o=a(r(6604)),i=a(r(5904));function a(e){return e&&e.__esModule?e:{default:e}}},2833:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(3064),r(9616),r(5547),r(6486),r(6257),r(6941),r(3524),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(1624),r(1e3),r(8719),r(2047),r(8534),r(6706),r(3600),r(6770),r(3275),r(1157);var o,i=r(1239);function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function f(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function d(e,t,r){return(t=p(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}function h(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var y=(0,((o=r(9796))&&o.__esModule?o:{default:o}).default)("cbio.IFrameBridge"),v=new WeakMap,m=new WeakMap,b=new WeakMap,g=new WeakMap,w=new WeakMap,E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(u,e);var t,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(r);if(o){var i=l(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,e)});function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),d(s(e=i.call(this)),"trustedOrigins",[]),f(s(e),v,{writable:!0,value:new Set}),f(s(e),m,{writable:!0,value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.parent;return t===r||r.parent!==r&&h(s(e),m).call(s(e),t,r.parent)}}),f(s(e),b,{writable:!0,value:function(e){if(!e.data)return!1;var t=e.data,r=t.cobrowseio,n=t.event;return!!r&&!!n}}),f(s(e),g,{writable:!0,value:function(t){var r=t.origin;return!!a(e.trustedOrigins).find((function(e){return e===r}))}}),f(s(e),w,{writable:!0,value:function(t){return a(h(s(e),v)).find((function(e){return e.contentWindow===t.source}))}}),d(s(e),"send",(function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"*";e.postMessage({cobrowseio:!0,event:t,data:r},n)})),d(s(e),"sendToParent",(function(t,r,n,o){return h(s(e),m).call(s(e),t)?a(e.trustedOrigins).includes(r)?void e.send(t,n,o,r):y("not sending as parent origin is not trusted",r,e.trustedOrigins):y("not sending as target frame",t,"is not a parent")})),d(s(e),"broadcastToChildren",(function(t,r){a(h(s(e),v)).forEach((function(n){e.send(n.contentWindow,t,r)}))})),d(s(e),"sync",(function(t){h(s(e),v).add(t),y("iframe available",t,"issuing sync"),e.send(t.contentWindow,"sync")})),d(s(e),"remove",(function(t){h(s(e),v).delete(t)})),y("iframe bridge constructed in",document),window.addEventListener("message",(function(t){if(!h(s(e),b).call(s(e),t))return y("ignoring message, not a cobrowse message",t.data);var r=h(s(e),g).call(s(e),t),n=t.data,o=n.event,i=n.data;r&&h(s(e),m).call(s(e),t.source)&&e.broadcastToChildren(o,i),e.emit(o,i,{trusted:r,source:t.source,origin:t.origin,iframe:h(s(e),w).call(s(e),t)})})),e}return t=u,Object.defineProperty(t,"prototype",{writable:!1}),t}(i.EventEmitter);t.default=E},9356:function(e,t,r){r(444),r(1076),r(1e3),r(5547),r(1624),r(2047),r(8534),r(6486),r(6257),r(6941),r(3524),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.init=function(e){var t=window;do{t=t.parent,(0,n.isxdoc)(t)&&(p.send(t,"init"),s.RedactionIndexProvider.instance=new s.RedactionIndex(e.redactedViews,e.unredactedViews))}while(t!==t.parent)};var n=r(1514),o=l(r(2833)),i=r(5064),a=r(7297),u=r(1362),c=l(r(9796)),s=r(8541);function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=(0,c.default)("cbio.iframes"),p=new o.default,h=null;p.on("patch",(function(e,t){var r=t.iframe;if(d("Received patch event in",document),r){var o=e.document_id,i=r.__vdom;i&&i.document.id!==e.document_id&&(i=null),i||(i=new n.VirtualDOM(o)),i.applyPatch(e.patch),r.__vdom=i,p.emit("iframe_patched",r)}})),p.on("mouse",(function(e,t){var r=t.iframe;d("Received mouse event in",e,document,"from",r),r&&(i.MouseTracking.setPosition(e.x,e.y,r),i.MouseTracking.setDown(e.down))})),p.on("control",(function(e,t){var r,n=t.trusted;if(d("Received control event in",document),!n)return d("Ignoring untrusted control event");u.ControlEvents.applyEvent.apply(u.ControlEvents,function(e){if(Array.isArray(e))return f(e)}(r=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),p.on("sync",(function(e,t){var r=t.source,n=t.origin,o=t.trusted;if(d("Received sync event in",document),!o)return d("Ignoring untrusted sync event");h||(d("Creating new frame loop in",document),(h=new a.FrameLoop).setSource(new a.DOMFrameSource((function(e){return p.sendToParent(r,n,"patch",e),!0}))),h.start()),d("Invalidating frame in",document),h.invalidateFrame(),i.MouseTracking.onChange=function(e){return p.sendToParent(r,n,"mouse",e)},i.MouseTracking.track(window)})),p.on("init",(function(e,t){var r=t.iframe;t.trusted&&r&&p.sync(r)}));var y=p;t.default=y},2175:function(e,t,r){r(6257),r(6941),r(6486),r(2047),r(3524),r(5547),r(1624),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(3600),r(6770),r(9244),r(2593),r(444),r(1076),r(1e3),r(5538);var n=i(r(995)),o=i(r(5737));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===a(o)?o:String(o)),n)}var o}var s={en:n.default,fr:o.default},l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.language=t}var t,r,n;return t=e,n=[{key:"getLocale",value:function(){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(navigator.languages);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(s[n])return new e(n);if(n.includes("-")){var o=n.split("-")[0].toLowerCase();if(s[o])return new e(o)}}}catch(e){r.e(e)}finally{r.f()}return new e("en")}},{key:"tr",value:function(e){return this.getLocale().translate(e)}}],(r=[{key:"translate",value:function(e){return s[this.language][e]||s.en[e]||e}}])&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=l},1930:function(e,t,r){r(5547),r(1624),r(8534),r(6941),r(5128),r(4011),r(5226),r(9270),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(3524),r(1e3),r(3275),r(6486),r(2047),r(3600),r(6257),r(3114),r(6706),r(3133),r(9244),r(2593),r(444),r(1076),r(5538);var n=r(1514),o=r(8541),i=l(r(9770)),a=l(r(5667)),u=l(r(3677)),c=l(r(6683)),s=r(2275);function l(e){return e&&e.__esModule?e:{default:e}}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function m(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===f(t)?t:String(t)}var w=m((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"isLocalResource",(function(e){return!!(/^https?:\/\/localhost/.test(e)||/^https?:\/\/127.0.0.1/.test(e)||/^file:\/\//.test(e)||/^blob:/.test(e)||/^ionic:/.test(e))})),b(this,"_serializeAttributes",(function(e,t){if(e.nodeType===window.Node.ELEMENT_NODE&&e.attributes){var r={};Array.from(e.attributes||[]).forEach((function(t){"href"===t.nodeName||"src"===t.nodeName?r[t.nodeName]="string"==typeof e[t.nodeName]?e[t.nodeName]:t.nodeValue:r[t.nodeName]=t.nodeValue})),t.attributes=r}})),b(this,"_serializeSelection",(function(e,t){var r,n=null,a=e.getSelection();if(a&&"Range"===a.type&&!a.isCollapsed&&a.rangeCount>0)try{n=h(Array(a.rangeCount)).reduce((function(e,t,r){var n,u,c=a.getRangeAt(r),s=c.startOffset,l=c.endOffset,f=null===(n=o.RedactionIndexProvider.instance)||void 0===n?void 0:n.getRedactedBy(c.startContainer),d=null===(u=o.RedactionIndexProvider.instance)||void 0===u?void 0:u.getRedactedBy(c.endContainer),p=i.default.get(null!=f?f:c.startContainer),h=i.default.get(null!=d?d:c.endContainer);return e.push({start:p,end:h,startOffset:f?0:s,endOffset:d?0:l}),e}),[])}catch(e){console.warn("CobrowseIO: Could not serialize text selection",e)}else["INPUT","TEXTAREA"].includes(null===(r=e.activeElement)||void 0===r?void 0:r.tagName)&&e.activeElement.selectionStart!==e.activeElement.selectionEnd&&(n=!1);t.selection=n})),b(this,"_serializeDocument",(function(e,r){if(e.nodeType===window.Node.DOCUMENT_NODE){var n,o,a,u;r.url=e.location&&e.location.href;var c=(0,s.getScrollBarSize)(),l=0===c?null===(n=e.defaultView)||void 0===n?void 0:n.innerWidth:null===(o=e.documentElement)||void 0===o?void 0:o.clientWidth,f=0===c?null===(a=e.defaultView)||void 0===a?void 0:a.innerHeight:null===(u=e.documentElement)||void 0===u?void 0:u.clientHeight;r.size={width:l,height:f},r.focus=i.default.get(e.activeElement),t._serializeSelection(e,r)}})),b(this,"_serializeInput",(function(e,t){if("INPUT"===e.tagName||"TEXTAREA"===e.tagName||"OPTION"===e.tagName){t.value=e.value,"radio"!==e.type&&"checkbox"!==e.type||void 0===e.checked||(t.checked=e.checked),t.selection=null;try{var r=e.selectionStart,n=e.selectionEnd,o=e.selectionDirection;r!==n&&e===e.ownerDocument.activeElement&&(t.selection={start:r,end:n,direction:o})}catch(t){console.warn("Failed to serialise text selection for the input",e)}}})),b(this,"_serializeOption",(function(e,t){"OPTION"===e.tagName&&(t.selected=e.selected)})),b(this,"_serializeCSSSheet",(function(e){try{if(e.media&&e.media.length&&!window.matchMedia(e.media).matches)return""}catch(t){console.warn("CobrowseIO: Media detection for sheet failed:",t,"sheet",e)}return[].slice.call(e.cssRules).reduce((function(e,t){try{return e+t.cssText}catch(t){return e}}),"")})),b(this,"_serializeShadowRoot",(function(e,r){try{if(e.nodeType===window.Node.DOCUMENT_FRAGMENT_NODE){var n=[];h(e.adoptedStyleSheets||[]).forEach((function(e){n=n.concat([].slice.call(e.cssRules))})),r.css=t._serializeCSSSheet({cssRules:n})}}catch(t){console.warn("CobrowseIO: ShadowRoot serialize failed:",t.message,"for",e)}})),b(this,"_serializeCSS",(function(e,r){try{var n;("STYLE"===(null===(n=e.tagName)||void 0===n?void 0:n.toUpperCase())||"LINK"===e.tagName&&"stylesheet"===e.rel&&t.isLocalResource(e.href))&&e.sheet&&(r.css=t._serializeCSSSheet(e.sheet))}catch(t){console.warn("CobrowseIO: CSS serialize failed:",t.message,"for",e)}})),b(this,"_serializeCanvas",(function(e,t){var r;if("CANVAS"===e.tagName&&(null===(r=o.RedactionIndexProvider.instance)||void 0===r||!r.isRedacted(e)))try{t.data=c.default.fromCanvas(e)}catch(t){e._cb_serialize_warned||(console.warn("Cobrowse failed to serialize canvas",e,"due to error",t),e._cb_serialize_warned=!0)}})),b(this,"_serializeImage",(function(e,r){var n;if("IMG"===e.tagName&&(null===(n=o.RedactionIndexProvider.instance)||void 0===n||!n.isRedacted(e))&&t.isLocalResource(e.src))try{r.attributes.src=c.default.fromImage(e)}catch(t){console.warn("CobrowseIO: Failed to serialize image",e)}})),b(this,"_serializeScroll",(function(e,t){var r,o;(0,n.isxdoc)(e)||(e.nodeType===window.Node.DOCUMENT_NODE?t.scroll={x:(null===(r=e.defaultView)||void 0===r?void 0:r.pageXOffset)||0,y:(null===(o=e.defaultView)||void 0===o?void 0:o.pageYOffset)||0}:(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight)&&(t.scroll={x:e.scrollLeft||0,y:e.scrollTop||0}))})),b(this,"_serializeRedaction",(function(e,r,n){if(n.isRedacted){delete r.value;var o=t._getSize(e);if(1===e.nodeType){var i=window.getComputedStyle(e),a="inline"===i.display&&o.height>0?"inline-block":i.display;r.attributes=r.attributes&&p({class:r.attributes.class,style:"".concat(r.attributes.style||"","; display: ").concat(a," !important;flex-basis: unset !important;flex-shrink: 0;")},"EMBED"===e.nodeName?{src:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="}:{})}else 3===e.nodeType&&(r.nodeType=1,r.tagName="SPAN",r.attributes={style:o.height>0?"display: inline-block !important":void 0});r.redaction={height:"".concat(o.height,"px"),width:"".concat(o.width,"px")}}else r.redaction=void 0})),b(this,"_getSize",(function(e){var t=null==e?void 0:e.nodeType;if(null==t)return{height:0,width:0};if(t===Node.ELEMENT_NODE)return e.getBoundingClientRect();var r=document.createRange();return r.selectNodeContents(e),r.getBoundingClientRect()})),b(this,"_serialize",(function(e,r){if(!i.default.get(e))throw console.error("node missing id",e,e.parentNode),new Error("node missing id",e);if(!a.default.isDOMNode(e))return e;if(!e.nodeType)throw new Error("node missing type",e);var n={id:i.default.get(e),nodeType:e.nodeType};return t._serializeShadowRoot(e,n),t._serializeAttributes(e,n),t._serializeImage(e,n),t._serializeDocument(e,n),t._serializeScroll(e,n),t._serializeInput(e,n),t._serializeOption(e,n),t._serializeCSS(e,n),t._serializeCanvas(e,n),t._serializeRedaction(e,n,r),e.tagName&&(n.tagName=e.tagName),e.nodeValue&&(n.content=e.nodeValue),n})),b(this,"serialize",(function(e){var r,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},s=null===(r=o.RedactionIndexProvider.instance)||void 0===r?void 0:r.getRedactedBy(e);return s&&c([]),s&&s!==e||[e].concat(h((0,n.parents)(e))).find((function(e){return u.default.isIgnored(e)}))?null:p(p({},t._serialize(e,{isRedacted:Boolean(s)})),{},{childNodes:s===e?[]:u.default.children(e).map((function(e){return a.default.isDOMNode(e)?{id:i.default.get(e)}:p({},e)}))})}))})),E=new w;t.default=E},9770:function(e,t,r){r(5547),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(1624),r(4391),r(1e3),r(2047),r(8534),r(3114),r(9244),r(2593),r(444),r(1076),r(5538);var n=i(r(453)),o=i(r(5667));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}var f=new(c((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"_idMap",new Map),s(this,"_nodeMap",new Map),s(this,"_currentId",0),s(this,"_nextId",(function(){return t._currentId+=1,t._currentId})),s(this,"track",(function(e){if(!e)return null;if(!o.default.isDOMNode(e))return e.id;if(!t.get(e)){var r=e.nodeType===window.Node.DOCUMENT_NODE?(0,n.default)(5):"".concat(t.track(document),"-").concat(t._nextId());t._idMap.set(r,e),t._nodeMap.set(e,r)}return t._nodeMap.get(e)})),s(this,"get",(function(e){return e?o.default.isDOMNode(e)?t._nodeMap.get(e)||null:e.id:null})),s(this,"getById",(function(e){return e&&t._idMap.get(e)||null})),s(this,"forget",(function(e){t._idMap.delete(t.get(e)),t._nodeMap.delete(e)}))})));t.default=f},3677:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(5547),r(6257),r(6941),r(3524),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(3600),r(6770),r(5226),r(4011),r(1e3),r(3114),r(6486),r(2047),r(1624),r(1157),r(8534);var o=r(1514),i=u(r(5667)),a=r(4039);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function l(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}function d(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,p(e,t,"get"))}function p(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var h=(0,u(r(9796)).default)("cbio.NodeTree"),y=new WeakMap,v=new(function(){function e(){var t,r,n,u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n={writable:!0,value:".__cbio_ignored"},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=this,r=y),r.set(t,n),l(this,"isIgnored",(function(e){var t;if(e&&e.matches&&e.matches(d(u,y)))return h("ignoring",e,"because child of classes"),!0;if([window.Node.COMMENT_NODE,window.Node.CDATA_SECTION_NODE,window.Node.ENTITY_REFERENCE_NODE,window.Node.ENTITY_NODE,window.Node.PROCESSING_INSTRUCTION_NODE,window.Node.NOTATION_NODE,window.Node.DOCUMENT_TYPE_NODE].includes(e.nodeType))return h("ignoring",e,"because of nodeType"),!0;if("SCRIPT"===e.tagName)return h("ignoring",e,"because of SCRIPT"),!0;var r=e.parentNode||e.defaultView&&e.defaultView.frameElement;return!(!r||"STYLE"!==(null===(t=r.tagName)||void 0===t?void 0:t.toUpperCase())||(h("ignoring",e,"because child of STYLE"),0))})),l(this,"children",(function(e){var t,r=Object.getOwnPropertyDescriptor(a.Node.prototype,"childNodes").get,n=Object.getOwnPropertyDescriptor(a.Element.prototype,"shadowRoot").get;return i.default.isDOMNode(e)?"IFRAME"===e.tagName&&(0,o.isxdoc)(e)?e.__vdom?[e.__vdom.document]:[]:"IFRAME"!==e.tagName||(0,o.isxdoc)(e)?e.nodeType===window.Node.ELEMENT_NODE&&n.apply(e)?[n.apply(e)].concat((t=Array.from(r.apply(e)),function(e){if(Array.isArray(e))return c(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).filter((function(e){return!u.isIgnored(e)})):Array.from(r.apply(e)).filter((function(e){return!u.isIgnored(e)})):[e.contentWindow.document].filter((function(e){return!u.isIgnored(e)})):e.childNodes})),l(this,"depthFirst",(function(e,t){return(0,o.depthFirst)(e,(function(e,r){return r(u.children(e)),t(e,r)}))}))}var t,r;return t=e,(r=[{key:"setIgnoredViews",value:function(e){if(Array.isArray(e))return t=this,r=y,n=".__cbio_ignored,".concat(e),function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t,p(t,r,"set"),n),void h("set ignored view selectors",d(this,y));var t,r,n;h("not updating #ignoredViews due to arg to being an array",e)}}])&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());t.default=v},5667:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9244),r(2593),r(444),r(1076),r(1e3),r(5538);var u=new(i((function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n=function(e){return!!e&&!(!e.childNodes||"function"!=typeof e.appendChild||void 0===e.nodeType)},(r=a(r="isDOMNode"))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n})));t.default=u},7743:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NodeSerializer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"NodeTracker",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"NodeTree",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"NodeUtils",{enumerable:!0,get:function(){return o.default}});var n=u(r(9770)),o=u(r(5667)),i=u(r(3677)),a=u(r(1930));function u(e){return e&&e.__esModule?e:{default:e}}},981:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(5547),r(6486),r(6257),r(6941),r(3524),Object.defineProperty(t,"__esModule",{value:!0}),t.RedactionIndex=void 0,r(1624),r(1e3),r(8719),r(2047),r(8534),r(3114),r(3275),r(4011),r(5793),r(1861),r(1157),r(9280),r(6706),r(887);var o,i=(o=r(3677))&&o.__esModule?o:{default:o},a=r(1514);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=s(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function d(e,t){h(e,t),t.add(e)}function p(e,t,r){h(e,t),t.set(e,r)}function h(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function y(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,b(e,t,"get"))}function v(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function m(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,b(e,t,"set"),r),r}function b(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var g=new WeakMap,w=new WeakMap,E=new WeakMap,S=new WeakMap,_=new WeakMap,O=new WeakMap,j=new WeakSet,x=new WeakSet,P=new WeakSet,k=new WeakSet,T=new WeakSet,L=new WeakSet,I=new WeakSet,C=new WeakSet,M=new WeakSet,N=new WeakSet,A=new WeakSet,R=new WeakSet,D=new WeakSet,F=function(){function e(){var t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).document,s=void 0===a?window.document:a;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),d(this,D),d(this,R),d(this,A),d(this,N),d(this,M),d(this,C),d(this,I),d(this,L),d(this,T),d(this,k),d(this,P),d(this,x),d(this,j),p(this,g,{writable:!0,value:void 0}),p(this,w,{writable:!0,value:void 0}),p(this,E,{writable:!0,value:void 0}),p(this,S,{writable:!0,value:["OBJECT","EMBED"]}),p(this,_,{writable:!0,value:new Set}),p(this,O,{writable:!0,value:new Set}),m(this,g,(t=v(this,D,Q)).call.apply(t,[this].concat(c(y(this,S)),c(n),c(i)))),m(this,E,i),o.length>0&&m(this,w,(r=v(this,D,Q)).call.apply(r,[this].concat(c(o))));var l,f=u(v(this,A,X).call(this,s,y(this,g)));try{for(f.s();!(l=f.n()).done;){var h=l.value;y(this,O).add(h)}}catch(e){f.e(e)}finally{f.f()}var b,F=u(v(this,A,X).call(this,s,y(this,w)));try{for(F.s();!(b=F.n()).done;){var W=b.value;y(this,_).add(W)}}catch(e){F.e(e)}finally{F.f()}}var t,r;return t=e,(r=[{key:"getRedactedBy",value:function(e){var t=v(this,j,W).call(this,e);if(t)return t;if(v(this,L,B).call(this,e)||v(this,M,H).call(this,e))return null;var r=v(this,I,q).call(this,e);return r?v(this,M,H).call(this,e.parentNode)?e:r:v(this,T,Y).call(this,e)?e:null}},{key:"notifyChanges",value:function(e){var t,r=this,n=new Set,o=new Set,a=new Set,s=new Set,l=new Set(c(y(this,O))),f=u(e);try{for(f.s();!(t=f.n()).done;){var d=t.value;if(!i.default.isIgnored(d.target)){var p=this.getRedactedBy(d.target);p&&p!==d.target&&o.add(p),p||s.add(d.target),v(this,P,z).call(this,d.target,l)&&n.add(d.target);var h=v(this,N,K).call(this,d.target),m=h.length>0;if("attributes"===d.type){var b,g=u(h);try{for(g.s();!(b=g.n()).done;){var w=b.value;a.add(w)}}catch(e){g.e(e)}finally{g.f()}var E=v(this,L,B).call(this,d.target);y(this,_).has(d.target)!==!!E&&(a.add(d.target.parentNode),E?y(this,_).add(d.target):y(this,_).delete(d.target))}else if("childList"===d.type){var S,j=c(d.addedNodes).filter((function(e){return!i.default.isIgnored(e)})),x=c(d.removedNodes).filter((function(e){return!i.default.isIgnored(e)})),T=j.filter((function(e){return v(r,L,B).call(r,e)})).concat(j.flatMap((function(e){return c(v(r,N,K).call(r,e))}))),I=x.filter((function(e){return v(r,L,B).call(r,e)})).concat(x.flatMap((function(e){return c(v(r,N,K).call(r,e))}))),C=u(I);try{for(C.s();!(S=C.n()).done;){var M=S.value;y(this,_).delete(M)}}catch(e){C.e(e)}finally{C.f()}var A,R=u(T);try{for(R.s();!(A=R.n()).done;){var D=A.value;y(this,_).add(D)}}catch(e){R.e(e)}finally{R.f()}var F,W=u(x);try{for(W.s();!(F=W.n()).done;){var G=F.value;y(this,O).delete(G)}}catch(e){W.e(e)}finally{W.f()}if(!a.has(d.target)){var Y=m&&T.length>0,q=!m&&I.length>0;(Y||q)&&a.add(d.target)}}}}}catch(e){f.e(e)}finally{f.f()}v(this,k,U).call(this,a).filter((function(e){return!i.default.isIgnored(e)})).forEach((function(e){return o.add(e)}));var V,H=u(o);try{for(H.s();!(V=H.n()).done;){var X=V.value;v(this,P,z).call(this,X,l)&&n.add(X)}}catch(e){H.e(e)}finally{H.f()}var $,Q=u(s);try{for(Q.s();!($=Q.n()).done;){var Z,J=$.value,ee=u(y(this,O));try{for(ee.s();!(Z=ee.n()).done;){var te=Z.value;J.contains(te)&&o.add(te)}}catch(e){ee.e(e)}finally{ee.f()}}}catch(e){Q.e(e)}finally{Q.f()}return{added:n,modified:o}}},{key:"isRedacted",value:function(e){return Boolean(this.getRedactedBy(e))}}])&&f(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function W(e){var t=this,r=[].concat(c(y(this,E)),c(y(this,S)));return v(this,R,$).call(this,e,r)?e:c((0,a.parents)(e)).find((function(e){return v(t,R,$).call(t,e,r)}))}function G(e){var t=y(this,O).has(e);t&&this.getRedactedBy(e)!==e?y(this,O).delete(e):t||this.getRedactedBy(e)!==e||y(this,O).add(e)}function z(e,t){return v(this,x,G).call(this,e),t.has(e)&&!y(this,O).has(e)}function U(e){var t=new Set(c(e).flatMap((function(e){return[e].concat(c((0,a.parents)(e)))})));return c(t).flatMap((function(e){return c(e.childNodes||[])}))}function Y(e){return v(this,R,$).call(this,e,y(this,g))}function B(e){return v(this,R,$).call(this,e,y(this,w))}function q(e){var t=this,r=v(this,C,V).call(this,e);return r?(0,a.parents)(e,r).find((function(e){return v(t,M,H).call(t,e.parentNode)}))||r:null}function V(e){var t=v(this,D,Q).call(this),r=e&&e.parentNode&&e.parentNode.closest&&t&&e.parentNode.closest(t);return v(this,R,$).call(this,r,y(this,g))?r:null}function H(e){return y(this,w)&&e&&"HTML"!==e.tagName&&e.querySelector&&e.querySelector(y(this,w))}function K(e){return v(this,A,X).call(this,e,y(this,w))}function X(e,t){return t&&e.querySelectorAll?e.querySelectorAll(t):[]}function $(e,t){return e&&t&&e.matches&&e.matches(t)}function Q(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0===t.length?[y(this,g),y(this,w)]:t).filter((function(e){return e})).join(",")}t.RedactionIndex=F},1877:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o;function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function a(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(5547),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(1624),r(1e3),r(2047),r(1157),r(8534);var u=(0,((o=r(9796))&&o.__esModule?o:{default:o}).default)("cbio.RedactionIndexProvider"),c=new WeakMap,s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}(this,c,{writable:!0,value:void 0})}var t,r;return t=e,(r=[{key:"instance",get:function(){return function(e,t){return t.get?t.get.call(e):t.value}(this,a(this,c,"get"))},set:function(e){var t,r;r=e,function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t=this,a(t,c,"set"),r),u("set new redaction index")}}])&&i(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());t.default=s},8541:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedactionIndex",{enumerable:!0,get:function(){return o.RedactionIndex}}),Object.defineProperty(t,"RedactionIndexProvider",{enumerable:!0,get:function(){return i.default}});var n,o=r(981),i=(n=r(1877))&&n.__esModule?n:{default:n}},2585:function(e,t,r){r(5547),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(5226),r(3600),r(6770),r(1e3),r(3275),r(1624),r(8719),r(2047),r(8534),r(9244),r(2593),r(444),r(1076),r(5538),r(2449);var n=a(r(1320)),o=r(7743),i=r(8541);function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function s(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}var d=(0,a(r(9796)).default)("cbio.ControlEvents"),p=new(s((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_applyScroll",(function(e,t){var r=e.defaultView||e;r.scrollTo?r.scrollTo(t.x,t.y):(r.scrollTop=t.y,r.scrollLeft=t.x)})),l(this,"_updateCheckbox",(function(e,t){var r=t.checked;if(void 0!==r&&"INPUT"===e.tagName&&void 0!==e.checked){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,"checked");n&&n.set.call(e,r)}})),l(this,"_updateInnerHTML",(function(e,t){var r=t.innerHTML;void 0!==r&&(e.innerHTML=n.default.sanitize(r))})),l(this,"_updateValue",(function(e,t){var r=t.value;if(void 0!==r){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value");n&&n.set.call(e,r)}"TEXTAREA"===e.tagName&&o.NodeTracker.track(e.childNodes[0])})),l(this,"_updateTarget",(function(e,r){t._updateValue(e,r.target),t._updateCheckbox(e,r.target),t._updateInnerHTML(e,r.target)})),l(this,"_generateMouse",(function(e,t){return new MouseEvent(t.state,{clientX:t.x*window.innerWidth,clientY:t.y*window.innerHeight,bubbles:!0,cancelable:!0,composed:!0,view:e.ownerDocument&&e.ownerDocument.defaultView||window})})),l(this,"_generatePointer",(function(e,t){return new PointerEvent(t.state,{clientX:t.x*window.innerWidth,clientY:t.y*window.innerHeight,pointerId:t.pointerId,width:t.width,height:t.height,pressure:t.pressure,tangentialPressure:t.tangentialPressure,tiltX:t.tiltX,tiltY:t.tiltY,twist:t.twist,pointerType:t.pointerType,isPrimary:t.isPrimary,bubbles:!0,cancelable:!0,composed:!0,view:e.ownerDocument&&e.ownerDocument.defaultView||window})})),l(this,"_generateKeypress",(function(e,t){return new KeyboardEvent(t.state,{key:t.key,code:t.code,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,charCode:t.charCode,keyCode:t.keyCode,which:t.which,bubbles:!0,cancelable:!0,composed:!0,view:e.ownerDocument&&e.ownerDocument.defaultView||window})})),l(this,"_generateFocus",(function(e,t){return new FocusEvent(t.state,{bubbles:!1,cancelable:!1,composed:!0,view:e.ownerDocument&&e.ownerDocument.defaultView||window})})),l(this,"_generateChange",(function(e,t){return new CustomEvent(t.state,{bubbles:!0,cancelable:!1,composed:!0,view:e.ownerDocument&&e.ownerDocument.defaultView||window})})),l(this,"_generateInput",(function(e,t){return new CustomEvent(t.state,{bubbles:!0,cancelable:!1,composed:!0,view:e.ownerDocument&&e.ownerDocument.defaultView||window,inputType:t.inputType,data:t.data})})),l(this,"_generateSelection",(function(e,t){return new CustomEvent("selection",{bubbles:!0,cancelable:!1,composed:!0,view:e.ownerDocument&&e.ownerDocument.defaultView||window,selection:t.selection})})),l(this,"_generateEvent",(function(e,r,n){switch(n.state.includes("move")&&d("generate",n,"on",r),e){case"keypress":return t._generateKeypress(r,n);case"mouse":return t._generateMouse(r,n);case"pointer":return t._generatePointer(r,n);case"change":return t._generateChange(r,n);case"input":return t._generateInput(r,n);case"focus":return t._generateFocus(r,n);case"select":return t._generateSelection(r,n);default:return console.warn("CobrowseIO: unknown event type",e,n),null}})),l(this,"_setSelection",(function(e,t){var r=t.selection;if(!(e.__cobrowse_user_selection_timestamp>Date.now()-100)&&e.getSelection())try{r?(e.__last_agent_selection_ts=Date.now(),e.getSelection().removeAllRanges(),r.forEach((function(t){var r=t.start,n=t.startOffset,i=t.end,a=t.endOffset,u=document.createRange(),c=o.NodeTracker.getById(r),s=o.NodeTracker.getById(i);u.setStart(c,n),u.setEnd(s,a),e.getSelection().addRange(u)}))):e.getSelection().removeAllRanges()}catch(e){console.warn("Failed to apply selection",r,e)}})),l(this,"_setInputSelection",(function(e,t){var r=t.selection;if(!(e.ownerDocument.__cobrowse_user_selection_timestamp>Date.now()-100)&&["text","textarea","search","url"].includes(e.type))try{if(e.ownerDocument.__last_agent_selection_ts=Date.now(),r){var n=r.start,o=r.end,i=r.direction;e.focus(),e.setSelectionRange(n,o,i)}else e.getRootNode({composed:!0}).activeElement===e&&e.setSelectionRange(null,null)}catch(e){console.warn("Failed to select text",e)}})),l(this,"applyEvent",(function(e,r){var n;if(!r.target)return null;var a=o.NodeTracker.getById(r.target.id);if(!a)return null;if(null!==(n=i.RedactionIndexProvider.instance)&&void 0!==n&&n.isRedacted(a))return null;try{var u;if("scroll"===e)return t._applyScroll(a,r);if(null!==(u=a._cobrowse_suppress_events)&&void 0!==u&&u.has(r.state))return a._cobrowse_suppress_events.delete(r.state),0===a._cobrowse_suppress_events.size&&delete a._cobrowse_suppress_events.size,null;var c=t._generateEvent(e,a,r);return c&&(a.dispatchEvent(c)?(["keydown","keypress","input"].includes(r.state)&&t._updateTarget(a,r),["selectionchange"].includes(r.state)&&t._setSelection(a,r),["select"].includes(r.state)&&t._setInputSelection(a,r)):"keydown"===r.state?a._cobrowse_suppress_events=new Set(["keypress","input"]):"keypress"===r.state&&(a._cobrowse_suppress_events=new Set(["input"]))),c}catch(t){return console.warn("Error while injecting event",e,t),null}}))})));t.default=p},1362:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ControlEvents",{enumerable:!0,get:function(){return o.default}});var n,o=(n=r(2585))&&n.__esModule?n:{default:n}},7454:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o;function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}r(1e3),r(9616),r(9244),r(2593),r(444),r(1076),r(5538),r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(6941),r(3064);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(c,e);var t,r,o,u=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(r);if(o){var i=a(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=u.call(this,t,r)).id=e,n.name="APIError",n}return t=c,Object.defineProperty(t,"prototype",{writable:!1}),t}(((o=r(9822))&&o.__esModule?o:{default:o}).default);t.default=u},9822:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e){var t="function"==typeof Map?new Map:void 0;return o=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return i(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)},o(e)}function i(e,t,r){return i=a()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&u(o,r.prototype),o},i.apply(null,arguments)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}r(1e3),r(7285),r(9616),r(1624),r(4391),r(2047),r(8534),r(9244),r(2593),r(444),r(1076),r(5538),r(5547),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(6941),r(3064);var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(s,e);var t,r,o,i=(r=s,o=a(),function(){var e,t=c(r);if(o){var i=c(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(r=i.call(this,t)).status=e,r.name="HTTPError",r}return t=s,Object.defineProperty(t,"prototype",{writable:!1}),t}(o(Error));t.default=s},5388:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(3064),r(9616),r(9244),r(2593),r(444),r(1076),r(5538),r(5547),r(8496),r(4802),r(2112),r(6353),r(3275),r(6941),r(6257),r(4011),r(5226),r(9270),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(3114),r(1e3),r(7285),r(5128),r(1624),r(2047),r(1157),r(8534);var o=r(1239),i=c(r(1347)),a=c(r(113)),u=c(r(7454));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(){d=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),u=new P(n||[]);return o(a,"_invoke",{value:_(e,r,u)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p={};function h(){}function y(){}function v(){}var m={};s(m,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,a)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(o,a,u,c){var s=f(e[o],e,a);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==n(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(d).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=f(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=f(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),s(S.prototype,u,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),s(w,c,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function p(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){p(i,n,o,a,u,"next",e)}function u(e){p(i,n,o,a,u,"throw",e)}a(void 0)}))}}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function v(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function w(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function E(e,t,r){return _(e,t),S(r,"get"),k(e,r)}function S(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function _(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}function O(e,t,r){return j(e,P(e,t,"set"),r),r}function j(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}function x(e,t){return k(e,P(e,t,"get"))}function P(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function k(e,t){return t.get?t.get.call(e):t.value}var T=new WeakMap,L=new WeakMap,I=new WeakMap,C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(P,e);var t,r,o,c,s,f,p,v=(f=P,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(f);if(p){var r=g(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,e)});function P(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,P);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return w(b(e=v.call.apply(v,[this].concat(n))),T,{writable:!0,value:{}}),w(b(e),L,{writable:!0,value:{}}),w(b(e),I,{writable:!0,value:(t=h(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.status>=400)){e.next=5;break}return e.next=3,t.json();case 3:throw r=e.sent,new u.default(r.id,t.status,r.message);case 5:if(t.ok){e.next=7;break}throw new Error("Failed to parse response, response not ok");case 7:if(204!==t.status){e.next=9;break}return e.abrupt("return",null);case 9:return e.next=11,t.json();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}),e}return t=P,r=[{key:"_resource",get:function(){return console.warn("The _resource property is private and should not be accessed directly. It will soon be removed entirely. Please update your implementation to use only the public APIs."),x(this,L)}},{key:"resource",get:function(){return x(this,L)}},{key:"url",value:function(){throw new Error("url() must be implemented")}},{key:"id",value:function(){return this.field("id")}},{key:"field",value:function(e){return(x(this,L)||{})[e]}},{key:"cache",value:function(e){O(this,L,l(l({},x(this,L)),e))}},{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.url(),{headers:this.headers()});case 2:return t=e.sent,e.t0=this,e.next=6,x(this,I).call(this,t);case 6:return e.t1=e.sent,e.abrupt("return",e.t0.updateResource.call(e.t0,e.t1));case 8:case"end":return e.stop()}}),e,this)}))))},{key:"update",value:(s=h(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&Object.keys(t)&&(0,i.default)(x(this,L),t,a.default))){e.next=2;break}return e.abrupt("return",this);case 2:return e.next=4,fetch(this.url(),{method:this.id()?"PUT":"POST",headers:this.headers(),body:JSON.stringify(t)});case 4:return r=e.sent,e.t0=this,e.next=8,x(this,I).call(this,r);case 8:return e.t1=e.sent,e.abrupt("return",e.t0.updateResource.call(e.t0,e.t1));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"destroy",value:(c=h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.url(),{method:"DELETE",headers:this.headers()});case 2:return t=e.sent,e.t0=this,e.next=6,x(this,I).call(this,t);case 6:return e.t1=e.sent,e.abrupt("return",e.t0.updateResource.call(e.t0,e.t1));case 8:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"updateResource",value:function(e){return O(this,L,e||{}),this.emit("updated",this),this}},{key:"headers",value:function(){return l(l({},P.headers()),x(this,T))}},{key:"setHeader",value:function(e,t){x(this,T)[e]=t}},{key:"getHeader",value:function(e){return this.headers()[e]}}],o=[{key:"headers",value:function(){return E(this,P,M)}},{key:"setHeader",value:function(e,t){E(P,P,M)[e]=t}},{key:"getHeader",value:function(e){return E(P,P,M)[e]}},{key:"api",get:function(){return E(P,P,N)},set:function(e){var t,r,n;r=N,n=e,_(t=P,P),S(r,"set"),j(t,r,n)}}],r&&y(t.prototype,r),o&&y(t,o),Object.defineProperty(t,"prototype",{writable:!1}),P}(o.EventEmitter);t.default=C;var M={writable:!0,value:{}},N={writable:!0,value:void 0}},8302:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RESTResource",{enumerable:!0,get:function(){return o.default}});var n,o=(n=r(5388))&&n.__esModule?n:{default:n}},4914:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(3064),r(1112),r(5226),r(9616),r(5128),r(3275),r(9270),r(5547),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(1e3),r(3114),r(887),r(6257),r(4011),r(3600),r(6770),r(7285),r(1624),r(2047),r(8534),r(6955),r(8927),r(1157);var o=r(5828),i=r(7368),a=s(r(1826)),u=r(8302),c=r(5161);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},y.apply(this,arguments)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function m(e,t,r){return(t=b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}function g(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function w(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,S(e,t,"get"))}function E(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,S(e,t,"set"),r),r}function S(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var _=(0,s(r(9796)).default)("cbio.Session"),O=new WeakMap,j=new WeakMap,x=new WeakMap,P=new WeakMap,k=new WeakMap,T=new WeakMap,L=new WeakMap,I=new WeakMap,C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(b,e);var t,r,u,s,l=(u=b,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(u);if(s){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,e)});function b(e){var t,r,n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),g(h(n=l.call(this)),O,{writable:!0,value:void 0}),g(h(n),j,{writable:!0,value:void 0}),g(h(n),x,{writable:!0,value:function(e){n.setHeader("X-CobrowseDeviceToken",e)}}),g(h(n),P,{writable:!0,value:function(){return n.getHeader("X-CobrowseDeviceToken")}}),m(h(n),"activate",(function(){return _("activate session"),n.update({state:"active",device:c.Device.info,custom_data:w(h(n),O).customData})})),m(h(n),"end",(function(){return _("end session"),n.update({state:"ended"})})),m(h(n),"code",(function(){return n.field("code")})),m(h(n),"state",(function(){return n.field("state")})),m(h(n),"isActive",(function(){return"active"===n.state()})),m(h(n),"isAuthorizing",(function(){return"authorizing"===n.state()})),m(h(n),"isPending",(function(){return"pending"===n.state()})),m(h(n),"isEnded",(function(){return"ended"===n.state()})),m(h(n),"selectors",(function(){var e=n.field("redaction_selectors");return Array.isArray(e)?e:[]})),m(h(n),"agent",(function(){return n.field("agent")||!1})),m(h(n),"requireConsent",(function(){return n.field("require_consent")})),m(h(n),"fullDevice",(function(){return!0===n.field("full_device")||"on"===n.field("full_device")||"requested"===n.field("full_device")})),m(h(n),"setFullDevice",(function(e){return w(h(n),j).toggle(["laser","drawing","pointer","scroll","select","keypress","cursor"],"on"!==e),n.update({full_device:e})})),m(h(n),"update",(function(e){return y((t=h(n),v(b.prototype)),"update",t).call(t,f({capabilities:w(h(n),j).toArray()},e))})),m(h(n),"scale",(function(){return n.field("scale")||.5})),m(h(n),"remoteControl",(function(){return n.field("remote_control")||"on"})),m(h(n),"setRemoteControl",(function(e){return n.update({remote_control:e})})),m(h(n),"allowRemoteControl",(function(){return"on"===n.remoteControl()})),m(h(n),"updateResource",(function(e){var t=n.isEnded();return y((r=h(n),v(b.prototype)),"updateResource",r).call(r,e),n.isEnded()&&!t&&(n.emit("ended",h(n)),n.removeAllListeners()),h(n)})),g(h(n),k,{writable:!0,value:(0,i.protect)(h(n),"serialize",(function(){return f(f({},n.resource),{},{_locals:{token:w(h(n),P).call(h(n))}})}))}),g(h(n),T,{writable:!0,value:(0,i.protect)(h(n),"deserialize",(function(e){var t=e._locals||{};return delete e._locals,w(h(n),x).call(h(n),t.token),n.updateResource(e),h(n)}))}),g(h(n),L,{writable:!0,value:(0,i.protect)(h(n),"compress",(function(){return"".concat(n.resource.id,":").concat(w(h(n),P).call(h(n)))}))}),g(h(n),I,{writable:!0,value:(0,i.protect)(h(n),"decompress",(function(e){var t=e.split(":");return w(h(n),T).call(h(n),{_locals:{token:t[t.length-1]},id:t.slice(0,-1).join(":")}),h(n)}))}),!e)throw new Error("Session delegate is required");E(h(n),O,e),E(h(n),j,new a.default(e.capabilities));var u=Math.ceil(Date.now()/36e5);return w(h(n),x).call(h(n),(0,o.v5)(u+"",c.Device.deviceToken())),n}return t=b,(r=[{key:"capabilities",get:function(){var e=this.field("capabilities");return w(this,j).toArray().filter((function(t){return e.includes(t)}))}},{key:"url",value:function(){var e=this.id()||this.code();return new URL("api/1/sessions".concat(e?"/".concat(e):""),b.api).toString()}}])&&d(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),b}(u.RESTResource);t.default=C},1826:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function i(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,a(e,t,"get"))}function a(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(5547),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(5220),r(1e3),r(4011),r(5128),r(3275),r(1624),r(2047),r(1157),r(8534);var u=new WeakMap,c=function(){function e(t){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o={writable:!0,value:{}},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,n=u),n.set(r,o),this.fill(t)}var t,r;return t=e,(r=[{key:"fill",value:function(e){return t=this,r=u,n=e.reduce((function(e,t){return e[t]=!0,e}),{}),function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t,a(t,r,"set"),n),this;var t,r,n}},{key:"all",value:function(){return i(this,u)}},{key:"toArray",value:function(){var e=this;return Object.keys(i(this,u)).filter((function(t){return i(e,u)[t]}))}},{key:"toggle",value:function(e,t){var r=this;return Array.isArray(e)||(e=[e]),e.filter((function(e){return e in i(r,u)})).forEach((function(e){i(r,u)[e]=t})),this}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=c},3403:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SESSION_CAPABILITY_TYPE_SELECT=t.SESSION_CAPABILITY_TYPE_SCROLL=t.SESSION_CAPABILITY_TYPE_POINTER=t.SESSION_CAPABILITY_TYPE_LASER=t.SESSION_CAPABILITY_TYPE_KEYPRESS=t.SESSION_CAPABILITY_TYPE_FULL_DEVICE=t.SESSION_CAPABILITY_TYPE_DRAWING=t.SESSION_CAPABILITY_TYPE_CURSOR=void 0;var r="pointer";t.SESSION_CAPABILITY_TYPE_POINTER=r;var n="scroll";t.SESSION_CAPABILITY_TYPE_SCROLL=n;var o="select";t.SESSION_CAPABILITY_TYPE_SELECT=o;var i="keypress";t.SESSION_CAPABILITY_TYPE_KEYPRESS=i;var a="drawing";t.SESSION_CAPABILITY_TYPE_DRAWING=a;var u="laser";t.SESSION_CAPABILITY_TYPE_LASER=u;var c="full_device";t.SESSION_CAPABILITY_TYPE_FULL_DEVICE=c;var s="cursor";t.SESSION_CAPABILITY_TYPE_CURSOR=s;var l=[r,n,o,i,a,u,c,s];t.default=l},2001:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(5547),r(8496),r(4802),r(2112),r(6353),r(3064),r(3275),r(6941),r(6257),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(3600),r(6770),r(1624),r(1e3),r(2047),r(1157),r(8534),r(9280);var o=p(r(1713)),i=r(7297),a=r(5064),u=r(3042),c=r(1362),s=r(8541),l=p(r(9796)),f=r(3403),d=r(5011);function p(e){return e&&e.__esModule?e:{default:e}}function h(){h=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),u=new P(n||[]);return o(a,"_invoke",{value:_(e,r,u)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function p(){}function y(){}function v(){}var m={};s(m,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,a)&&(m=g);var w=v.prototype=p.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(o,a,u,c){var s=f(e[o],e,a);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==n(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(d).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=f(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=f(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=s(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),s(S.prototype,u,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),s(w,c,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function y(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){y(i,n,o,a,u,"next",e)}function u(e){y(i,n,o,a,u,"throw",e)}a(void 0)}))}}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function b(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}function E(e,t,r){S(e,t),t.set(e,r)}function S(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function O(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,x(e,t,"get"))}function j(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,x(e,t,"set"),r),r}function x(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var P=(0,l.default)("cbio.SessionContext"),k=new WeakMap,T=new WeakMap,L=new WeakMap,I=new WeakMap,C=new WeakMap,M=new WeakMap,N=new WeakSet,A=new WeakMap,R=new WeakMap,D=new WeakMap,F=new WeakMap,W=new WeakMap,G=new WeakMap,z=new WeakMap,U=new WeakMap,Y=new WeakMap,B=new WeakMap,q=new WeakMap,V=new WeakMap,H=new WeakMap,K=new WeakMap,X=new WeakMap,$=new WeakMap,Q=new WeakMap,Z=new WeakMap,J=new WeakMap,ee=new WeakMap,te=b((function e(t,r,n){var l,d,p,y,m,b,w=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),S(this,l=N),l.add(this),E(this,k,{writable:!0,value:void 0}),E(this,T,{writable:!0,value:void 0}),E(this,L,{writable:!0,value:new i.FrameLoop}),E(this,I,{writable:!0,value:void 0}),E(this,C,{writable:!0,value:void 0}),E(this,M,{writable:!0,value:void 0}),g(this,"invalidateFrames",(function(){O(w,L).isRunning()&&O(w,L).invalidateFrame()})),g(this,"destroy",(function(){P("destroy session context"),O(w,V).call(w),O(w,k)&&O(w,k).close(),j(w,k,null),O(w,L)&&O(w,L).destroy(),j(w,L,null),a.WindowTracking.off("activate",O(w,X)),window.removeEventListener("focus",O(w,X),{capture:!0,passive:!0}),window.removeEventListener("hashchange",O(w,$),{capture:!0,passive:!0}),a.MouseTracking.onChange===O(w,J)&&(a.MouseTracking.onChange=null),w.session&&(w.session.removeListener("update",O(w,q)),w.session.removeListener("ended",O(w,V)),w.session.removeListener("sync",O(w,A)),w.session.removeListener("drawing",O(w,D)),w.session.removeListener("laser",O(w,R)),w.session.removeListener("control",O(w,F))),document.removeEventListener("DOMContentLoaded",O(w,W),{once:!0}),O(w,H).call(w,null),w.session=null})),E(this,A,{writable:!0,value:function(e){var t=e.id;t&&O(w,I)===t||(j(w,I,t),O(w,L).invalidateFrame())}}),E(this,R,{writable:!0,value:function(e){_(w,N,re).call(w,e)&&a.WindowTracking.isActive()&&(w.session.fullDevice()||u.LaserOverlay.update(e))}}),E(this,D,{writable:!0,value:function(e){_(w,N,re).call(w,e)&&(e.image||u.AnnotationOverlay.hide(),a.WindowTracking.isActive()&&(w.session.fullDevice()||u.AnnotationOverlay.update(e)))}}),E(this,F,{writable:!0,value:function(e,t){"focus"!==e||t.agent||a.WindowTracking.resignActive(),a.WindowTracking.isActive()&&(w.session.fullDevice()||w.session.allowRemoteControl()&&(w.session.capabilities.includes(f.SESSION_CAPABILITY_TYPE_CURSOR)&&u.RemoteCursor.update(e,t),_(w,N,re).call(w,t)&&c.ControlEvents.applyEvent(e,t)))}}),E(this,W,{writable:!0,value:function(e){w.session&&(e.isActive()?document.body?w.delegate.showSessionControls(e):document.addEventListener("DOMContentLoaded",O(w,W),{once:!0}):w.delegate.hideSessionControls(e))}}),E(this,G,{writable:!0,value:function(e){s.RedactionIndexProvider.instance=new s.RedactionIndex(w.delegate.redactedViews,w.delegate.unredactedViews,e.selectors())}}),E(this,z,{writable:!0,value:(d=v(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.agent()&&!t.isActive()&&!t.isEnded()){e.next=2;break}return e.abrupt("return",null);case 2:if(!O(w,C)){e.next=4;break}return e.abrupt("return",null);case 4:if(j(w,C,!0),t.requireConsent()){e.next=7;break}return e.abrupt("return",t.activate());case 7:return e.prev=7,P("authorizing session"),e.next=11,t.update({state:"authorizing"});case 11:if(w.session){e.next=13;break}return e.abrupt("return",null);case 13:return e.next=15,w.delegate.confirmSession(t);case 15:if(r=e.sent,w.session){e.next=18;break}return e.abrupt("return",null);case 18:if(!1!==r){e.next=23;break}return P("user rejected session request"),e.abrupt("return",t.end());case 23:return P("session accepted"),e.abrupt("return",t.activate());case 25:e.next=33;break;case 27:if(e.prev=27,e.t0=e.catch(7),e.t0&&console.warn("CobrowseIO: error caught during confirmation",e.t0),!w.session){e.next=32;break}return e.abrupt("return",t.end());case 32:return e.abrupt("return",null);case 33:case"end":return e.stop()}}),e,null,[[7,27]])}))),function(e){return d.apply(this,arguments)})}),E(this,U,{writable:!0,value:(p=v(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("requested"===t.remoteControl()){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,w.delegate.confirmRemoteControl();case 5:if(e.t0=e.sent,!1!==e.t0){e.next=11;break}return P("user rejeted remote control"),e.abrupt("return",t.update({remote_control:"rejected"}));case 11:return P("user accepted remote control"),e.abrupt("return",t.update({remote_control:"on"}));case 13:e.next=19;break;case 15:return e.prev=15,e.t1=e.catch(2),e.t1&&console.warn("CobrowseIO: error caught during confirmation",e.t1),e.abrupt("return",t.update({remote_control:"rejected"}));case 19:case"end":return e.stop()}}),e,null,[[2,15]])}))),function(e){return p.apply(this,arguments)})}),E(this,Y,{writable:!0,value:(y=v(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.WindowTracking.isActive()){e.next=2;break}return e.abrupt("return",!1);case 2:if(w.session.capabilities.includes(f.SESSION_CAPABILITY_TYPE_FULL_DEVICE)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,w.delegate.confirmFullDevice();case 7:if(t=e.sent,P("full device request",t),t){e.next=12;break}return e.next=12,w.session.setFullDevice("rejected");case 12:return e.abrupt("return",t);case 15:return e.prev=15,e.t0=e.catch(4),e.next=19,w.session.setFullDevice("off");case 19:return e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,null,[[4,15]])}))),function(){return y.apply(this,arguments)})}),E(this,B,{writable:!0,value:(m=v(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isEnded()&&O(w,L)){e.next=2;break}return e.abrupt("return",null);case 2:if(r=O(w,L).getSource(),!t.fullDevice()){e.next=10;break}if(!(r instanceof i.MediaStreamFrameSource)){e.next=6;break}return e.abrupt("return",P("already set to MediaStreamFrameSource"));case 6:return e.next=8,O(w,L).setSource(new i.MediaStreamFrameSource({handleFrame:O(w,Z),scale:t.scale,captureStarted:function(e){t.setFullDevice("on"),t.emit("media",e)},captureEnded:function(e){e&&console.warn("Full device mode failed: ",e),t.setFullDevice(e?"rejected":"off")},requestPermission:O(w,Y)}));case 8:e.next=13;break;case 10:if(!(r instanceof i.DOMFrameSource)){e.next=12;break}return e.abrupt("return",P("already set to DOMFrameSource"));case 12:return e.abrupt("return",O(w,L).setSource(new i.DOMFrameSource(O(w,Q))));case 13:case"end":return e.stop()}}),e)}))),function(e){return m.apply(this,arguments)})}),E(this,q,{writable:!0,value:function(e){w.session?(O(w,z).call(w,e),O(w,W).call(w,e),O(w,G).call(w,e),O(w,U).call(w,e),O(w,B).call(w,e),O(w,H).call(w,e),e.isActive()&&O(w,ee).call(w)):P("onSessionUpdated called after destroy()")}}),E(this,V,{writable:!0,value:function(){u.AnnotationOverlay.hide(),u.RemoteCursor.hide(),u.LaserOverlay.hide(),w.delegate.hideSessionControls(w.session),O(w,H).call(w,null)}}),E(this,H,{writable:!0,value:(b=v(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=O(w,M))||void 0===r?void 0:r.store(t);case 2:case"end":return e.stop()}}),e)}))),function(e){return b.apply(this,arguments)})}),E(this,K,{writable:!0,value:function(e,t){return!(!w.session||!w.session.isActive()||!w.session.fullDevice()&&!a.WindowTracking.isActive()||!O(w,k)||!O(w,k).stream||!O(w,k).stream.connected||!O(w,k).stream.bufferedAmount>100||(O(w,k).stream.send(e,t),0))}}),E(this,X,{writable:!0,value:function(){return O(w,K).call(w,"focus",{type:"Focus",timestamp:new Date})}}),E(this,$,{writable:!0,value:function(){return O(w,K).call(w,"screen",{type:"Screen",timestamp:new Date,url:window.location.href,title:document.title})}}),E(this,Q,{writable:!0,value:function(e){return j(w,T,(O(w,T)||0)+1),O(w,K).call(w,"frame",{type:"Frame",id:O(w,T),data:e,timestamp:new Date,mime_type:"application/x-cbio-vdom-patch"})}}),E(this,Z,{writable:!0,value:function(e,t,r){O(w,k).stream.messageLag()>=r?P("dropped frame due to message lag",O(w,k).stream.messageLag()):(j(w,T,(O(w,T)||0)+1),O(w,K).call(w,"frame",{type:"Frame",id:O(w,T),data:e,timestamp:new Date,mime_type:t}))}}),E(this,J,{writable:!0,value:function(e){var t="mouseout";return e.in&&(t=e.down?"mousedown":"mouseup"),O(w,K).call(w,"mouse",{type:"Mouse",x:e.x/window.innerWidth,y:e.y/window.innerHeight,state:t,timestamp:new Date})}}),E(this,ee,{writable:!0,value:function(){return O(w,L).isRunning()||(P("start frames"),O(w,L).start()),w}}),P("session context constructed"),this.session=t,this.delegate=r,j(this,M,n),j(this,k,new o.default(t)),a.WindowTracking.on("activate",O(this,X)),window.addEventListener("focus",O(this,X),{capture:!0,passive:!0}),window.addEventListener("hashchange",O(this,$),{capture:!0,passive:!0}),a.MouseTracking.onChange=O(this,J),O(this,q).call(this,t),t.on("updated",O(this,q)),t.on("ended",O(this,V)),t.on("sync",O(this,A)),t.on("drawing",O(this,D)),t.on("laser",O(this,R)),t.on("control",O(this,F)),t.once("stream-open",(function(){return O(w,X).call(w)}))}));function re(e){var t,r=this,n=(g(t={},d.SESSION_EVENT_TYPE_MOUSE,f.SESSION_CAPABILITY_TYPE_POINTER),g(t,d.SESSION_EVENT_TYPE_TOUCH,f.SESSION_CAPABILITY_TYPE_POINTER),g(t,d.SESSION_EVENT_TYPE_POINTER,f.SESSION_CAPABILITY_TYPE_POINTER),g(t,d.SESSION_EVENT_TYPE_FOCUS,[f.SESSION_CAPABILITY_TYPE_KEYPRESS,f.SESSION_CAPABILITY_TYPE_POINTER]),g(t,d.SESSION_EVENT_TYPE_KEYPRESS,f.SESSION_CAPABILITY_TYPE_KEYPRESS),g(t,d.SESSION_EVENT_TYPE_SCROLL,f.SESSION_CAPABILITY_TYPE_SCROLL),g(t,d.SESSION_EVENT_TYPE_CHANGE,[f.SESSION_CAPABILITY_TYPE_KEYPRESS,f.SESSION_CAPABILITY_TYPE_POINTER]),g(t,d.SESSION_EVENT_TYPE_INPUT,[f.SESSION_CAPABILITY_TYPE_KEYPRESS,f.SESSION_CAPABILITY_TYPE_POINTER]),g(t,d.SESSION_EVENT_TYPE_LASER,f.SESSION_CAPABILITY_TYPE_LASER),g(t,d.SESSION_EVENT_TYPE_DRAWING,f.SESSION_CAPABILITY_TYPE_DRAWING),g(t,d.SESSION_EVENT_TYPE_SELECT,f.SESSION_CAPABILITY_TYPE_SELECT),t);return(Array.isArray(n[e.type])?n[e.type]:[n[e.type]]).some((function(e){return r.session.capabilities.includes(e)}))}t.default=te},5011:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SESSION_EVENT_TYPE_TOUCH=t.SESSION_EVENT_TYPE_SELECT=t.SESSION_EVENT_TYPE_SCROLL=t.SESSION_EVENT_TYPE_POINTER=t.SESSION_EVENT_TYPE_MOUSE=t.SESSION_EVENT_TYPE_LASER=t.SESSION_EVENT_TYPE_KEYPRESS=t.SESSION_EVENT_TYPE_INPUT=t.SESSION_EVENT_TYPE_FOCUS=t.SESSION_EVENT_TYPE_DRAWING=t.SESSION_EVENT_TYPE_CHANGE=void 0,t.SESSION_EVENT_TYPE_MOUSE="Mouse",t.SESSION_EVENT_TYPE_TOUCH="Touch",t.SESSION_EVENT_TYPE_POINTER="Pointer",t.SESSION_EVENT_TYPE_FOCUS="Focus",t.SESSION_EVENT_TYPE_KEYPRESS="KeyPress",t.SESSION_EVENT_TYPE_SCROLL="Scroll",t.SESSION_EVENT_TYPE_CHANGE="Change",t.SESSION_EVENT_TYPE_INPUT="Input",t.SESSION_EVENT_TYPE_LASER="Laser",t.SESSION_EVENT_TYPE_DRAWING="Drawing",t.SESSION_EVENT_TYPE_SELECT="Select"},1713:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(5547),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(3600),r(3114),r(1624),r(1e3),r(2047),r(1157),r(8534);var o=a(r(2260)),i=a(r(3440));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function c(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}function l(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function f(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,p(e,t,"get"))}function d(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,p(e,t,"set"),r),r}function p(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var h=new WeakMap,y=new WeakMap,v=new WeakMap,m=new WeakMap,b=new WeakMap,g=new WeakMap,w=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,h,{writable:!0,value:void 0}),l(this,y,{writable:!0,value:void 0}),l(this,v,{writable:!0,value:void 0}),c(this,"open",(function(){f(r,h).isEnded()||(f(r,b).call(r),f(r,g).call(r))})),c(this,"close",(function(){window.removeEventListener("visibilitychange",r.onVisibilityChange),f(r,h)&&(f(r,h).removeListener("updated",r.open),d(r,h,null)),f(r,v)&&(f(r,v).close(),d(r,v,null)),f(r,y)&&(f(r,y).close(),d(r,y,null))})),l(this,m,{writable:!0,value:function(e,t){var n=new o.default({getUrl:function(){return(0,i.default)(e,f(r,h).field(t))}});return n.on("error",(function(e){console.warn("CobrowseIO session socket error:",e)})),n}}),l(this,b,{writable:!0,value:function(){var e=f(r,h).field("control_url"),t=f(r,h).field("control_token");e&&t&&!f(r,y)&&(d(r,y,f(r,m).call(r,e,"control_token")),f(r,y).on("open",(function(){f(r,y).send("filter",{events:["session"]}),f(r,h).fetch().catch((function(e){console.warn("CobrowseIO failed fetching session state",e)}))})),f(r,y).on("event",(function(e,t){"session"===e&&f(r,h).updateResource(t)})))}}),l(this,g,{writable:!0,value:function(){var e=f(r,h).field("stream_url"),t=f(r,h).field("stream_token");if(e&&t&&!f(r,v)){d(r,v,f(r,m).call(r,e,"stream_token"));var n=["drawing","laser","url"],o=["touch","mouse","pointer","keypress","scroll","focus","input","change","select"];f(r,v).on("event",(function(e,t){"sync"===e?f(r,h).emit("sync",t):"probe"===e?f(r,v).send("alive",t):n.includes(e)?f(r,h).emit(e,t):o.includes(e)&&f(r,h).emit("control",e,t)})),f(r,v).on("open",(function(){f(r,v).send("filter",{events:[].concat(o,n,["sync","probe"])}),f(r,h).emit("stream-open")}))}}}),d(this,h,t),t.on("updated",this.open),this.open()}var t,r;return t=e,(r=[{key:"stream",get:function(){return f(this,v)}}])&&u(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=w},1640:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(6257),r(6486),r(3524),r(5547),r(8496),r(4802),r(2112),r(6353),r(3064),r(3275),Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStorage=void 0,r(6941),r(1624),r(1e3),r(8719),r(2047),r(8534),r(4011),r(3114),r(3600),r(6770),r(1157);var o,i=r(7054),a=r(4603);function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(){c=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),u=new P(n||[]);return o(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function y(){}function v(){}var m={};l(m,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,a)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(o,a,u,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,u,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),l(w,s,"Generator"),l(w,a,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function l(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){d(i,n,o,a,u,"next",e)}function u(e){d(i,n,o,a,u,"throw",e)}a(void 0)}))}}function h(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function y(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function v(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,b(e,t,"get"))}function m(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,b(e,t,"set"),r),r}function b(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var g=(0,((o=r(9796))&&o.__esModule?o:{default:o}).default)("cbio.sessionStorage"),w=new WeakMap,E=new WeakMap,S=new WeakMap,_=function(){function e(t){var r=t.load,n=void 0===r?[]:r,o=t.store,i=void 0===o?[]:o,a=t.retain,u=void 0===a?[]:a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,w,{writable:!0,value:void 0}),y(this,E,{writable:!0,value:void 0}),y(this,S,{writable:!0,value:void 0}),m(this,w,n),m(this,E,i),m(this,S,u)}var t,r,n,o,l;return t=e,r=[{key:"load",value:(l=p(c().mark((function e(t){var r,n,o,i,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g("loading session"),r=s(v(this,w)),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=21;break}return o=n.value,e.next=8,o.load(t);case 8:return i=e.sent,e.next=11,null==i?void 0:i.fetch();case 11:if(!(a=e.sent)){e.next=19;break}if(!a.isActive()){e.next=17;break}return e.abrupt("return",a);case 17:return e.next=19,o.store(null);case 19:e.next=4;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),r.e(e.t0);case 26:return e.prev=26,r.f(),e.finish(26);case 29:return e.abrupt("return",null);case 30:case"end":return e.stop()}}),e,this,[[2,23,26,29]])}))),function(e){return l.apply(this,arguments)})},{key:"store",value:(o=p(c().mark((function e(t){var r,n,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g("storing session"),r=s(v(this,E)),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=20;break}return o=n.value,e.prev=6,e.next=9,o.store(t);case 9:if(e.t0=e.sent,!0!==e.t0){e.next=13;break}return g("stopping store() chain early due to",o),e.abrupt("break",20);case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(6),console.error("Unexpected error storing session: ".concat(o.constructor.name),e.t1);case 18:e.next=4;break;case 20:e.next=25;break;case 22:e.prev=22,e.t2=e.catch(2),r.e(e.t2);case 25:return e.prev=25,r.f(),e.finish(25);case 28:case"end":return e.stop()}}),e,this,[[2,22,25,28],[6,15]])}))),function(e){return o.apply(this,arguments)})},{key:"destroy",value:function(){var e,t=this,r=s(new Set([].concat(u(v(this,w)),u(v(this,E))).filter((function(e){return!v(t,S).includes(e)}))));try{for(r.s();!(e=r.n()).done;)e.value.destroy()}catch(e){r.e(e)}finally{r.f()}m(this,w,null),m(this,E,null),m(this,S,null)}}],n=[{key:"create",value:function(t,r,n){var o=n.localStorage;if(t.length>1){var u=new i.ForwardingSessionStorage(t),c=new a.IframeSessionStorage(t,r);return new e({load:[u,o,c],store:[o,c,u],retain:[o]})}return new e({load:[o],store:[o],retain:[o]})}}],r&&h(t.prototype,r),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.SessionStorage=_},6362:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Session",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"SessionCapabilities",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"SessionContext",{enumerable:!0,get:function(){return o.default}});var n=a(r(4914)),o=a(r(2001)),i=a(r(1826));function a(e){return e&&e.__esModule?e:{default:e}}},2767:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveSessionPath=void 0,t.ActiveSessionPath="_cobrowse_active_session"},7054:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(6257),r(6941),r(6486),r(3524),r(5547),Object.defineProperty(t,"__esModule",{value:!0}),t.ForwardingSessionStorage=void 0,t.extractActiveSession=S,r(1624),r(1e3),r(2047),r(8534),r(6955),r(8927),r(1157),r(9280),r(3114),r(7285);var o=u(r(7368)),i=u(r(4914)),a=r(2767);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function l(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function p(e,t){y(e,t),t.add(e)}function h(e,t,r){y(e,t),t.set(e,r)}function y(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function m(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,g(e,t,"get"))}function b(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,g(e,t,"set"),r),r}function g(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var w=(0,u(r(9796)).default)("cbio.sessionStorage.ForwardingSessionStorage"),E=S();function S(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=void 0===e?window:e;try{var r=new URL(t.location.href),n=r.searchParams.get(a.ActiveSessionPath);return n?(w("found forwarded session that can be loaded",n),r.searchParams.delete(a.ActiveSessionPath),t.history.replaceState({},"",r)):w("no forwarded session to load",r),n}catch(e){console.warn("Failed to attempt to extract forwarded session",e)}}var _=new WeakMap,O=new WeakMap,j=new WeakMap,x=new WeakMap,P=new WeakMap,k=new WeakMap,T=new WeakMap,L=new WeakMap,I=new WeakSet,C=new WeakSet,M=new WeakSet,N=new WeakSet,A=new WeakSet,R=new WeakSet,D=new WeakSet,F=new WeakSet,W=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.window,o=void 0===n?window:n,i=r.HtmlFormElement,a=void 0===i?HTMLFormElement:i,u=r.activeSessionData,c=void 0===u?E:u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,F),p(this,D),p(this,R),p(this,A),p(this,N),p(this,M),p(this,C),p(this,I),h(this,_,{writable:!0,value:void 0}),h(this,O,{writable:!0,value:void 0}),h(this,j,{writable:!0,value:void 0}),h(this,x,{writable:!0,value:void 0}),h(this,P,{writable:!0,value:void 0}),h(this,k,{writable:!0,value:void 0}),h(this,T,{writable:!0,value:void 0}),h(this,L,{writable:!0,value:void 0}),b(this,_,o),b(this,O,a),b(this,j,t||[]),b(this,x,c)}var t,r;return t=e,(r=[{key:"isSupported",value:function(){return w("isSupported?",!0),!0}},{key:"load",value:function(e){try{if(m(this,x))return w("loading session",m(this,x)),new i.default(e)[o.default].decompress(m(this,x));w("no session to load")}catch(e){w("failed to load forwarded session",e)}return null}},{key:"store",value:function(e){v(this,F,H).call(this,e)?(w("storing active session by binding forwarding hooks"),b(this,P,e),v(this,M,U).call(this)):(w("removing active session by unbinding forwarding hooks"),this.destroy())}},{key:"destroy",value:function(){v(this,N,Y).call(this),b(this,P,void 0)}}])&&d(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function G(){var e=this;m(this,T)||(b(this,T,m(this,_).open),m(this,_).open=function(t){for(var r,n,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return(r=m(e,T)).call.apply(r,[m(e,_),null!==(n=v(e,D,V).call(e,t))&&void 0!==n?n:t].concat(i))})}function z(){var e=this;if(!m(this,L)){b(this,L,m(this,O).prototype.submit);var t=function(t){var r,n;t.action=null!==(r=v(e,D,V).call(e,t.action))&&void 0!==r?r:t.action;for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];(n=m(e,L)).call.apply(n,[t].concat(i))};m(this,O).prototype.submit=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];t.apply(void 0,[this].concat(r))}}}function U(){var e=this;if(!m(this,k)){b(this,k,[["click",function(t){return v(e,A,B).call(e,t)}],["submit",function(t){return v(e,R,q).call(e,t)}]]);var t,r=s(m(this,k));try{for(r.s();!(t=r.n()).done;){var n,o=t.value;(n=m(this,_).document).addEventListener.apply(n,c(o))}}catch(e){r.e(e)}finally{r.f()}}v(this,I,G).call(this),v(this,C,z).call(this)}function Y(){if(m(this,k)){var e,t=s(m(this,k));try{for(t.s();!(e=t.n()).done;){var r,n=e.value;(r=m(this,_).document).removeEventListener.apply(r,c(n))}}catch(e){t.e(e)}finally{t.f()}b(this,k,void 0)}m(this,T)&&(m(this,_).open=m(this,T),b(this,T,void 0)),m(this,L)&&(m(this,O).prototype.submit=m(this,L),b(this,L,void 0))}function B(e){var t,r=null==e||null===(t=e.target)||void 0===t?void 0:t.closest("a"),n=v(this,D,V).call(this,null==r?void 0:r.href);n&&(r.href=n.toString())}function q(e){var t,r=null==e||null===(t=e.target)||void 0===t?void 0:t.closest("form"),n=v(this,D,V).call(this,null==r?void 0:r.action);n&&(r.action=n.toString())}function V(e){if(!e)return w("not rewriting falsey url",e),null;if(!v(this,F,H).call(this))return w("not rewriting url due to non-active session",e),null;try{var t=new URL(e);return t.origin===m(this,_).location.origin?(w("not rewriting url because we are not changing origin",t.toString()),null):-1===m(this,j).indexOf(t.origin)?(w("not rewriting url due to non-trusted origin",t.toString()),null):(t.searchParams.set(a.ActiveSessionPath,m(this,P)[o.default].compress()),w("rewriting trusted url for an active session",{from:e,to:t.toString()}),"string"==typeof e?t.toString():t)}catch(e){return w("failed rewriting url",e),null}}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m(this,P);return null==e?void 0:e.isActive()}t.ForwardingSessionStorage=W},4603:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(5547),r(8496),r(4802),r(2112),r(6353),r(3064),r(3275),r(6941),r(6257),Object.defineProperty(t,"__esModule",{value:!0}),t.IframeSessionStorage=void 0,r(1624),r(1e3),r(2047),r(8534),r(6955),r(8927),r(7285),r(1157);var o=c(r(7368)),i=r(7345),a=c(r(4914)),u=r(2767);function c(e){return e&&e.__esModule?e:{default:e}}function s(){s=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),u=new P(n||[]);return o(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function y(){}function v(){}var m={};l(m,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,a)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(o,a,u,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,u,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),l(w,c,"Generator"),l(w,a,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function l(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){l(i,n,o,a,u,"next",e)}function u(e){l(i,n,o,a,u,"throw",e)}a(void 0)}))}}function d(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function p(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,y(e,t,"get"))}function h(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,y(e,t,"set"),r),r}function y(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var v=(0,c(r(9796)).default)("cbio.sessionStorage.IframeSessionStorage"),m=new WeakMap,b=function(){function e(t,r){var n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a={writable:!0,value:void 0},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n=this,o=m),o.set(n,a);var u=new URL("apps/iframe_storage/server.html",r);h(this,m,new i.TrustedOriginStorageClient(u.toString(),t))}var t,r,n,c,l;return t=e,r=[{key:"isSupported",value:(l=f(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(this,m).ready();case 2:return t=p(this,m)&&p(this,m).isCrossDomainSupported,v("isSupported?",t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"load",value:(c=f(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isSupported();case 2:if(e.sent){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,p(this,m).storage.getItem(u.ActiveSessionPath);case 6:if(!(r=e.sent)){e.next=12;break}return v("loading session"),e.abrupt("return",new a.default(t)[o.default].deserialize(JSON.parse(r)));case 12:return v("no session to load"),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"store",value:(n=f(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isSupported();case 2:if(e.sent){e.next=4;break}return e.abrupt("return",null);case 4:if(null==t||!t.isActive()){e.next=12;break}return v("storing active session"),r=JSON.stringify(t[o.default].serialize()),e.next=9,p(this,m).storage.setItem(u.ActiveSessionPath,r);case 9:return e.abrupt("return",!0);case 12:return v("deleting inactive session"),e.next=15,p(this,m).storage.removeItem(u.ActiveSessionPath);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"destroy",value:function(){var e;null===(e=p(this,m))||void 0===e||e.destroy(),h(this,m,void 0)}}],r&&d(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.IframeSessionStorage=b},9426:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(5547),Object.defineProperty(t,"__esModule",{value:!0}),t.LocalSessionStorage=void 0,r(1624),r(1e3),r(2047),r(1157),r(8534);var o=c(r(7368)),i=c(r(5901)),a=c(r(4914)),u=r(2767);function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function l(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,f(e,t,"get"))}function f(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var d=(0,c(r(9796)).default)("cbio.sessionStorage.LocalSessionStorage"),p=new WeakMap,h=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r=p,n={writable:!0,value:(0,i.default)()},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r),r.set(t,n)}var t,r;return t=e,(r=[{key:"isSupported",value:function(){return d("isSupported?",!0),!0}},{key:"load",value:function(e){var t=l(this,p).getItem(u.ActiveSessionPath);return t?(d("loading session"),new a.default(e)[o.default].deserialize(t)):(d("no session to load"),null)}},{key:"store",value:function(e){null!=e&&e.isActive()?(d("storing active session"),l(this,p).setItem(u.ActiveSessionPath,e[o.default].serialize())):(d("removing inactive session"),l(this,p).removeItem(u.ActiveSessionPath))}},{key:"destroy",value:function(){var e,t;t=void 0,function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e=this,f(e,p,"set"),t)}}])&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.LocalSessionStorage=h},5901:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}});var n,o=(n=r(59))&&n.__esModule?n:{default:n}},59:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{setItem:function(t,r){u();var n=JSON.stringify({value:r,group:e});a()?window.localStorage.setItem(t,n):o.default.set(t,n),i[t]=n},getItem:function(t){try{var r;(r=a()?window.localStorage&&window.localStorage.getItem(t):o.default.get(t))||(r=i[t]);var n=JSON.parse(r),u=n.value,c=n.group;return e&&e!==c?null:u}catch(e){return null}},removeItem:function(e){a()&&window.localStorage.removeItem(e),o.default.remove(e),i[e]=void 0}}};var n,o=(n=r(6734))&&n.__esModule?n:{default:n},i={};function a(){try{var e="_cobrowse_test_item";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}function u(){a()||u.done||(u.done=!0,console.warn("Warning: localStorage is not supported. Cobrowse falling back to cookie or in-memory storage and may not function as expected."))}},8487:function(e,t,r){r(5547),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(1624),r(1e3),r(2827),r(7639),r(6996),r(1366),r(3558),r(8852),r(8630),r(8858),r(6480),r(7219),r(2160),r(4289),r(8165),r(4613),r(3292),r(3748),r(9157),r(5529),r(4882),r(7233),r(1086),r(8786),r(5544),r(1304),r(3114),r(9244),r(2593),r(444),r(1076),r(5538);var n=r(5064);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===o(t)?t:String(t)}var s=new(a((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"el",(function(){return t._el||(t._el=document.createElement("img"),t._el.className="cbio_session_overlay",t._el.style.pointerEvents="none",t._el.style.width="10vw",t._el.style.height="100vh",t._el.style.position="fixed",t._el.style.zIndex="2147483647",t._el.style.display="none",t._el.style.top="0",t._el.style.left="0"),t._el})),u(this,"_arrayBufferToBase64",(function(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,o=0;o<n;o+=1)t+=String.fromCharCode(r[o]);return window.btoa(t)})),u(this,"update",(function(e){if(n.WindowTracking.isActive())if(e.image){var r=t.el().cloneNode(),o="data:".concat(e.mime_type,";base64,").concat(t._arrayBufferToBase64(e.image));r.style.left="".concat(100*e.x,"%"),r.style.top="".concat(100*e.y,"%"),r.style.height="".concat(100*e.height,"%"),r.style.width="".concat(100*e.width,"%"),r.style.display="block",r.src=o,document.body&&!t.el().parentNode&&document.body.appendChild(t.el()),r.decode().then((function(){t.el().replaceWith(r),setTimeout((function(){t._prevImage&&t._prevImage.remove(),t._prevImage=r}),1e3)})).catch((function(e){console.error(e)}))}else t.hide()})),u(this,"hide",(function(){t._prevImage&&(t._prevImage.remove(),t._prevImage=null),t.el().parentNode&&t.el().parentNode.removeChild(t.el())}))})));t.default=s},881:function(e,t,r){r(5547),r(1624),r(2047),r(8534),r(8496),r(4802),r(2112),r(6353),r(3064),r(3275),r(6941),r(6257),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(3114),r(1e3),r(9244),r(2593),r(444),r(1076),r(5538);var n,o=(n=r(2175))&&n.__esModule?n:{default:n};function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(){a=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,o){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),u=new P(o||[]);return n(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function y(){}function v(){}var m={};l(m,u,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,u)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function o(n,a,u,c){var s=d(e[n],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==i(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,u,c)}),(function(e){o("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return o("throw",e,u,c)}))}c(s.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),l(w,s,"Generator"),l(w,u,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function u(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function s(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===i(t)?t:String(t)}var d=s((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"content",(function(e,t){return'\n      <div class="cobrowse-dialog" style="color: #333; font-family:sans-serif; line-height:140%; position:fixed; padding:25px; background:white; border-radius:15px; z-index:2147483647; top:50px; left:50%; width:75%; max-width:350px; transform:translateX(-50%); box-shadow:0px 0px 15px #33333322; user-select: none;">\n          <div style="text-align:center; margin-top:10px; margin-bottom:20px"><b>'.concat(e,"</b></div>\n          <div>").concat(t,'</div>\n          <div style=\'float:right; margin-top:40px; color:rgb(0, 122, 255);\'>\n              <a class="cobrowse-button cobrowse-deny" style="cursor:pointer; padding:10px;">').concat(o.default.tr("DENY"),'</a>\n              <a class="cobrowse-button cobrowse-allow" style="cursor:pointer; padding:10px; font-weight: bold;">').concat(o.default.tr("ALLOW"),"</a>\n          </div>\n      </div>\n  ")})),l(this,"container",(function(){return t._container||(t._container=document.createElement("div"),t._container.style.background="rgba(50, 50, 50, 0.4)",t._container.style.position="fixed",t._container.style.zIndex="2147483647",t._container.style.bottom="0",t._container.style.top="0",t._container.style.left="0",t._container.style.right="0"),t._container})),l(this,"show",function(){var e,r=(e=a().mark((function e(r,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var o=t.container();t._container.innerHTML=t.content(r,n),o.querySelector(".cobrowse-allow").addEventListener("click",(function(){e(!0),t.hide()})),o.querySelector(".cobrowse-deny").addEventListener("click",(function(){e(!1),t.hide()})),document.body&&document.body.appendChild(o)})));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,c,"next",e)}function c(e){u(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}()),l(this,"hide",(function(){t.container().parentNode&&t.container().parentNode.removeChild(t.container())}))}));t.default=d},9486:function(e,t,r){r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9244),r(2593),r(444),r(1076),r(1e3),r(5538);var n=r(5064);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===o(t)?t:String(t)}var s=new(a((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"el",(function(){return t._el||(t._el=document.createElement("div"),t._el.className="cbio_session_overlay",t._el.style.border="border: 1px solid white",t._el.style.borderRadius="15px",t._el.style.background="red",t._el.style.position="fixed",t._el.style.zIndex="2147483647",t._el.style.height="15px",t._el.style.width="15px",t._el.style.marginLeft="-7.5px",t._el.style.marginTop="-7.5px"),t._el})),u(this,"update",(function(e){n.WindowTracking.isActive()&&(document.body&&!t.el().parentNode&&document.body.appendChild(t.el()),"touchend"===e.state?t.hide():(t.el().style.left="".concat(100*e.x,"%"),t.el().style.top="".concat(100*e.y,"%")))})),u(this,"hide",(function(){t.el().parentNode&&t.el().parentNode.removeChild(t.el())}))})));t.default=s},9444:function(e,t,r){r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9244),r(2593),r(444),r(1076),r(1e3),r(5538);var n=r(5064),o=r(7743);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function u(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===i(t)?t:String(t)}var l=new(u((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"el",(function(){return t._el||(t._el=document.createElementNS("http://www.w3.org/2000/svg","svg"),t._el.setAttribute("class","__cbio_ignored"),t._el.setAttribute("viewBox","0 0 320 512"),t._el.style.position="fixed",t._el.style.zIndex="2147483647",t._el.style.height="25px",t._el.style.width="25px",t._el.style.marginLeft="-7px",t._el.style.marginTop="-1px",t._el.style.opacity=.7,t._path=document.createElementNS("http://www.w3.org/2000/svg","path"),t._path.setAttribute("d","M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z"),t._path.setAttribute("stroke","white"),t._path.setAttribute("stroke-width","40"),t._path.setAttribute("opacity",1),t._path.setAttribute("fill","blue"),t._el.appendChild(t._path)),t._el})),c(this,"_updatePosition",(function(e){var r,n,i,a,u=e.x,c=e.y;u*=null===(r=window.document)||void 0===r||null===(n=r.documentElement)||void 0===n?void 0:n.clientWidth,c*=null===(i=window.document)||void 0===i||null===(a=i.documentElement)||void 0===a?void 0:a.clientHeight;var s=o.NodeTracker.getById(e.target.id);if(s){var l=s.ownerDocument,f=l&&l.defaultView&&l.defaultView.frameElement;if(f){var d=f.getBoundingClientRect();u+=Math.round(d.left),c+=Math.round(d.top)}t.el().style.top="".concat(c,"px"),t.el().style.left="".concat(u,"px")}})),c(this,"update",(function(e,r){if("mouse"===e&&n.WindowTracking.isActive())switch(document.body&&!t.el().parentNode&&document.body.appendChild(t.el()),r.state){case"mousedown":t.el().style.opacity=1;break;case"mouseup":t.el().style.opacity=.7;break;case"mousemove":t._updatePosition(r)}})),c(this,"hide",(function(){t.el().parentNode&&t.el().parentNode.removeChild(t.el())}))})));t.default=l},1457:function(e,t,r){r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9244),r(2593),r(444),r(1076),r(1e3),r(5538);var n=i(r(1178)),o=i(r(2175));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}var f=new(c((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"el",(function(){return t._el||(t._el=document.createElement("div"),t._el.className="__cbio_ignored cbio_session_controls",t._el.textContent=o.default.tr("END_SESSION"),t._el.style.fontFamily="sans-serif",t._el.style.padding="10px 13px",t._el.style.fontSize="13px",t._el.style.whiteSpace="nowrap",t._el.style.color="white",t._el.style.boxShadow="0px 2px 5px #33333344",t._el.style.cursor="pointer",t._el.style.borderRadius="30px",t._el.style.background="rgb(234, 91, 80)",t._el.style.position="fixed",t._el.style.zIndex="2147483647",t._el.style.bottom="20px",t._el.style.left="50%",t._el.style.transform="translateX(-50%)",t._el.style.userSelect="none",t._el.addEventListener("click",t._onEnd)),t._el})),s(this,"_onEnd",(function(){var e=n.default.currentSession;e&&e.isActive()&&e.end()})),s(this,"show",(function(){document.body&&!t.el().parentNode&&document.body.appendChild(t.el())})),s(this,"hide",(function(){t.el().parentNode&&t.el().parentNode.removeChild(t.el())}))})));t.default=f},3172:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,r){return(t=u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9244),r(2593),r(444),r(1076),r(1e3),r(5538);var c=new(i((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"content",(function(e){return'\n      <div style="color: white; font-family:sans-serif; margin-bottom: 10px; line-height:140%; padding:10px; font-size: 12px; font-weight: bold; background:#292d33; border-radius:5px; width:250px; box-shadow:0px 0px 15px #33333322;">\n          '.concat(e,"\n      </div>\n  ")})),a(this,"container",(function(){var e=document.createElement("div");return e.style.position="fixed",e.style.zIndex="2147483647",e.style.color="#fff",e.style.top="20px",e.style.right="20px",e.style.transition="all 0.3s linear",e.style.opacity=0,e.style.pointerEvents="none",e})),a(this,"show",(function(e){var r=t.container();r.innerHTML=t.content(e),document.body&&document.body.appendChild(r),setTimeout((function(){r.style.opacity=1}),0),setTimeout((function(){r.style.opacity=0,setTimeout((function(){r.parentNode&&r.parentNode.removeChild(r)}),500)}),8e3)})),a(this,"hide",(function(){t.container().parentNode&&t.container().parentNode.removeChild(t.container())}))})));t.default=c},3042:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnnotationOverlay",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"ConsentDialog",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"LaserOverlay",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"RemoteCursor",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"SessionStateOverlay",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"Toast",{enumerable:!0,get:function(){return c.default}});var n=s(r(8487)),o=s(r(9486)),i=s(r(9444)),a=s(r(1457)),u=s(r(881)),c=s(r(3172));function s(e){return e&&e.__esModule?e:{default:e}}},2260:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(9244),r(2593),r(444),r(1076),r(5538),r(3064),r(9616),r(5547),r(8496),r(4802),r(2112),r(6353),r(3275),r(6941),r(6257),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(1624),r(1e3),r(2827),r(7639),r(6996),r(1366),r(3558),r(8852),r(8630),r(8858),r(6480),r(7219),r(2160),r(4289),r(8165),r(4613),r(3292),r(3748),r(9157),r(5529),r(4882),r(7233),r(1086),r(8786),r(5544),r(1304),r(2047),r(1157),r(8534);var o,i=r(3936),a=(o=r(9796))&&o.__esModule?o:{default:o},u=r(1239);function c(){c=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),u=new P(n||[]);return o(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function y(){}function v(){}var m={};l(m,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,a)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(o,a,u,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,u,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),l(w,s,"Generator"),l(w,a,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function s(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,u,"next",e)}function u(e){s(i,n,o,a,u,"throw",e)}a(void 0)}))}}function f(e,t,r){return f=y()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&p(o,r.prototype),o},f.apply(null,arguments)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function m(e,t,r){return(t=b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}function g(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function w(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,S(e,t,"get"))}function E(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,S(e,t,"set"),r),r}function S(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var _=(0,a.default)("cbio.CBORSocket"),O=new WeakMap,j=new WeakMap,x=new WeakMap,P=new WeakMap,k=new WeakMap,T=new WeakMap,L=new WeakMap,I=new WeakMap,C=new WeakMap,M=new WeakMap,N=new WeakMap,A=new WeakMap,R=new WeakMap,D=new WeakMap,F=new WeakMap,W=new WeakMap,G=new WeakMap,z=new WeakMap,U=new WeakMap,Y=new WeakMap,B=new WeakMap,q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(s,e);var t,r,o,a,u=(o=s,a=y(),function(){var e,t=v(o);if(a){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,e)});function s(e){var t,r,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).socketFactory,o=void 0===n?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return f(WebSocket,t)}:n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),g(h(t=u.call(this)),O,{writable:!0,value:void 0}),g(h(t),j,{writable:!0,value:!1}),g(h(t),x,{writable:!0,value:void 0}),g(h(t),P,{writable:!0,value:void 0}),g(h(t),k,{writable:!0,value:0}),g(h(t),T,{writable:!0,value:6e4}),g(h(t),L,{writable:!0,value:1e3+Math.floor(1e3*Math.random())}),g(h(t),I,{writable:!0,value:void 0}),g(h(t),C,{writable:!0,value:void 0}),g(h(t),M,{writable:!0,value:void 0}),g(h(t),N,{writable:!0,value:0}),g(h(t),A,{writable:!0,value:0}),g(h(t),R,{writable:!0,value:(r=l(c().mark((function e(){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w(h(t),P)){e.next=3;break}return console.error("Socket already exists"),e.abrupt("return");case 3:return _("creating ws"),e.next=6,w(h(t),O).getUrl();case 6:if(r=e.sent,!w(h(t),j)){e.next=9;break}return e.abrupt("return");case 9:if(!w(h(t),P)){e.next=11;break}return e.abrupt("return");case 11:(n=w(h(t),x).call(h(t),r)).binaryType="arraybuffer",n.addEventListener("open",w(h(t),D)),n.addEventListener("message",w(h(t),W)),n.addEventListener("close",w(h(t),U)),n.addEventListener("error",w(h(t),Y)),E(h(t),P,n);case 18:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})}),g(h(t),D,{writable:!0,value:function(){_("ws opened"),t.emit("open"),clearTimeout(w(h(t),C)),E(h(t),C,setTimeout((function(){_("counting open as success"),E(h(t),k,0)}),5e3))}}),g(h(t),F,{writable:!0,value:function(e){E(h(t),A,e)}}),g(h(t),W,{writable:!0,value:function(e){try{var r=(0,i.decode)(new Uint8Array(e.data)),n=r.event,o=r.data,a=r.ack;return a?w(h(t),F).call(h(t),a):n?t.emit("event",n,o):console.error("Socket received message without event",e)}catch(t){return console.error("Error processing message",e.data,t.stack)}}}),g(h(t),G,{writable:!0,value:function(e){var r=1+.5*Math.random(),n=Math.floor(Math.pow(300*e,1.2)*r);return Math.min(Math.max(w(h(t),L),n),w(h(t),T))}}),g(h(t),z,{writable:!0,value:function(){if(w(h(t),j))_("reconnect skipped as socket was closed");else if(w(h(t),M))_("reconnect skipped as reconnect already scheduled");else{if(!1===navigator.onLine)return _("navigator offline"),void E(h(t),M,setTimeout((function(){E(h(t),M,null),w(h(t),z).call(h(t))}),1e3));var e=w(h(t),G).call(h(t),w(h(t),k));_("reconnecting in",e,"attempts",w(h(t),k)),E(h(t),M,setTimeout(l(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(h(t),M,null),!w(h(t),j)){e.next=5;break}console.warn("tried to reconnect after close"),e.next=8;break;case 5:return E(h(t),P,null),e.next=8,w(h(t),R).call(h(t)).catch(w(h(t),Y));case 8:case"end":return e.stop()}}),e)}))),e)),E(h(t),k,w(h(t),k)+1)}}}),g(h(t),U,{writable:!0,value:function(){_("ws closed"),t.emit("close"),_("resetting message acks"),E(h(t),N,0),E(h(t),A,0),w(h(t),j)||w(h(t),z).call(h(t)),clearTimeout(w(h(t),C))}}),g(h(t),Y,{writable:!0,value:function(e){w(h(t),j)?console.info("CobrowseIO: Called error after close.",e):0!==t.listenerCount("error")?t.emit("error",e):console.warn("CobrowseIO: Called handleError without listeners. Please report this.",e)}}),g(h(t),B,{writable:!0,value:function(){t.send("ping")}}),m(h(t),"messageLag",(function(){return w(h(t),A)?w(h(t),N)-w(h(t),A):0})),m(h(t),"setMaxReconnectDelay",(function(e){_("set max delay",e),E(h(t),T,e)})),m(h(t),"setMinReconnectDelay",(function(e){_("set min delay",e),E(h(t),L,e)})),m(h(t),"send",(function(e,r){if(!t.connected)return!1;E(h(t),N,w(h(t),N)+1);var n=Date.now(),o=(0,i.encode)(r?{event:e,id:w(h(t),N),data:r}:{event:e});return _("encoded","".concat(o.byteLength," bytes"),"in","".concat(Date.now()-n,"ms")),w(h(t),P).send(o),!0})),m(h(t),"close",(function(){if(_("close"),E(h(t),j,!0),w(h(t),P))try{var e;(e=w(h(t),P)).close.apply(e,arguments)}catch(e){_("error closing socket",e)}E(h(t),P,null),clearTimeout(w(h(t),M)),clearInterval(w(h(t),I)),t.removeAllListeners(),window.removeEventListener("unload",t.close)})),_("created cbor socket"),E(h(t),O,e),E(h(t),x,o),E(h(t),I,setInterval(w(h(t),B),6e4)),window.addEventListener("unload",t.close),t.on("error",(function(e){return _("ws errored",e)})),w(h(t),R).call(h(t)).catch(w(h(t),Y)),t}return t=s,(r=[{key:"bufferedAmount",get:function(){return w(this,P)?w(this,P).bufferedAmount:1/0}},{key:"connected",get:function(){return!!w(this,P)&&w(this,P).readyState===w(this,P).OPEN}}])&&d(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(u.EventEmitter);t.default=q},6683:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9244),r(2593),r(444),r(1076),r(1e3),r(5538);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"fromImage",value:function(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,t.width,t.height),this.fromCanvas(t)}},{key:"fromCanvas",value:function(e){return e.toDataURL?e.toDataURL("image/webp",.3):null}}],null&&o(t.prototype,null),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=i},9421:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(4011),r(1e3),r(9244),r(2593),r(444),r(1076),r(5538);var i=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rate=t,this.period=r,this._tracked=[]}var t,r;return t=e,(r=[{key:"limit",value:function(){var e=Date.now()-this.period;return this._tracked=this._tracked.filter((function(t){return t>e})),!(this._tracked.length<this.rate&&(this._tracked.push(Date.now()),1))}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=i},8755:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function u(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}r(3064),r(9616),r(5547),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(1624),r(1e3),r(8719),r(2047),r(8534),r(3524),r(9344),r(9244),r(2593),r(444),r(1076),r(5538);var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,c,s=(r=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(r);if(c){var o=a(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)}(this,e)});function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),u(i(e=s.call(this)),"windows",new Set),u(i(e),"tap",(function(t){if(!e.windows.has(t)){e.windows.add(t);var r=i(e),n=t.history.pushState.bind(t.history);t.history.pushState=function(){n.apply(void 0,arguments),r.emit("navigate",t)};var o=t.history.replaceState.bind(t.history);t.history.replaceState=function(){o.apply(void 0,arguments),r.emit("navigate",t)};var a=t.CSSStyleSheet.prototype.insertRule;t.CSSStyleSheet.prototype.insertRule=function(){var e=a.bind(this).apply(void 0,arguments);return r.emit("stylechange",this),e};var u=t.CSSStyleSheet.prototype.deleteRule;t.CSSStyleSheet.prototype.deleteRule=function(){var e=u.bind(this).apply(void 0,arguments);return r.emit("stylechange",this),e};var c=t.CSSStyleSheet.prototype.replace;t.CSSStyleSheet.prototype.replace=function(){var e=c.bind(this).apply(void 0,arguments);return r.emit("stylechange",this),e};var s=t.CSSStyleSheet.prototype.replaceSync;t.CSSStyleSheet.prototype.replaceSync=function(){var e=s.bind(this).apply(void 0,arguments);return r.emit("stylechange",this),e}}})),u(i(e),"untap",(function(){})),e.setMaxListeners(200),e}return t=l,Object.defineProperty(t,"prototype",{writable:!1}),t}(r(1239).EventEmitter),l=new s;t.default=l},1560:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(444),r(1076),r(5547),r(1624),r(2047),r(8534),r(8496),r(4802),r(2112),r(6353),r(3064),r(3275),r(6941),r(6257),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return u.apply(this,arguments)},r(1e3);var o=r(7743);function i(){i=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),u=new P(n||[]);return o(a,"_invoke",{value:_(e,r,u)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function y(){}function v(){}var m={};l(m,u,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,u)&&(m=g);var w=v.prototype=h.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(o,a,u,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=d(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),l(w,s,"Generator"),l(w,u,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function a(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function u(){var e;return e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.NodeSerializer.isLocalResource(window.location.href)&&console.warn("CobrowseIO: This page was loaded from a local address, Cobrowse may not work as expected due to inaccessible resources. We recommend using ngrok for testing development versions.");case 1:case"end":return e.stop()}}),e)})),u=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function u(e){a(i,n,o,u,c,"next",e)}function c(e){a(i,n,o,u,c,"throw",e)}u(void 0)}))},u.apply(this,arguments)}},2275:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getScrollBarSize=function(){if(null==r){var e=document.createElement("div");e.style.cssText="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -500px; left: -500px; margin: 0px; padding: 0px; border: none;",document.body.appendChild(e),r=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return r};var r=null},3440:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.default,n=["X-CobrowseSDKVersion=".concat(r.version),"X-CobrowsePlatform=web","X-CobrowseDevice=".concat(r.deviceId()),"X-CobrowseLicense=".concat(r.license)].join("&"),i=new URL(e,r.api).toString().replace("https://","wss://").replace("http://","ws://");return new URL("sockets/1/ws?access_token=".concat(t,"&").concat(n),i).toString()},r(887),r(1e3),r(7285),r(1624),r(2047),r(8534),r(6955),r(8927),r(3524),r(9344),r(3114);var n,o=(n=r(1178))&&n.__esModule?n:{default:n}},7368:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.protect=function(e,t,r){e[n]||Object.defineProperty(e,n,{enumerable:!1,value:{}});var o=e[n][t];return Object.getPrototypeOf(Object.getPrototypeOf(e))[t]=o,Object.defineProperty(e[n],t,{enumerable:!1,value:r,configurable:!0}),r},r(444),r(1076),r(1e3),r(3064);var n=Symbol("protected"),o=n;t.default=o},453:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,r="",n=e;n>0;n-=1)r+=t[Math.floor(Math.random()*t.length)];return r},r(3114);var n="abcdefghijklmnopqrstuvwxyz",o="".concat("0123456789").concat(n.toLowerCase()).concat(n.toUpperCase())},3191:function(e,t,r){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}r(5547),r(1624),r(2047),r(8534),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(3600),r(6770),r(9244),r(2593),r(444),r(1076),r(1e3),r(5538);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"isHeadless",value:function(){return navigator.userAgent.toLowerCase().includes("headless")}}],null&&o(t.prototype,null),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=i},4039:function(e,t){var r,n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.Node=t.MutationObserver=t.Element=void 0;try{o=document.createElement("iframe"),document.documentElement.appendChild(o),o.style.display="none",o.className="__cbio_ignored",o.width=0,o.height=0}catch(e){console.warn("Failed to create unpolyfill iframe",e)}var i=null!==(r=null===(n=o)||void 0===n?void 0:n.contentWindow)&&void 0!==r?r:window,a=i.Node,u=i.Element,c=i.MutationObserver;t.MutationObserver=c,t.Element=u,t.Node=a},3936:function(e){e.exports=require("cbor-x")},3114:function(e){e.exports=require("core-js/modules/es.array.concat.js")},5220:function(e){e.exports=require("core-js/modules/es.array.fill.js")},4011:function(e){e.exports=require("core-js/modules/es.array.filter.js")},6706:function(e){e.exports=require("core-js/modules/es.array.find.js")},5793:function(e){e.exports=require("core-js/modules/es.array.flat-map.js")},6486:function(e){e.exports=require("core-js/modules/es.array.from.js")},3600:function(e){e.exports=require("core-js/modules/es.array.includes.js")},1624:function(e){e.exports=require("core-js/modules/es.array.iterator.js")},887:function(e){e.exports=require("core-js/modules/es.array.join.js")},3133:function(e){e.exports=require("core-js/modules/es.array.map.js")},6257:function(e){e.exports=require("core-js/modules/es.array.slice.js")},1896:function(e){e.exports=require("core-js/modules/es.array.sort.js")},3794:function(e){e.exports=require("core-js/modules/es.array.splice.js")},1861:function(e){e.exports=require("core-js/modules/es.array.unscopables.flat-map.js")},2593:function(e){e.exports=require("core-js/modules/es.date.to-primitive.js")},6941:function(e){e.exports=require("core-js/modules/es.function.name.js")},2112:function(e){e.exports=require("core-js/modules/es.json.to-string-tag.js")},4391:function(e){e.exports=require("core-js/modules/es.map.js")},6353:function(e){e.exports=require("core-js/modules/es.math.to-string-tag.js")},5538:function(e){e.exports=require("core-js/modules/es.number.constructor.js")},6369:function(e){e.exports=require("core-js/modules/es.object.assign.js")},5226:function(e){e.exports=require("core-js/modules/es.object.get-own-property-descriptor.js")},9270:function(e){e.exports=require("core-js/modules/es.object.get-own-property-descriptors.js")},6565:function(e){e.exports=require("core-js/modules/es.object.get-own-property-names.js")},3064:function(e){e.exports=require("core-js/modules/es.object.get-prototype-of.js")},5128:function(e){e.exports=require("core-js/modules/es.object.keys.js")},1e3:function(e){e.exports=require("core-js/modules/es.object.to-string.js")},1087:function(e){e.exports=require("core-js/modules/es.object.values.js")},9616:function(e){e.exports=require("core-js/modules/es.reflect.construct.js")},1112:function(e){e.exports=require("core-js/modules/es.reflect.get.js")},9806:function(e){e.exports=require("core-js/modules/es.regexp.constructor.js")},3524:function(e){e.exports=require("core-js/modules/es.regexp.exec.js")},7285:function(e){e.exports=require("core-js/modules/es.regexp.to-string.js")},8719:function(e){e.exports=require("core-js/modules/es.set.js")},6770:function(e){e.exports=require("core-js/modules/es.string.includes.js")},2047:function(e){e.exports=require("core-js/modules/es.string.iterator.js")},3317:function(e){e.exports=require("core-js/modules/es.string.match.js")},5393:function(e){e.exports=require("core-js/modules/es.string.pad-start.js")},9344:function(e){e.exports=require("core-js/modules/es.string.replace.js")},685:function(e){e.exports=require("core-js/modules/es.string.split.js")},242:function(e){e.exports=require("core-js/modules/es.string.trim.js")},8496:function(e){e.exports=require("core-js/modules/es.symbol.async-iterator.js")},1076:function(e){e.exports=require("core-js/modules/es.symbol.description.js")},5547:function(e){e.exports=require("core-js/modules/es.symbol.iterator.js")},444:function(e){e.exports=require("core-js/modules/es.symbol.js")},9244:function(e){e.exports=require("core-js/modules/es.symbol.to-primitive.js")},4802:function(e){e.exports=require("core-js/modules/es.symbol.to-string-tag.js")},7639:function(e){e.exports=require("core-js/modules/es.typed-array.copy-within.js")},6996:function(e){e.exports=require("core-js/modules/es.typed-array.every.js")},1366:function(e){e.exports=require("core-js/modules/es.typed-array.fill.js")},3558:function(e){e.exports=require("core-js/modules/es.typed-array.filter.js")},8630:function(e){e.exports=require("core-js/modules/es.typed-array.find-index.js")},8852:function(e){e.exports=require("core-js/modules/es.typed-array.find.js")},8858:function(e){e.exports=require("core-js/modules/es.typed-array.for-each.js")},6480:function(e){e.exports=require("core-js/modules/es.typed-array.includes.js")},7219:function(e){e.exports=require("core-js/modules/es.typed-array.index-of.js")},2160:function(e){e.exports=require("core-js/modules/es.typed-array.iterator.js")},4289:function(e){e.exports=require("core-js/modules/es.typed-array.join.js")},8165:function(e){e.exports=require("core-js/modules/es.typed-array.last-index-of.js")},4613:function(e){e.exports=require("core-js/modules/es.typed-array.map.js")},3748:function(e){e.exports=require("core-js/modules/es.typed-array.reduce-right.js")},3292:function(e){e.exports=require("core-js/modules/es.typed-array.reduce.js")},9157:function(e){e.exports=require("core-js/modules/es.typed-array.reverse.js")},5529:function(e){e.exports=require("core-js/modules/es.typed-array.set.js")},4882:function(e){e.exports=require("core-js/modules/es.typed-array.slice.js")},7233:function(e){e.exports=require("core-js/modules/es.typed-array.some.js")},1086:function(e){e.exports=require("core-js/modules/es.typed-array.sort.js")},8786:function(e){e.exports=require("core-js/modules/es.typed-array.subarray.js")},5544:function(e){e.exports=require("core-js/modules/es.typed-array.to-locale-string.js")},1304:function(e){e.exports=require("core-js/modules/es.typed-array.to-string.js")},9382:function(e){e.exports=require("core-js/modules/es.typed-array.uint16-array.js")},2827:function(e){e.exports=require("core-js/modules/es.typed-array.uint8-array.js")},1157:function(e){e.exports=require("core-js/modules/es.weak-map.js")},9280:function(e){e.exports=require("core-js/modules/es.weak-set.js")},3275:function(e){e.exports=require("core-js/modules/web.dom-collections.for-each.js")},8534:function(e){e.exports=require("core-js/modules/web.dom-collections.iterator.js")},8927:function(e){e.exports=require("core-js/modules/web.url-search-params.js")},6955:function(e){e.exports=require("core-js/modules/web.url.js")},1320:function(e){e.exports=require("dompurify")},1239:function(e){e.exports=require("events")},2449:function(e){e.exports=require("events-polyfill/src/constructors")},2404:function(e){e.exports=require("fast-deep-equal")},6734:function(e){e.exports=require("js-cookie")},113:function(e){e.exports=require("lodash/isEqual")},1347:function(e){e.exports=require("lodash/isMatchWith")},1381:function(e){e.exports=require("lodash/throttle")},3231:function(e){e.exports=require("ms")},5828:function(e){e.exports=require("uuid")},995:function(e){e.exports=JSON.parse('{"ALLOW":"Allow","DENY":"Deny","END_SESSION":"End Cobrowse Session","FULL_DEVICE_REQUEST_DESCRIPTION":"A support agent would like to view your entire screen. Do you want to allow this?","FULL_DEVICE_REQUEST_TITLE":"Screen Capture Request","REMOTE_CONTROL_REQUEST_DESCRIPTION":"A support agent would like to control this page. Do you want to allow this?","REMOTE_CONTROL_REQUEST_TITLE":"Remote Control Request","SESSION_REQUEST_DESCRIPTION":"A support agent would like to temporarily use this web page with you. Do you want to allow this?","SESSION_REQUEST_TITLE":"Support Request"}')},5737:function(e){e.exports=JSON.parse('{"ALLOW":"Autoriser","DENY":"Refuser","END_SESSION":"Terminer la session de Cobrowse","FULL_DEVICE_REQUEST_DESCRIPTION":"Un agent de soutien souhaiterait voir l\'intgralit de votre cran. Donnez-vous votre autorisation ?","FULL_DEVICE_REQUEST_TITLE":"Demande de capture d\'cran","REMOTE_CONTROL_REQUEST_DESCRIPTION":"Un agent du soutien souhaiterait avoir le contrle de cette page. Donnez-vous votre autorisation ?","REMOTE_CONTROL_REQUEST_TITLE":"Demande de commande  distance","SESSION_REQUEST_DESCRIPTION":"Un agent de soutien souhaiterait temporairement utiliser cette page Web avec vous. Donnez-vous votre autorisation ?","SESSION_REQUEST_TITLE":"Demande de soutien"}')}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}var n={};return function(){var e=n;e.default=void 0;var t,o=(t=r(1178))&&t.__esModule?t:{default:t},i=o.default;if(window.__cobrowse_io_loaded)throw o.default=function(){throw new Error('"CobrowseIO" is read-only.')}(),new Error("CobrowseIO already loaded. This usually means you included the snippet multiple times.");window.__cobrowse_io_loaded=!0;var a=i;e.default=a}(),n.default}()}));