import"core-js/modules/es.error.cause.js";import{createPatternMatcher as e,CBORSocket as t,closestXdocParent as i,IFrameBridge as s,IFrameRPC as n,ActivityDetection as o,isValidPattern as a,isxdoc as r}from"cocom";import"core-js/modules/es.array.push.js";import"core-js/modules/es.iterator.constructor.js";import"core-js/modules/es.iterator.filter.js";import"core-js/modules/es.iterator.find.js";import"core-js/modules/es.iterator.for-each.js";import"core-js/modules/es.iterator.map.js";import"core-js/modules/es.regexp.constructor.js";import"core-js/modules/es.regexp.dot-all.js";import"core-js/modules/es.regexp.exec.js";import"core-js/modules/web.dom-collections.iterator.js";import"core-js/modules/web.url.js";import"core-js/modules/web.url.to-json.js";import"core-js/modules/web.url-search-params.js";import"core-js/modules/web.url-search-params.delete.js";import"core-js/modules/web.url-search-params.has.js";import"core-js/modules/web.url-search-params.size.js";import l from"lodash/throttle.js";import"core-js/modules/es.array.unshift.js";import"core-js/modules/es.iterator.some.js";import"core-js/modules/es.set.difference.v2.js";import"core-js/modules/es.set.intersection.v2.js";import"core-js/modules/es.set.is-disjoint-from.v2.js";import"core-js/modules/es.set.is-subset-of.v2.js";import"core-js/modules/es.set.is-superset-of.v2.js";import"core-js/modules/es.set.symmetric-difference.v2.js";import"core-js/modules/es.set.union.v2.js";import c,{EventEmitter as d}from"events";import"core-js/modules/es.iterator.reduce.js";import{v4 as h,v5 as u}from"uuid";import"core-js/modules/es.json.stringify.js";import"core-js/modules/esnext.json.parse.js";import E from"js-cookie";import _ from"debug";import p from"lodash/pick.js";import"core-js/modules/es.array.flat-map.js";import"core-js/modules/es.array.unscopables.flat-map.js";import"core-js/modules/es.array.flat.js";import"core-js/modules/es.array.sort.js";import"core-js/modules/es.array.unscopables.flat.js";import"core-js/modules/es.iterator.every.js";import"core-js/modules/es.promise.finally.js";import{useRef as I,useCallback as L,useEffect as m,useState as C,useMemo as N}from"preact/hooks";import{render as g,h as w}from"preact";import{jsx as v,jsxs as A,Fragment as S}from"preact/jsx-runtime";import{autoUpdate as f,computePosition as T,offset as O,flip as R,shift as y,arrow as b,hide as P,size as M}from"@floating-ui/dom";import"core-js/modules/es.symbol.description.js";import"core-js/modules/es.string.replace.js";import"core-js/modules/es.array.reverse.js";import"core-js/modules/es.iterator.to-array.js";import"core-js/modules/es.promise.all-settled.js";import k from"lodash/isMatchWith.js";import D from"lodash/omit.js";import G from"lodash/isEqual.js";import"core-js/modules/es.string.replace-all.js";import"core-js/modules/web.dom-exception.constructor.js";import"core-js/modules/web.dom-exception.stack.js";import"core-js/modules/web.dom-exception.to-string-tag.js";import U from"fast-deep-equal";import"core-js/modules/es.array-buffer.constructor.js";import"core-js/modules/es.array-buffer.slice.js";import"core-js/modules/es.array-buffer.detached.js";import"core-js/modules/es.array-buffer.transfer.js";import"core-js/modules/es.array-buffer.transfer-to-fixed-length.js";import"core-js/modules/es.string.trim.js";import"core-js/modules/es.typed-array.uint8-array.js";import"core-js/modules/es.typed-array.at.js";import"core-js/modules/es.typed-array.fill.js";import"core-js/modules/es.typed-array.find-last.js";import"core-js/modules/es.typed-array.find-last-index.js";import"core-js/modules/es.typed-array.set.js";import"core-js/modules/es.typed-array.sort.js";import"core-js/modules/es.typed-array.to-reversed.js";import"core-js/modules/es.typed-array.to-sorted.js";import"core-js/modules/es.typed-array.with.js";import"core-js/modules/esnext.uint8-array.set-from-base64.js";import"core-js/modules/esnext.uint8-array.set-from-hex.js";import"core-js/modules/esnext.uint8-array.to-base64.js";import"core-js/modules/esnext.uint8-array.to-hex.js";import W from"dompurify";import{clsx as x}from"clsx/lite";function V(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}function z(e){var t,i,s,n=2;for("undefined"!=typeof Symbol&&(i=Symbol.asyncIterator,s=Symbol.iterator);n--;){if(i&&null!=(t=e[i]))return t.call(e);if(s&&null!=(t=e[s]))return new F(t.call(e));i="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}function F(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return F=function(e){this.s=e,this.n=e.next},F.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var i=this.s.return;return void 0===i?Promise.resolve({value:e,done:!0}):t(i.apply(this.s,arguments))},throw:function(e){var i=this.s.return;return void 0===i?Promise.reject(e):t(i.apply(this.s,arguments))}},new F(e)}function j(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function B(e,t){return e.get(V(e,t))}function Q(e,t,i){j(e,t),t.set(e,i)}function H(e,t,i){return e.set(V(e,t),i),i}function Y(e,t,i){return i(V(e,t))}function X(e,t){j(e,t),t.add(e)}function J(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function K(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function $(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?K(Object(i),!0).forEach(function(t){J(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):K(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function q(e,t){if(null==e)return{};var i,s,n=function(e,t){if(null==e)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;i[s]=e[s]}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)i=o[s],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}function ee(e,t,i){t||(t=[]);var s=t.length++;return Object.defineProperty({},"_",{set:function(n){t[s]=n,e.apply(i,t)}})}function te(){te=function(e,t){return new i(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function i(e,s,n){var o=RegExp(e,s);return t.set(o,n||t.get(e)),Z(o,i.prototype)}function s(e,i){var s=t.get(i);return Object.keys(s).reduce(function(t,i){var n=s[i];if("number"==typeof n)t[i]=e[n];else{for(var o=0;void 0===e[n[o]]&&o+1<n.length;)o++;t[i]=e[n[o]]}return t},Object.create(null))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(i,RegExp),i.prototype.exec=function(t){var i=e.exec.call(this,t);if(i){i.groups=s(i,this);var n=i.indices;n&&(n.groups=s(n,this))}return i},i.prototype[Symbol.replace]=function(i,n){if("string"==typeof n){var o=t.get(this);return e[Symbol.replace].call(this,i,n.replace(/\$<([^>]+)(>|$)/g,function(e,t,i){if(""===i)return e;var s=o[t];return Array.isArray(s)?"$"+s.join("$"):"number"==typeof s?"$"+s:""}))}if("function"==typeof n){var a=this;return e[Symbol.replace].call(this,i,function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(s(e,a)),n.apply(this,e)})}return e[Symbol.replace].call(this,i,n)},te.apply(this,arguments)}class ie{constructor(e,t){this._message=e,this._node=t}get message(){return this._message}get node(){return this._node}}function se(e,t){var i;let s;const n=t(e,(e=[])=>{s=e});return s=null!=s?s:e.childNodes,null!==(i=s)&&void 0!==i&&i.length?$($({},n),{},{childNodes:Array.from(s).map(e=>se(e,t))}):n}function ne(e,t){const i=[e];for(;i.length>0;){var s;const e=i.pop();let n;if(t(e,e=>n=null!=e?e:[]),n=null!=n?n:e.childNodes,null!==(s=n)&&void 0!==s&&s.length)for(let e=n.length-1;e>=0;e--)i.push(n[e])}}var oe=new WeakMap,ae=new WeakMap,re=new WeakMap;class le{constructor(e){Q(this,oe,void 0),Q(this,ae,{}),Q(this,re,{}),H(oe,this,e)}get id(){return B(oe,this)}get document(){return B(ae,this)[B(oe,this)]||{id:B(oe,this),childNodes:[]}}node(e){return B(ae,this)[(null==e?void 0:e.id)||e]}parent(e){return this.node(B(re,this)[(null==e?void 0:e.id)||e])}path(e,t=new Set([B(oe,this)])){let i=this.node(e);if(!i)return null;const s=[],n=new Set;for(;i&&!t.has(i.id);){const e=this.parent(i);if(!e)return null;if(!e.childNodes.some(e=>(e.id||e)===i.id))return null;if(n.has(e))throw new Error("cycle detected in VirtualDOM path computation");s.unshift(e),n.add(e),i=e}return s}applyPatch(e){const t=new Set;for(const i of e)if(i.id){const e=B(ae,this)[i.id]||{},s=$($({},e),i);B(ae,this)[i.id]=s,t.add(i.id);const n=new Set((e.childNodes||[]).map(e=>e.id||e)),o=new Set((s.childNodes||[]).map(e=>e.id||e));o.forEach(e=>{B(re,this)[e]=s.id}),n.difference(o).forEach(e=>{ne(this.node(e),e=>{t.add(e.id)})})}else console.warn("diff missing id",i);const i=new Set([B(oe,this)]);return t.forEach(e=>{const s=this.path(e,i);if(!s)return delete B(ae,this)[e],t.delete(e),void delete B(re,this)[e];for(const e of s)t.has(e.id)||(t.add(e.id),B(ae,this)[e.id]=$({},e)),i.add(e.id)}),t.forEach(e=>{const t=B(ae,this)[e];t.childNodes=(t.childNodes||[]).map(e=>{const i=e.id||e,s=B(ae,this)[i];if(!s)throw new ie(`denormalisation failed for child ${i}`,t);return s})}),this}}function ce(e){try{return!e.document&&!1}catch(e){return!0}}function de(e){return!!ce(e)||!("IFRAME"!==e.tagName||!ce(e.contentWindow))}function he(e,t){const i=[];let s=e;for(;s.parentNode&&s.parentNode!==t;)i.push(s.parentNode),s=s.parentNode;if(s instanceof ShadowRoot)return[...i,s.host,...he(s.host,t)];const n=s.defaultView&&s.defaultView.frameElement;return n?[...i,n,...he(n)]:i}class ue{constructor(e){this.onPropertySet=e,this._klasses=new Set}_trackObserver(e){e.__cbio_observers||(e.__cbio_observers=new Set),e.__cbio_observers.add(this)}_untrackObserver(e){e.__cbio_observers&&e.__cbio_observers.delete(this)}_tap(e,t){if(e[`__cbio_override_${t}`])return;const i=Object.getOwnPropertyDescriptor(e.prototype,t);if(!i)return;e[`__cbio_override_${t}`]=!0;const s=i.set;i.set=function(i){s.call(this,i),e.__cbio_observers&&e.__cbio_observers.forEach(e=>{e.onPropertySet(this,t,i)})},Object.defineProperty(e.prototype,t,i)}observe(e,t){this._klasses.add(e),this._trackObserver(e),this._tap(e,t)}disconnect(){this._klasses.forEach(e=>this._untrackObserver(e)),this._klasses.clear()}}const Ee=new class{constructor(){J(this,"_mousePosition",{x:-1,y:-1}),J(this,"_mouseIsDown",!1),J(this,"_mouseIsIn",!1),J(this,"track",e=>{e.addEventListener("mousedown",this._onMouseDown,{capture:!0,passive:!0}),e.addEventListener("mouseup",this._onMouseUp,{capture:!0,passive:!0}),e.addEventListener("mouseenter",this._onMouseEnter,{capture:!0,passive:!0}),e.addEventListener("mouseleave",this._onMouseLeave,{capture:!0,passive:!0}),e.addEventListener("mousemove",this._onMouseMove,{capture:!0,passive:!0})}),J(this,"untrack",e=>{e.removeEventListener("mousedown",this._onMouseDown,{capture:!0,passive:!0}),e.removeEventListener("mouseup",this._onMouseUp,{capture:!0,passive:!0}),e.removeEventListener("mouseenter",this._onMouseEnter,{capture:!0,passive:!0}),e.removeEventListener("mouseleave",this._onMouseLeave,{capture:!0,passive:!0}),e.removeEventListener("mousemove",this._onMouseMove,{capture:!0,passive:!0})}),J(this,"isDown",()=>this._mouseIsDown),J(this,"setDown",e=>{this._mouseIsDown=e,this.onChange&&this.onChange(this.state())}),J(this,"isIn",()=>this._mouseIsIn>0),J(this,"position",()=>this._mousePosition),J(this,"setPosition",(e,t,i)=>{if(i){const s=[i,...he(i).filter(e=>{var t;return null===(t=e.matches)||void 0===t?void 0:t.call(e,"iframe")})].map(e=>e.getBoundingClientRect()).reduce((e,t)=>({x:e.x+t.x,y:e.y+t.y}),{x:0,y:0});e+=Math.round(s.x),t+=Math.round(s.y)}this._mousePosition={x:e,y:t},this.onChange&&this.onChange(this.state())}),J(this,"state",()=>$($({},this.position()),{},{down:this.isDown(),in:this.isIn()})),J(this,"_onMouseDown",e=>{e.isTrusted&&this.setDown(!0)}),J(this,"_onMouseUp",e=>{e.isTrusted&&this.setDown(!1)}),J(this,"_onMouseEnter",e=>{e.isTrusted&&(this._mouseIsIn+=1)}),J(this,"_onMouseLeave",e=>{e.isTrusted&&e.target===e.currentTarget&&(this._mouseIsIn-=1)}),J(this,"_onMouseMove",l(e=>{if(!e.isTrusted)return;const{clientX:t,clientY:i}=e,s=e.view&&e.view.frameElement;this.setPosition(t,i,s)},100))}},_e={};function pe(){try{const e="_cobrowse_test_item";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}function Ie(){pe()||Ie.done||(Ie.done=!0,console.warn("Warning: localStorage is not supported. Cobrowse falling back to cookie or in-memory storage and may not function as expected."))}function Le(e){return{setItem(t,i){Ie();const s=JSON.stringify({value:i,group:e});pe()?window.localStorage.setItem(t,s):E.set(t,s),_e[t]=s},getItem(t){try{let i;i=pe()?window.localStorage&&window.localStorage.getItem(t):E.get(t),i||(i=_e[t]);const{value:s,group:n}=JSON.parse(i);return e&&e!==n?null:s}catch(e){return null}},removeItem(e){pe()&&window.localStorage.removeItem(e),E.remove(e),_e[e]=void 0}}}const me=_("cbio.WindowTracking"),Ce="_cobrowse_window_id";var Ne=new WeakMap,ge=new WeakMap,we=new WeakMap,ve=new WeakMap;class Ae extends d{constructor(...e){super(...e),Q(this,Ne,Se._.call(Ae)),Q(this,ge,!1),Q(this,we,!1),J(this,"start",()=>{B(we,this)||(H(we,this,!0),me("started"),B(ve,this).call(this),document.addEventListener("visibilitychange",B(ve,this),{capture:!0}),document.addEventListener("mouseover",B(ve,this),{capture:!0}))}),J(this,"stop",()=>{me("stopped"),this.removeAllListeners(),H(we,this,!1),document.removeEventListener("visibilitychange",B(ve,this),{capture:!0}),document.removeEventListener("mouseover",B(ve,this),{capture:!0})}),J(this,"isActive",()=>Le().getItem(Ce)===this.id),J(this,"setTracksIframes",e=>{H(ge,this,e),B(ve,this).call(this)}),J(this,"shouldTrack",()=>!document.hidden&&(!(window.self!==window.top)||B(ge,this))),J(this,"makeActive",()=>{this.isActive()||(me("making active",window),Le().setItem(Ce,this.id),this.emit("activate",window))}),J(this,"resignActive",()=>{this.isActive()&&(me("resigning active",window),Le().setItem(Ce,null))}),Q(this,ve,()=>{this.shouldTrack()&&this.makeActive(),this.emit("updated")})}get id(){return B(Ne,this)}}var Se={_:()=>(document.__cobrowse_window_id=document.__cobrowse_window_id||h(),document.__cobrowse_window_id)};const fe=new Ae,Te="abcdefghijklmnopqrstuvwxyz",Oe=`0123456789${Te.toLowerCase()}${Te.toUpperCase()}`;function Re(e,t=Oe){let i="";for(let s=e;s>0;s-=1)i+=t[Math.floor(Math.random()*t.length)];return i}const ye=new class{isDOMNode(e){return!!e&&!(!e.childNodes||"function"!=typeof e.appendChild||void 0===e.nodeType)}},be=new class{constructor(){J(this,"_idMap",new Map),J(this,"_nodeMap",new Map),J(this,"_currentId",0),J(this,"_nextId",()=>(this._currentId+=1,this._currentId)),J(this,"track",e=>{if(!e)return null;if(!ye.isDOMNode(e))return e.id;if(!this.get(e)){const t=e.nodeType===window.Node.DOCUMENT_NODE?Re(5):`${this.track(document)}-${this._nextId()}`;this._idMap.set(t,e),this._nodeMap.set(e,t)}return this._nodeMap.get(e)}),J(this,"get",e=>e?ye.isDOMNode(e)?this._nodeMap.get(e)||null:e.id:null),J(this,"getById",e=>e&&this._idMap.get(e)||null),J(this,"forget",e=>{this._idMap.delete(this.get(e)),this._nodeMap.delete(e)})}};var Pe,Me;let ke;try{ke=document.createElement("iframe"),document.documentElement.appendChild(ke),ke.style.display="none",ke.className="__cbio_ignored",ke.width=0,ke.height=0}catch(mE){console.warn("Failed to create unpolyfill iframe",mE)}const{Node:De,Element:Ge,MutationObserver:Ue,Event:We,EventTarget:xe}=null!==(Pe=null===(Me=ke)||void 0===Me?void 0:Me.contentWindow)&&void 0!==Pe?Pe:window,Ve=_("cbio.NodeTree"),ze={[window.Node.COMMENT_NODE]:!0,[window.Node.CDATA_SECTION_NODE]:!0,[window.Node.ENTITY_REFERENCE_NODE]:!0,[window.Node.ENTITY_NODE]:!0,[window.Node.PROCESSING_INSTRUCTION_NODE]:!0,[window.Node.NOTATION_NODE]:!0,[window.Node.DOCUMENT_TYPE_NODE]:!0};var Fe=new WeakMap;const je=new class{constructor(){Q(this,Fe,".__cbio_ignored"),J(this,"isIgnored",e=>{var t,i;if(ze[e.nodeType])return Ve("ignoring",e,"because of nodeType"),!0;if("SCRIPT"===e.tagName)return Ve("ignoring",e,"because of SCRIPT"),!0;if(null!==(t=e.closest)&&void 0!==t&&t.call(e,B(Fe,this)))return Ve("ignoring",e,"because child of classes"),!0;const s=e.parentNode||e.defaultView&&e.defaultView.frameElement;return"STYLE"===(null==s||null===(i=s.tagName)||void 0===i?void 0:i.toUpperCase())&&(Ve("ignoring",e,"because child of STYLE"),!0)}),J(this,"children",e=>{const{get:t}=Object.getOwnPropertyDescriptor(De.prototype,"childNodes"),{get:i}=Object.getOwnPropertyDescriptor(Ge.prototype,"shadowRoot");return ye.isDOMNode(e)?"IFRAME"===e.tagName&&de(e)?e.__document_id?[{id:e.__document_id,nodeType:9}]:[]:"IFRAME"!==e.tagName||de(e)?e.nodeType===window.Node.ELEMENT_NODE&&i.apply(e)?[i.apply(e),...Array.from(t.apply(e))].filter(e=>!this.isIgnored(e)):Array.from(t.apply(e)).filter(e=>!this.isIgnored(e)):"complete"!==e.contentWindow.document.readyState?[]:[e.contentWindow.document].filter(e=>!this.isIgnored(e)):e.childNodes})}setIgnoredViews(e){if(Array.isArray(e))return H(Fe,this,[".__cbio_ignored",...e].filter(Boolean).join(",")),void Ve("set ignored view selectors",B(Fe,this));Ve("not updating #ignoredViews due to arg to being an array",e)}depthFirst(e,t){ne(e,(e,i)=>{i(this.children(e)),t(e,i)})}depthFirstMapped(e,t){return se(e,(e,i)=>(i(this.children(e)),t(e,i)))}};var Be=new WeakMap,Qe=new WeakMap,He=new WeakMap,Ye=new WeakMap,Xe=new WeakSet;class Je{constructor(e=[],t=[],i=[],s=[],{document:n=window.document}={}){X(this,Xe),Q(this,Be,void 0),Q(this,Qe,void 0),Q(this,He,new Set),Q(this,Ye,new Set),H(Be,this,V(Xe,this,ht).call(this,...e,...i)),H(Qe,this,V(Xe,this,ht).call(this,...t,...s));for(const e of V(Xe,this,ct).call(this,n,B(Be,this)))B(Ye,this).add(e);for(const e of V(Xe,this,ct).call(this,n,B(Qe,this)))B(He,this).add(e)}getRedactedBy(e){if(V(Xe,this,nt).call(this,e)||V(Xe,this,rt).call(this,e))return null;const t=V(Xe,this,ot).call(this,e);return t?V(Xe,this,rt).call(this,e.parentNode)?e:t:V(Xe,this,st).call(this,e)?e:null}notifyChanges(e,t,i,s){const n=new Set,o=new Set,a=new Set([...B(Ye,this)]);for(const t of e){if(je.isIgnored(t.target)||s.has(t.target))continue;const e=this.getRedactedBy(t.target);if(e&&e!==t.target&&n.add(e),"attributes"===t.type){const e=V(Xe,this,lt).call(this,t.target);for(const t of e)o.add(t);const i=V(Xe,this,nt).call(this,t.target);B(He,this).has(t.target)!==!!i&&o.add(t.target.parentNode)}else if("childList"===t.type){const e=V(Xe,this,Ke).call(this,t.removedNodes),i=V(Xe,this,Ke).call(this,t.addedNodes);if(!o.has(t.target)){const s=V(Xe,this,lt).call(this,t.target).length>0;(s&&i||!s&&e)&&o.add(t.target)}}}const r=V(Xe,this,it).call(this,o);for(const e of r)je.isIgnored(e)||n.add(e);V(Xe,this,$e).call(this,t,new Set([...n,...i]),s);for(const e of i)for(const t of B(Ye,this))e.contains(t)&&n.add(t);for(const e of a)B(Ye,this).has(e)||s.has(e)||je.depthFirst(e,e=>n.add(e));return n}isRedacted(e){return Boolean(this.getRedactedBy(e))}}function Ke(e){const t=[...e];return t.find(e=>!je.isIgnored(e)&&V(Xe,this,nt).call(this,e))||t.find(e=>V(Xe,this,lt).call(this,e).length>0)}function $e(e,t,i){V(Xe,this,qe).call(this,e,t,i),V(Xe,this,Ze).call(this,t,i)}function qe(e,t,i){for(const e of V(Xe,this,et).call(this,i))B(He,this).delete(e);for(const t of V(Xe,this,et).call(this,e))B(He,this).add(t);for(const i of t)e.has(i)||(V(Xe,this,nt).call(this,i)?B(He,this).add(i):B(He,this).delete(i))}function Ze(e,t){for(const e of t)B(Ye,this).delete(e);for(const t of e)V(Xe,this,tt).call(this,t)}function*et(e){for(const t of e)V(Xe,this,nt).call(this,t)&&(yield t)}function tt(e){const t=B(Ye,this).has(e);t&&this.getRedactedBy(e)!==e?B(Ye,this).delete(e):t||this.getRedactedBy(e)!==e||B(Ye,this).add(e)}function it(e){return[...new Set([...e].flatMap(e=>[e,...he(e)]))].flatMap(e=>[...e.childNodes||[]])}function st(e){return V(Xe,this,dt).call(this,e,B(Be,this))}function nt(e){return V(Xe,this,dt).call(this,e,B(Qe,this))}function ot(e){const t=V(Xe,this,at).call(this,e);return t?he(e,t).find(e=>V(Xe,this,rt).call(this,e.parentNode))||t:null}function at(e){if(!ye.isDOMNode(e))return null;const{get:t}=Object.getOwnPropertyDescriptor(De.prototype,"parentNode"),i=V(Xe,this,ht).call(this,B(Be,this),B(Qe,this)),s=e&&e.nodeType===De.ELEMENT_NODE&&t.call(e),n=s&&s.nodeType===De.ELEMENT_NODE&&i&&s.closest(i);return V(Xe,this,dt).call(this,n,B(Be,this))?V(Xe,this,nt).call(this,n)?null:n:null}function rt(e){return B(Qe,this)&&e&&"HTML"!==e.tagName&&e.querySelector&&e.querySelector(B(Qe,this))}function lt(e){return V(Xe,this,ct).call(this,e,B(Qe,this))}function ct(e,t){return t&&e.querySelectorAll?e.querySelectorAll(t):[]}function dt(e,t){return e&&t&&e.matches&&e.matches(t)}function ht(...e){return e.filter(Boolean).join(",")}const ut=_("cbio.RedactionIndexProvider");var Et=new WeakMap;const _t=new class{constructor(){Q(this,Et,void 0)}set instance(e){H(Et,this,e),ut("set new redaction index")}get instance(){return B(Et,this)}},pt=new class{constructor(){J(this,"proxify",e=>e),J(this,"unproxify",e=>e),J(this,"inUniversalProxy",!1)}};var It=new WeakMap,Lt=new WeakMap;const mt=new class{constructor(){Q(this,It,()=>pt.unproxify(window.location.href)),Q(this,Lt,(t,i)=>{if(!t)return t;const s=t.map(t=>"string"==typeof t?t:"object"==typeof t?Object.entries(t).filter(([t])=>e([t])(i)).map(([e,t])=>t):null).filter(Boolean).flat(2);return[...new Set(s)]}),J(this,"filterSelectors",e=>{const t=B(It,this).call(this);return B(Lt,this).call(this,e,t)}),J(this,"hasChange",(e,t)=>{if(!e)return!1;if(!t)return!0;const i=B(Lt,this).call(this,e,t),s=B(Lt,this).call(this,e,B(It,this).call(this));if(i.length!==s.length)return!0;const n=[...i].sort(),o=[...s].sort();return!n.every((e,t)=>e===o[t])})}};class Ct{static fromImage(e){const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,t.width,t.height),this.fromCanvas(t)}static fromCanvas(e,t=1,i=.3){if(1===t)return e.toDataURL?e.toDataURL("image/webp",i):null;const s=document.createElement("canvas"),n=s.getContext("2d");return s.width=e.width*t,s.height=e.height*t,n.drawImage(e,0,0,s.width,s.height),s.toDataURL("image/webp",i)}}let Nt=null;const gt=e=>{try{if(e.media&&e.media.length&&!window.matchMedia(e.media).matches)return""}catch(t){console.warn("CobrowseIO: Media detection for sheet failed:",t,"sheet",e)}return[].slice.call(e.cssRules).reduce((e,t)=>{try{return e+t.cssText}catch(t){return e}},"")},wt=e=>"IMG"===e.tagName?e.src:"LINK"===e.tagName?e.href:null,vt=(e,t)=>{const i=wt(e);e.__cbio_content_cache=e.__cbio_content_cache||{},e.__cbio_content_cache[i]=t},At=e=>{var t;const i=wt(e);return null===(t=e.__cbio_content_cache)||void 0===t?void 0:t[i]},St=async e=>{const t=be.getById(e);if(t)return"IMG"===t.tagName?(async e=>{if(At(e))return;const t=wt(e),i=await(async()=>{try{await(i=e,new Promise(e=>{if(i.complete)return e();const t=()=>{clearTimeout(s),i.removeEventListener("load",t),i.removeEventListener("error",t),e()};i.addEventListener("load",t,{once:!0}),i.addEventListener("error",t,{once:!0});const s=setTimeout(t,5e3)}));const t=Ct.fromImage(e);if("data:,"!==t)return t}catch(e){}var i;try{return await(e=>new Promise((t,i)=>{const s=new Image;s.crossOrigin="anonymous",s.src=e,s.onload=()=>{try{const e=Ct.fromImage(s);t(e)}catch(e){i(e)}},s.onerror=i}))(t)}catch(e){}})();i&&vt(e,i)})(t):"LINK"===t.tagName&&"stylesheet"===t.rel?(async e=>{if(At(e))return;const t=wt(e),i=await(async()=>{try{if(e.sheet)return gt(e.sheet)}catch(e){}try{return await(e=>new Promise((t,i)=>{const s=document.createElement("link");s.crossOrigin="anonymous",s.rel="stylesheet",s.href=e,s.setAttribute("class","__cbio_ignored"),s.onload=()=>{try{const e=gt(s.sheet);t(e)}catch(e){i(e)}finally{s.remove()}},s.onerror=e=>{s.remove(),i(e)},document.head.appendChild(s)}))(t)}catch(e){}})();i&&vt(e,i)})(t):void 0},ft={OBJECT:!0,EMBED:!0},Tt=new Set(["A","AREA","AUDIO","BUTTON","DETAILS","DIALOG","EMBED","IFRAME","IMG","INPUT","LABEL","MENU","OBJECT","OPTGROUP","OPTION","SELECT","SUMMARY","TEXTAREA","VIDEO"]),Ot=new Set(["button","link","menuitem","menuitemcheckbox","menuitemradio","checkbox","radio","switch","textbox","searchbox","spinbutton","slider","combobox","listbox","option"]),Rt=new class{constructor(){J(this,"isLocalResource",e=>!!(/^https?:\/\/localhost/.test(e)||/^https?:\/\/127.0.0.1/.test(e)||/^file:\/\//.test(e)||/^blob:/.test(e)||/^ionic:/.test(e))),J(this,"serializeAdoptedStyleSheets",e=>{try{let t=[];return[...e.adoptedStyleSheets||[]].forEach(e=>{t=t.concat([].slice.call(e.cssRules))}),gt({cssRules:t})}catch(t){return console.warn("CobrowseIO: AdoptedStyleSheets serialize failed:",t.message,"for",e),""}})}_serializeAttributes(e,t){if(e.nodeType===window.Node.ELEMENT_NODE&&e.attributes){const i={};Array.from(e.attributes||[]).forEach(t=>{t.nodeName.startsWith("@")||("href"===t.nodeName||"src"===t.nodeName?i[t.nodeName]="string"==typeof e[t.nodeName]?e[t.nodeName]:t.nodeValue:i[t.nodeName]=t.nodeValue)}),t.attributes=i}}_serializeSelection(e,t){var i;let s=null;const n=e.getSelection();if(n&&"Range"===n.type&&!n.isCollapsed&&n.rangeCount>0)try{s=[...Array(n.rangeCount)].reduce((e,t,i)=>{var s,o;const a=n.getRangeAt(i),{startOffset:r,endOffset:l}=a,c=null===(s=_t.instance)||void 0===s?void 0:s.getRedactedBy(a.startContainer),d=null===(o=_t.instance)||void 0===o?void 0:o.getRedactedBy(a.endContainer),h=be.get(null!=c?c:a.startContainer),u=be.get(null!=d?d:a.endContainer);return e.push({start:h,end:u,startOffset:c?0:r,endOffset:d?0:l}),e},[])}catch(e){console.warn("CobrowseIO: Could not serialize text selection",e)}else["INPUT","TEXTAREA"].includes(null===(i=e.activeElement)||void 0===i?void 0:i.tagName)&&e.activeElement.selectionStart!==e.activeElement.selectionEnd&&(s=!1);t.selection=s}_serializeDocument(e,t){if(e.nodeType===window.Node.DOCUMENT_NODE){var i,s,n,o,a,r;t.url=e.location&&e.location.href;const l=1===(null!==(i=null===(s=e.defaultView)||void 0===s||null===(s=s.visualViewport)||void 0===s?void 0:s.scale)&&void 0!==i?i:1),c=0===function(){if(null==Nt){var e,t;const i=document.createElement("div");i.style.cssText="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -500px; left: -500px; margin: 0px; padding: 0px; border: none;",null===(e=document.body)||void 0===e||e.appendChild(i),Nt=i.offsetWidth-i.clientWidth,null===(t=document.body)||void 0===t||t.removeChild(i)}return Nt}()&&l,d=c?null===(n=e.defaultView)||void 0===n?void 0:n.innerWidth:null===(o=e.documentElement)||void 0===o?void 0:o.clientWidth,h=c?null===(a=e.defaultView)||void 0===a?void 0:a.innerHeight:null===(r=e.documentElement)||void 0===r?void 0:r.clientHeight;t.size={width:d,height:h},t.focus=be.get(e.activeElement);const u=e=>({name:e.name,publicId:e.publicId,systemId:e.systemId});t.doctype=null!=e.doctype?u(e.doctype):null,t.css=this.serializeAdoptedStyleSheets(e),this._serializeSelection(e,t)}}_serializeInput(e,t){if("INPUT"===e.tagName||"TEXTAREA"===e.tagName||"OPTION"===e.tagName){t.value=e.value,"radio"!==e.type&&"checkbox"!==e.type||void 0===e.checked||(t.checked=e.checked),t.selection=null;try{const{selectionStart:i,selectionEnd:s,selectionDirection:n}=e;i!==s&&e===e.ownerDocument.activeElement&&(t.selection={start:i,end:s,direction:n})}catch(t){console.warn("Failed to serialise text selection for the input",e)}}}_serializeSelect(e,t){"SELECT"!==e.tagName||e.size&&1!==e.size||e.multiple||(t.preventDefault=!0)}_serializeOption(e,t){"OPTION"===e.tagName&&(t.selected=e.selected)}_serializeShadowRoot(e,t){e.nodeType===window.Node.DOCUMENT_FRAGMENT_NODE&&(t.css=this.serializeAdoptedStyleSheets(e))}_serializeStyle(e,t){var i;if("STYLE"===(null===(i=e.tagName)||void 0===i?void 0:i.toUpperCase()))try{e.sheet&&(t.css=gt(e.sheet))}catch(t){console.warn("CobrowseIO: CSS serialize failed:",t.message,"for",e)}}_serializeLinkStyleSheet(e,t){if("LINK"===e.tagName&&"stylesheet"===e.rel){const i=At(e);if(i)return void(t.css=i);if(this.isLocalResource(e.href))try{e.sheet&&(t.css=gt(e.sheet))}catch(t){console.warn("CobrowseIO: CSS serialize failed:",t.message,"for",e)}}}_serializeCanvas(e,t,i){if("CANVAS"===e.tagName&&!i.isRedacted&&i.rasterizeCanvas)try{var s;const i=parseFloat(null===(s=e.attributes)||void 0===s||null===(s=s["data-cbio-quality"])||void 0===s?void 0:s.value)||.8;t.data=Ct.fromCanvas(e,i)}catch(t){e._cb_serialize_warned||(console.warn("Cobrowse failed to serialize canvas",e,"due to error",t),e._cb_serialize_warned=!0)}}_serializeImage(e,t,i){if("IMG"===e.tagName&&!i.isRedacted){const i=At(e);if(i)return t.attributes.src=i,void delete t.attributes.srcset;if(this.isLocalResource(e.src))try{t.attributes.src=Ct.fromImage(e),delete t.attributes.srcset}catch(t){console.warn("CobrowseIO: Failed to serialize image",e)}}}_serializeScroll(e,t){var i,s;de(e)||(e.nodeType===window.Node.DOCUMENT_NODE?t.scroll={x:(null===(i=e.defaultView)||void 0===i?void 0:i.pageXOffset)||0,y:(null===(s=e.defaultView)||void 0===s?void 0:s.pageYOffset)||0}:"HTML"!==e.tagName&&(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight)&&(t.scroll={x:e.scrollLeft||0,y:e.scrollTop||0}))}_serializeRedaction(e,t,i){if(i.isRedacted){delete t.value;const i=this._getSize(e);if(1===e.nodeType){const s=window.getComputedStyle(e),n="inline"===s.display&&i.height>0?"inline-block":s.display;t.attributes=t.attributes&&$({id:t.attributes.id,class:t.attributes.class,style:`${t.attributes.style||""}; display: ${n} !important;flex-basis: unset !important;flex-shrink: 0;z-index:${s.zIndex};`},"EMBED"===e.nodeName?{src:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="}:{})}else 3===e.nodeType&&(t.nodeType=1,t.tagName="SPAN",t.attributes={style:i.height>0?"display: inline-block !important":void 0});t.redaction={height:`${i.height}px`,width:`${i.width}px`}}else t.redaction=void 0}_serializePseudoSelectors(e,t){var i,s,n;"function"==typeof e.matches&&(null===(i=t.attributes)||void 0===i||delete i.__cbio_pseudo_hover,null===(s=t.attributes)||void 0===s||delete s.__cbio_pseudo_active,null===(n=t.attributes)||void 0===n||delete n.__cbio_pseudo_focus,t.attributes=$($($($({},t.attributes),e.matches(":hover")?{__cbio_pseudo_hover:""}:{}),e.matches(":active")?{__cbio_pseudo_active:""}:{}),e.matches(":focus")?{__cbio_pseudo_focus:""}:{}))}_serializeVisibility(e,t,i){e.tagName&&(i.forceHidden&&(t.attributes=$($({},t.attributes),{},{style:"display: none !important;"})),null!=i&&i.includeVisibility&&(t.hidden=i.forceHidden||this._isExplicitlyHidden(e)||this._isHidden(e)&&e.parentElement&&!this._isHidden(e.parentElement),this._serializeInteractive(e,t)))}_isHidden(e){return this._isExplicitlyHidden(e)||this._isVisiblyHidden(e)}_isExplicitlyHidden(e){var t;return!0===e.hidden||"none"===(null===(t=e.style)||void 0===t?void 0:t.display)}_isVisiblyHidden(e){return"contents"!==getComputedStyle(e).display&&!e.checkVisibility({visibilityProperty:!0})}_serializeInteractive(e,t){if(Tt.has(e.tagName)||Ot.has(e.getAttribute("role"))||e.hasAttribute("tabindex")&&Number(e.getAttribute("tabindex"))>=0)return void(t.interactive="semantic");if(e.hasAttribute("onclick"))return void(t.interactive="scripted");const i=this._getCustomCursor(e.parentElement),s=this._getCustomCursor(e);s&&i!==s&&(t.interactive="styled")}_getCustomCursor(e){if(!e)return;const t=getComputedStyle(e);return t.cursor&&"auto"!==t.cursor&&"default"!==t.cursor?t.cursor:void 0}_getSize(e){const t=null==e?void 0:e.nodeType;if(null==t)return{height:0,width:0};if(t===Node.ELEMENT_NODE)return e.getBoundingClientRect();{const t=document.createRange();return t.selectNodeContents(e),t.getBoundingClientRect()}}_serialize(e,t){if(!be.get(e))throw console.error("node missing id",e,e.parentNode),new Error("node missing id",e);if(!ye.isDOMNode(e))return e;if(!e.nodeType)throw new Error("node missing type",e);const i={id:be.get(e),nodeType:e.nodeType};return this._serializeShadowRoot(e,i),this._serializeAttributes(e,i),this._serializeImage(e,i,t),this._serializeDocument(e,i),this._serializeScroll(e,i),this._serializeInput(e,i),this._serializeSelect(e,i),this._serializeOption(e,i),this._serializeStyle(e,i),this._serializeLinkStyleSheet(e,i),this._serializeCanvas(e,i,t),this._serializeRedaction(e,i,t),this._serializePseudoSelectors(e,i),this._serializeVisibility(e,i,t),e.tagName&&(i.tagName=e.tagName),e.nodeValue&&(i.content=e.nodeValue),i}serialize(e,t=()=>{},i={}){var s;const n=null===(s=_t.instance)||void 0===s?void 0:s.getRedactedBy(e);if(n&&n!==e)return null;if(je.isIgnored(e))return t([]),null;const o=Boolean(ft[e.tagName]),a=this._serialize(e,$({isRedacted:Boolean(n)||o},i));if(i.skipChildren||o)return a;if(n)return t([]),$($({},a),{},{childNodes:[]});const r=je.children(e);if(r){const e=r.map(e=>{if(!ye.isDOMNode(e))return $({},e);const t=be.get(e);return t||console.warn("child node missing id",e),{id:t}});return $($({},a),{},{childNodes:e})}return a}},yt=["id","redaction"];var bt=new WeakMap,Pt=new WeakMap,Mt=new WeakMap,kt=new WeakMap,Dt=new WeakMap;const Gt=new class extends d{constructor(...e){super(...e),J(this,"track",e=>{e.addEventListener("click",B(Mt,this),{capture:!0,passive:!0}),e.addEventListener("change",B(kt,this),{capture:!0,passive:!0}),e.addEventListener("input",B(Dt,this),{capture:!0,passive:!0})}),J(this,"untrack",e=>{e.removeEventListener("click",B(Mt,this),{capture:!0,passive:!0}),e.removeEventListener("change",B(kt,this),{capture:!0,passive:!0}),e.removeEventListener("input",B(Dt,this),{capture:!0,passive:!0})}),Q(this,bt,e=>{const t=be.get(e);if(!t)return;return Rt.serialize(e,void 0,{skipChildren:!0})||{id:t,redaction:!0}}),Q(this,Pt,(e,t=!1)=>{const i=B(bt,this).call(this,e);if(!i)return i;const{id:s,redaction:n}=i,o=q(i,yt);return $({id:s,redacted:Boolean(n)},t&&p(o,["value","checked"]))}),Q(this,Mt,e=>{if(!e.isTrusted)return;const t=B(Pt,this).call(this,e.target);t&&this.emit("click",t)}),Q(this,kt,e=>{const t=B(Pt,this).call(this,e.target,!0);t&&this.emit("change",t)}),Q(this,Dt,l(e=>{const t=B(Pt,this).call(this,e.target,!0);t&&this.emit("input",t)},250))}},Ut=["_blank","_self","_parent","_top","_unfencedTop"],Wt=(e,t)=>e?Ut.includes(e)?{name:"",target:e}:{name:e,target:t}:{name:"",target:t},xt=(e,t)=>Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,t).get.call(e),Vt=(e,t,i)=>Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,t).set.call(e,i);class zt extends Event{constructor(e,t){super(e,t),this._view=t.view}get view(){return this._view}}var Ft=new WeakMap,jt=new WeakMap,Bt=new WeakMap,Qt=new WeakMap,Ht=new WeakMap,Yt=new WeakMap,Xt=new WeakMap;const Jt=new class{constructor(){J(this,"beforeNavigate",void 0),Q(this,Ft,!1),Q(this,jt,new Set),J(this,"track",e=>{e.addEventListener("click",B(Bt,this),{capture:!0}),e.addEventListener("click",B(Bt,this)),e.addEventListener("submit",B(Qt,this))}),J(this,"untrack",e=>{e.removeEventListener("click",B(Bt,this),{capture:!0}),e.removeEventListener("click",B(Bt,this)),e.removeEventListener("submit",B(Qt,this))}),J(this,"tap",e=>{if(B(jt,this).has(e))return;const t=this,{open:i}=e;e.open=function(...e){return B(Ht,t).call(t,this,i,...e)};const{submit:s}=e.HTMLFormElement.prototype;e.HTMLFormElement.prototype.submit=function(...e){return B(Yt,t).call(t,this,s,...e)},B(jt,this).add(e)}),J(this,"untap",e=>{}),Q(this,Bt,e=>{var t;if(!this.beforeNavigate)return;const i=null==e||null===(t=e.target)||void 0===t?void 0:t.closest("a");if(!i)return;if(!i.href)return;if(i.__cbio_forceDefaultNavigation)return;const{target:s,name:n}=Wt(i.target,"_self"),{rewrittenUrl:o,windowProxy:a}=this.beforeNavigate(i.href,s,"",{name:n,go:()=>{i.__cbio_forceDefaultNavigation=!0,i.click(),delete i.__cbio_forceDefaultNavigation},e:e});o&&o!==i.href&&(i.href=o),a&&e.preventDefault()}),Q(this,Qt,e=>{var t;if(!this.beforeNavigate)return;const i=null==e||null===(t=e.target)||void 0===t?void 0:t.closest("form");if(!i)return;if(!xt(i,"action"))return;if(i.__cbio_forceDefaultNavigation)return;const{target:s,name:n}=Wt(xt(i,"target"),"_self"),{rewrittenUrl:o,windowProxy:a}=this.beforeNavigate(xt(i,"action"),s,"",{name:n,go:()=>{i.__cbio_forceDefaultNavigation=!0,i.submit(),delete i.__cbio_forceDefaultNavigation},e:e});o&&Vt(i,"action",o),a&&e.preventDefault()}),Q(this,Ht,(e,t,i,s,n)=>{if(!this.beforeNavigate)return t.call(e,i,s,n);const o=new zt("WindowOpen",{view:e}),{target:a,name:r}=Wt(s,"_blank"),{rewrittenUrl:l,windowProxy:c}=this.beforeNavigate(i,a,n,{name:r,go:()=>t.call(e,i,s,n),e:o});return l?t.call(e,l,s,n):c||void 0}),Q(this,Yt,(e,t,...i)=>{if(!this.beforeNavigate)return t.call(e,...i);const s=e.parentElement,n=new zt("FormSubmit",{view:e.ownerDocument.defaultView}),{target:o,name:a}=Wt(xt(e,"target"),"_self"),{rewrittenUrl:r,windowProxy:l}=this.beforeNavigate(xt(e,"action"),o,"",{name:a,go:()=>{const n=document.contains(s)&&!document.contains(e);n&&s.appendChild(e);const o=t.call(e,...i);return n&&e.remove(),o},e:n});return r&&Vt(e,"action",r),l?null:t.call(e,...i)}),Q(this,Xt,()=>{H(Ft,this,!0)}),window.addEventListener("pagehide",B(Xt,this),{capture:!0,once:!0,passive:!0})}ensureNoNavigation(e=200){return new Promise(t=>{setTimeout(()=>{B(Ft,this)||t()},e)})}},Kt=_("cbio.RequestTracking");var $t=new WeakSet;class qt{constructor(){X(this,$t),this.inFlightRequests=0,this.originalFetch=null,this.originalXHROpen=null,this.originalXHRSend=null}monitor(){this.originalFetch||(Kt("monitoring network"),V($t,this,Zt).call(this),V($t,this,ei).call(this))}destroy(){this.inFlightRequests=0}waitUntilStable(e={}){const{timeout:t=5e3,intervalMs:i=200}=e;Kt("waitUntilStable");const s=Date.now();return new Promise(e=>{const n=setInterval(()=>Date.now()>s+t?(clearInterval(n),Kt("network did not stabilise after %d millis",t),e(!1)):0===this.inFlightRequests?(clearInterval(n),Kt("network stabilised"),e(!0)):void 0,i)})}}function Zt(){if(this.originalFetch)return;this.originalFetch=window.fetch;const e=this;window.fetch=function(...t){return e.inFlightRequests++,e.originalFetch.apply(this,t).finally(()=>e.inFlightRequests--)}}function ei(){if(this.originalXHROpen)return;this.originalXHROpen=XMLHttpRequest.prototype.open,this.originalXHRSend=XMLHttpRequest.prototype.send;const e=this;XMLHttpRequest.prototype.open=function(...t){return this.__cbio_decrementCounter&&(this.removeEventListener("load",this.__cbio_decrementCounter),this.removeEventListener("error",this.__cbio_decrementCounter),this.removeEventListener("abort",this.__cbio_decrementCounter),this.removeEventListener("timeout",this.__cbio_decrementCounter)),this.__cbio_needsTracking=!0,e.originalXHROpen.apply(this,t)},XMLHttpRequest.prototype.send=function(...t){if(this.__cbio_needsTracking){this.__cbio_needsTracking=!1,e.inFlightRequests++;const t=()=>e.inFlightRequests--;this.__cbio_decrementCounter=t,this.addEventListener("load",t,{once:!0}),this.addEventListener("error",t,{once:!0}),this.addEventListener("abort",t,{once:!0}),this.addEventListener("timeout",t,{once:!0})}return e.originalXHRSend.apply(this,t)}}const ti=(e,t,{hideFromAgent:i=!1,hideFromVirtualAgent:s=!1,useShadowRoot:n=!1}={})=>{const o=document.createElement("div");i&&o.classList.add("__cbio_ignored"),s&&o.classList.add("__cbio_virtual_agent_ignored");const a=n?o.attachShadow({mode:"open"}):o,r=()=>{g(null,a),document.body.contains(o)&&document.body.removeChild(o)},l=t=>{g(w(e,$($({},t),{},{unmount:r})),a)};l(t),document.body.appendChild(o);const c=document.createElement("style");return c.textContent=window.__cbio_sdk_styles,a.prepend(c),{unmount:r,rerender:l}},ii="HighlightOverlay-module__disableAnimations___EEhxH",si=({targetElement:e})=>{const t=I(),i=I(!1),s=L(()=>{if(!e)return;const i=(e=>{const t=e.getBoundingClientRect(),i=document.documentElement.scrollTop,s=document.documentElement.scrollLeft,n=t.top+i,o=t.left+s,a=t.width,r=t.height;if(!a||!r)return null;const l=window.getComputedStyle(e);let c=l.borderRadius||l.borderTopLeftRadius;return"0px"===c&&(c="4px"),{top:n,left:o,width:a,height:r,borderRadius:c,paddedX:(a+6)/a,paddedY:(r+6)/r}})(e);if(!i||!t.current)return;const{top:s,left:n,width:o,height:a,borderRadius:r,paddedX:l,paddedY:c}=i;requestAnimationFrame(()=>{t.current.style.width=`${o}px`,t.current.style.height=`${a}px`,t.current.style.top=`${s}px`,t.current.style.left=`${n}px`,t.current.style.borderRadius=r,t.current.style.setProperty("--cbio-padded-x",l),t.current.style.setProperty("--cbio-padded-y",c)})},[e]),n=L(()=>{e&&(i.current=!0,e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),setTimeout(()=>{i.current=!1,s()},100))},[e,s]);return m(()=>{n()},[n]),m(()=>{s()},[s]),m(()=>{const e=()=>{i.current||t.current&&(requestAnimationFrame(()=>{t.current.classList.add(ii)}),s(),requestAnimationFrame(()=>{t.current.classList.remove(ii)}))};return window.addEventListener("resize",e),window.addEventListener("scroll",e,{passive:!0,capture:!0}),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e,{passive:!0,capture:!0}),clearTimeout(void 0)}},[s,e]),m(()=>{let i;return e&&(i=new MutationObserver(()=>{const i=e.isConnected,s=!e.checkVisibility||e.checkVisibility();t.current.style.display=i&&s?"block":"none"}),i.observe(e,{attributes:!0,attributeFilter:["style","class"]}),i.observe(document.body,{childList:!0,subtree:!0})),()=>{var e;null===(e=i)||void 0===e||e.disconnect()}},[e]),v("div",{className:"HighlightOverlay-module__overlay___CGVxb","data-test-id":"highlight-overlay",ref:t})};var ni=new WeakMap;const oi=new class{constructor(){Q(this,ni,null),J(this,"update",e=>{B(ni,this)?B(ni,this).rerender({targetElement:e}):H(ni,this,ti(si,{targetElement:e},{hideFromVirtualAgent:!0,useShadowRoot:!0}))}),J(this,"hide",()=>{var e;null===(e=B(ni,this))||void 0===e||e.unmount(),H(ni,this,null)})}},ai=({title:e})=>v("div",{className:"Tooltip-module__tooltipTitle___h97ry",children:e}),ri=({arrowRef:e})=>v("div",{className:"Tooltip-module__tooltipArrow___7xBT0",ref:e}),li=({targetElement:e,title:t})=>{const i=I(),s=I();return m(()=>{var t;let n;return e&&(n=f(e,i.current,async()=>{const t=await(async(e,t,i)=>{if(!e||!t||!i)return null;const{x:s,y:n,placement:o,middlewareData:a}=await T(e,t,{placement:"top",middleware:[O(12),R(),y({padding:8}),b({element:i}),P()]}),{x:r,y:l}=a.arrow,c=!a.hide.referenceHidden;return{tooltip:{x:s,y:n},arrow:{x:r,y:l,staticSide:{top:"bottom",right:"left",bottom:"top",left:"right"}[o.split("-")[0]]},isVisible:c}})(e,i.current,s.current);t&&(i.current.style.left=`${t.tooltip.x}px`,i.current.style.top=`${t.tooltip.y}px`,i.current.style.display=t.isVisible?"block":"none",s.current.style.left=t.arrow.x?`${t.arrow.x}px`:"",s.current.style.top=t.arrow.y?`${t.arrow.y}px`:"",s.current.style[t.arrow.staticSide]="-4px")})),null===(t=i.current)||void 0===t||t.classList.add("Tooltip-module__tooltipVisible___tvm2-"),()=>{var e;null===(e=n)||void 0===e||e()}},[e]),A("div",{className:"Tooltip-module__tooltip___kLn1a",role:"tooltip","aria-live":"polite",ref:i,children:[v(ai,{title:t}),v(ri,{arrowRef:s})]})};var ci=new WeakMap;const di=new class{constructor(){Q(this,ci,null),J(this,"update",(e,t)=>{B(ci,this)?B(ci,this).rerender({targetElement:e,title:t}):H(ci,this,ti(li,{targetElement:e,title:t},{hideFromVirtualAgent:!0,useShadowRoot:!0}))}),J(this,"hide",()=>{var e;null===(e=B(ci,this))||void 0===e||e.unmount(),H(ci,this,null)})}},hi=_("cbio.Highlight");var ui=new WeakMap,Ei=new WeakMap,_i=new WeakMap,pi=new WeakMap,Ii=new WeakMap,Li=new WeakMap,mi=new WeakMap;const Ci=new class{constructor(){Q(this,ui,void 0),J(this,"highlight",async(e,t)=>{var i;const s=be.getById(t.target.id);if(!s)return!1;const n=this.getNonEmpyElement(s);if(!n)return!1;const o=(null!==(i=e.highlightElement)&&void 0!==i?i:B(Ei,this))(n,t.title);return e.emit("highlight.updated",{target:n,visible:!0}),await o,e.emit("highlight.updated",{target:n,visible:!1}),!0}),J(this,"hide",()=>{var e;hi("hide",`resolve?=${!!B(ui,this)}`),B(Li,this).call(this),B(pi,this).call(this),null===(e=B(ui,this))||void 0===e||e.call(this),H(ui,this,void 0)}),Q(this,Ei,(e,t)=>new Promise(i=>{hi("update",e,t),H(ui,this,i),B(_i,this).call(this,e,t),B(Ii,this).call(this)})),Q(this,_i,(e,t)=>{oi.update(e),di.update(e,t)}),Q(this,pi,()=>{di.hide(),oi.hide()}),Q(this,Ii,()=>{B(Li,this).call(this),document.addEventListener("click",B(mi,this),{capture:!0})}),Q(this,Li,()=>{document.removeEventListener("click",B(mi,this),!0)}),Q(this,mi,e=>{e.isTrusted&&this.hide()})}getNonEmpyElement(e){let t=e;for(;t;){const e=t.getBoundingClientRect();if(e.width>0&&e.height>0)return t;hi("element is zero-width/height, trying parent",t),t=t.parentElement}}},Ni="pdf",gi="xdoc",wi="universal";var vi=new WeakMap,Ai=new WeakMap,Si=new WeakMap,fi=new WeakMap,Ti=new WeakMap;class Oi{constructor(e){Q(this,vi,void 0),Q(this,Ai,void 0),Q(this,Si,void 0),J(this,"findHandlerByUrl",e=>{if(!e)return null;try{const t=new URL(e,window.location.origin);return B(Ai,this).find(e=>e.shouldHandle(t))}catch(e){return console.warn("CobrowseIO: Failed to infer navigation type",e),null}}),J(this,"findHandlerByType",e=>B(Ai,this).find(t=>t.type===e)),Q(this,fi,(e,t,i,{name:s,go:n,e:o})=>{const a=this.findHandlerByUrl(e);if(a&&!a.shouldHandleEvent(o))return o.eventPhase===Event.BUBBLING_PHASE&&console.warn("CobrowseIO: Inferred navigation type but event is already handled"),{rewrittenUrl:e};const r=o.view||window;return B(Si,this).call(this,e,t,i,{name:s,go:n,e:o,type:null==a?void 0:a.type,block:()=>B(Ti,this).call(this,r,o)})}),Q(this,Ti,(e,t)=>{if(t.eventPhase===Event.CAPTURING_PHASE)return;const i=e.document,s=i.createElement("div");s.style.position="fixed",s.style.top=0,s.style.left=0,s.style.width="100vw",s.style.height="100vh",s.style.backgroundColor="black",s.style.zIndex="2147483647",s.style.margin=0,s.style.padding=0,s.style.border=0,s.style.borderRadius=0;const n=i.body.style.overflow;i.body.style.overflow="hidden",i.body.appendChild(s);const o=()=>{i.body.contains(s)&&i.body.removeChild(s),i.body.style.overflow=n,e.removeEventListener("popstate",o)};e.addEventListener("popstate",o),e.history.pushState({},"")}),J(this,"destroy",()=>{Jt.beforeNavigate=null}),H(vi,this,e.shouldNavigate),H(Ai,this,e.handlers),H(Si,this,e.handleNavigation),Jt.beforeNavigate=B(fi,this)}runHandler(e,t,i,s){if(!e)return{rewrittenUrl:e};const n=null!=s.type?this.findHandlerByType(s.type):this.findHandlerByUrl(e);return n&&B(vi,this).call(this,n.type)?n.handle(e,t,i,s):{rewrittenUrl:e}}}class Ri{get type(){throw new Error("Getter 'type' must be implemented.")}shouldHandleEvent(e){throw new Error("Method 'shouldHandleEvent()' must be implemented.")}shouldHandle(e){throw new Error("Method 'shouldHandle()' must be implemented.")}handle(e,t,i,s){throw new Error("Method 'handle()' must be implemented.")}}const yi=Symbol("protected");function bi(e,t,i){e[yi]||Object.defineProperty(e,yi,{enumerable:!1,value:{}});const s=e[yi][t];return Object.getPrototypeOf(Object.getPrototypeOf(e))[t]=s,Object.defineProperty(e[yi],t,{enumerable:!1,value:i,configurable:!0}),i}var Pi=new WeakMap,Mi=new WeakMap,ki=new WeakMap;class Di{constructor(e,t,i,s,n,o){J(this,"ALLOWED_PROTOCOLS",["http:","https:"]),Q(this,Pi,e=>e.startsWith("#")),Q(this,Mi,e=>e.hostname===this.proxyApiUrl.hostname),Q(this,ki,e=>`${e.pathname}${e.search}${e.hash}`.replace(/^.*?\/proxy\/1\/[^/]+/i,"")),J(this,"proxify",(e,t={})=>{if(!e)return e;if(B(Pi,this).call(this,e.toString()))return e;const i=$($($({},this.queryParams),this.getOrigin?{origin:this.getOrigin()}:{}),t);try{const t=new URL(e,this.baseUrl);if(!this.ALLOWED_PROTOCOLS.includes(t.protocol))return e;const s=((e,t)=>{const{hostname:i,protocol:s,pathname:n,search:o,port:a,username:r,password:l,hash:c}=new URL(e),d=i.split(".").reverse().map(encodeURIComponent).join("/"),h=new URL(`${d}/${s}${n}${c}`,"http://placeholder.base");o&&h.searchParams.set("search",o.replace("?","")),a&&h.searchParams.set("port",a),r&&h.searchParams.set("username",r),l&&h.searchParams.set("password",l);for(const[e,i]of Object.entries(t||{}))h.searchParams.set(e,i);return`${h.pathname}${h.search}${h.hash}`})(B(Mi,this).call(this,t)?this.unproxify(t.toString()):t.toString(),i);return new URL(`.${s}`,this.proxyApiUrl).toString()}catch(t){return e}}),J(this,"unproxify",e=>{if(!e)return e;if(B(Pi,this).call(this,e.toString()))return e;try{const t=new URL(e,this.baseUrl);if(!this.ALLOWED_PROTOCOLS.includes(t.protocol))return e;if(!B(Mi,this).call(this,t))return e;return(e=>{const{pathname:t,hash:i,searchParams:s}=new URL(e,"http://placeholder.base"),n=t.split("/"),o=n.findIndex(e=>"http:"===e||"https:"===e),a=n[o],r=n.slice(1,o).reverse().map(decodeURIComponent),l=n.slice(o+1,n.length),c=s.get("search"),d=s.get("port"),h=s.get("username"),u=s.get("password"),E=r.join("."),_=l.join("/");return new URL(`${a}//${h&&u?`${h}:${u}@`:""}${E}${d?`:${d}`:""}/${_}${c?`?${c}`:""}${i}`)})(B(ki,this).call(this,t)).toString()}catch(t){return e}}),this.proxyApiUrl=new URL(t,e),this.queryParams=n?$({},n):{},i&&(this.queryParams.access_token=i),this.baseUrl=s,this.getOrigin=o}}const Gi="./proxy/1/universal/";var Ui=new WeakMap,Wi=new WeakMap,xi=new WeakMap;class Vi{constructor(e,t){Q(this,Ui,void 0),Q(this,Wi,void 0),Q(this,xi,e=>{const t=e[yi].proxyToken(),i=e[yi].proxyUrl(),s=new URL(i,B(Wi,this));return new Di(s,Gi,t,window.location)}),J(this,"openPdfViewer",(e,t,i)=>{const s=window.__cobrowse_io_openPdf,n=s=>{const{setPdfUrl:n}=s(e,{container:t,onLoadError:t=>{const s=B(xi,this).call(this,B(Ui,this)).proxify(e);t!==s?(console.warn("CobrowseIO: Failed to fetch PDF document, attempting to proxy it"),n(s)):i()},onLoadSuccess:i,preventClose:!0})};"function"!=typeof s?import("./CobrowsePDFViewer.umd.bundler.mjs").then(function(e){return e.C}).then(e=>{n(e.open)}):n(s)}),H(Ui,this,e),H(Wi,this,t)}}var zi=new WeakMap,Fi=new WeakMap,ji=new WeakMap,Bi=new WeakMap;class Qi extends Ri{constructor(t,i){super(),Q(this,zi,void 0),Q(this,Fi,void 0),Q(this,ji,e=>new URL(e,window.location.href).pathname.split("/").pop()),Q(this,Bi,(e,t,i,s)=>{const{document:n}=s,o=document.createElement("div");o.style.width="100%",o.style.height="100%",n.load(e,t,i,{element:o,type:this.type}),B(Fi,this).openPdfViewer(e,o,()=>{const t=B(ji,this).call(this,e);n.icon="",n.title=t,n.isLoading=!1})}),H(zi,this,e(i.pdfLinks)),H(Fi,this,new Vi(t,i.api))}get type(){return Ni}shouldHandleEvent(e){return e.eventPhase!==Event.CAPTURING_PHASE&&!e.defaultPrevented}shouldHandle(e){const t=new URL(e,window.location.origin);return t.search="",B(zi,this).call(this,t)}handle(e,t,i,s){return B(Bi,this).call(this,e,t,i,s),{document:s.document}}}var Hi=new WeakMap,Yi=new WeakMap,Xi=new WeakMap;class Ji{constructor(e,t,i){Q(this,Hi,void 0),Q(this,Yi,void 0),Q(this,Xi,void 0),J(this,"createUniversalProxyFrameName",()=>`cbioUniversalFrame-${Re(5)}`),J(this,"createUniversalProxyUrl",(e,t)=>{const i=B(Hi,this)[yi].proxyToken(),s=B(Hi,this)[yi].proxyUrl(),n=new URL(s,B(Yi,this)),o={parent_origin:window.location.origin,proxy_path:n.pathname,sdk_version:B(Xi,this),frame_name:t};return new Di(n,Gi,i,window.location,o).proxify(e)}),J(this,"createUniversalProxyIFrame",(e,t)=>{const i=document.createElement("iframe");return i.allow="publickey-credentials-get *",i.style.width="100%",i.style.height="100%",i.style.backgroundColor="white",i.style.border="none",i.src=e,i.name=t,i}),H(Hi,this,e),H(Yi,this,t),H(Xi,this,i)}}var Ki=new WeakMap,$i=new WeakMap,qi=new WeakMap,Zi=new WeakMap;class es extends Ri{constructor(t,i){super(),Q(this,Ki,void 0),Q(this,$i,void 0),Q(this,qi,(e,t,i,s)=>{const{document:n}=s,o=B($i,this).createUniversalProxyFrameName(),a=B($i,this).createUniversalProxyUrl(e,o),r=B($i,this).createUniversalProxyIFrame(a,o);n.load(a,t,i,{element:r,type:this.type});const l=({handle:e,document:{url:t,icon:i,title:s,isLoading:o,isBlocked:a}},{trusted:l,iframe:c})=>{e||l&&c===r&&(n.url=t,n.icon=i,n.title=s,n.isLoading=o,n.isBlocked=a)};Ma.on("document",l),n.once("closed",()=>{Ma.off("document",l)})}),Q(this,Zi,(e,t,i,s)=>{const{document:n}=s,o=document.createElement("div");o.style.width="100%",o.style.height="100%",o.style.backgroundColor="black",n.load(e,t,i,{element:o,type:this.type}),n.isLoading=!1,n.isBlocked=!0}),H(Ki,this,e(i.universalLinks)),H($i,this,new Ji(t,i.api,i.version))}get type(){return wi}shouldHandleEvent(e){return e.eventPhase!==Event.CAPTURING_PHASE&&!e.defaultPrevented}shouldHandle(e){const t=new URL(e,window.location.origin);return t.search="",B(Ki,this).call(this,t)}handle(e,t,i,s){return(this.shouldHandle(e)?B(qi,this):B(Zi,this))(e,t,i,s),{document:s.document}}}var ts=new WeakMap;class is{constructor(e){Q(this,ts,{}),this.fill(e)}fill(e){return H(ts,this,e.reduce((e,t)=>(e[t]=!0,e),{})),this}all(){return B(ts,this)}toArray(){return Object.keys(B(ts,this)).filter(e=>B(ts,this)[e])}toggle(e,t){return Array.isArray(e)||(e=[e]),e.filter(e=>e in B(ts,this)).forEach(e=>{B(ts,this)[e]=t}),this}}class ss extends Error{constructor(e,t){super(t),this.status=e,this.name="HTTPError"}}class ns extends ss{constructor(e,t,i){super(t,i),this.id=e,this.name="APIError"}}var os=new WeakMap,as=new WeakMap,rs=new WeakMap,ls=new WeakMap,cs=new WeakMap,ds=new WeakMap;class hs extends d{constructor(...e){super(...e),Q(this,os,{}),Q(this,as,{}),Q(this,rs,null),Q(this,ls,null),Q(this,cs,null),Q(this,ds,async e=>{if(e.status>=400){const t=await e.json();throw new ns(t.id,e.status,t.message)}if(!e.ok)throw new Error("Failed to parse response, response not ok");return 204===e.status?null:await e.json()})}get _resource(){return console.warn("The _resource property is private and should not be accessed directly. It will soon be removed entirely. Please update your implementation to use only the public APIs."),B(as,this)}get resource(){return B(as,this)}url(){throw new Error("url() must be implemented")}id(){return this.field("id")}field(e){return(B(as,this)||{})[e]}cache(e){H(as,this,$($({},B(as,this)),e))}async fetch(){await Promise.allSettled([B(rs,this),B(ls,this),B(cs,this)]);const e=await fetch(this.url(),{headers:D(this.headers(),["Content-Type"])});return this.updateResource(await B(ds,this).call(this,e))}async create(){H(rs,this,(async()=>{const e=await fetch(this.url(),{method:"POST",headers:this.headers()});return this.updateResource(await B(ds,this).call(this,e))})());try{return await B(rs,this)}finally{H(rs,this,null)}}async update(e){await Promise.allSettled([B(ls,this)]),H(ls,this,(async e=>{if(e&&Object.keys(e).length>0&&k(B(as,this),e,G))return this;const t=await fetch(this.url(),{method:this.id()?"PUT":"POST",headers:this.headers(),body:JSON.stringify(e)});return this.updateResource(await B(ds,this).call(this,t))})(e));try{return await B(ls,this)}finally{H(ls,this,null)}}async destroy(){H(cs,this,(async()=>{const e=await fetch(this.url(),{method:"DELETE",headers:this.headers()});return this.updateResource(await B(ds,this).call(this,e))})());try{return await B(cs,this)}finally{H(cs,this,null)}}updateResource(e){const t=this.clone();return H(as,this,e||{}),this.emit("updated",this,t),this}clone(e){e&&H(as,e,$({},B(as,this)))}headers(){return $($({},hs.headers()),B(os,this))}setHeader(e,t){B(os,this)[e]=t}getHeader(e){return this.headers()[e]}static headers(){return V(hs,this,us)._}static setHeader(e,t){us._[e]=t}static getHeader(e){return us._[e]}static set api(e){Es._=e}static get api(){return Es._}}var us={_:{}},Es={_:void 0};function _s(e,t,i=Yu){const s=[null,`X-CobrowseSDKVersion=${i.version}`,"X-CobrowsePlatform=web",`X-CobrowseDevice=${i.deviceId()}`,`X-CobrowseLicense=${i.license}`].filter(Boolean).join("&"),n=new URL(e,i.api).toString().replace("https://","wss://").replace("http://","ws://");return new URL(`sockets/1/ws?${s}`,n).toString()}class ps{constructor(e,t){this.rate=e,this.period=t,this._tracked=[]}limit(){const e=Date.now()-this.period;return this._tracked=this._tracked.filter(t=>t>e),!(this._tracked.length<this.rate&&(this._tracked.push(Date.now()),1))}}const Is="pointer",Ls="scroll",ms="select",Cs="keypress",Ns="drawing",gs="arrows",ws="rectangles",vs="laser",As="disappearing_ink",Ss="full_device",fs="cursor",Ts="universal",Os="highlight",Rs=_("cbio.Device"),ys="_cobrowse_device_id",bs="_cobrowse_device_registration";var Ps=new WeakMap,Ms=new WeakMap,ks=new WeakMap,Ds=new WeakMap,Gs=new WeakMap,Us=new WeakMap,Ws=new WeakMap,xs=new WeakMap,Vs=new WeakMap,zs=new WeakMap,Fs=new WeakMap,js=new WeakMap;class Bs extends hs{constructor(e){if(super(),Q(this,Ps,void 0),Q(this,Ms,void 0),Q(this,ks,void 0),Q(this,Ds,!1),Q(this,Gs,void 0),J(this,"url",()=>new URL(`api/1/devices/${this.id()}`,Bs.api).toString()),J(this,"reset",(e=!1)=>{Rs("resetting device"),clearTimeout(B(ks,this)),H(ks,this,null),e||Le().removeItem(bs),B(Ps,this)&&(B(Ps,this).close(),H(Ps,this,null))}),J(this,"destroy",async()=>(Rs("destroying device"),this.reset(),super.destroy())),J(this,"hasPendingUpdates",()=>{const e=this.field("custom_data")||{},t=B(Gs,this).customData||{};return!!Object.keys(t).find(i=>e[i]!==t[i])}),Q(this,Us,()=>{if(!B(Gs,this).license)throw new Error("License required to generate storage key");return`${B(Gs,this).license}:${Bs.api}`}),J(this,"_saveRegistration",()=>{const e=this.field("next_registration")||3600,t=(new Date).getTime();"number"!=typeof Date.now()&&console.error("Unexpected type returned for Date.now(), expecting number got "+typeof Date.now()),"number"!=typeof t&&console.error("Unexpected type for getTime() of Date, expecting number got "+typeof t);const i={notification_url:this.field("notification_url"),notification_token:this.field("notification_token"),custom_data:this.field("custom_data"),next_registration_time:t+1e3*e};return this.cache({next_registration_time:i.next_registration_time}),Le(B(Us,this).call(this)).setItem(bs,i),this}),J(this,"_loadRegistration",()=>{if(B(Ds,this))return;H(Ds,this,!0);const e=Le(B(Us,this).call(this)).getItem(bs);e&&(Rs("restoring registration",e),this.cache(e))}),J(this,"updateRegistration",async e=>{if(B(Ms,this).limit())throw new Error("Cobrowse update rate limit exceeded. Maybe you're updating custom data too often?");return Rs("updating registration"),await this.update({device:Bs.info,custom_data:B(Gs,this).customData},e),B(js,this).call(this),this._saveRegistration(),this.emit("register"),this}),J(this,"runRegistrationLoop",async()=>{Rs("starting registrations"),this._loadRegistration(),this.reset(!0),(this.hasPendingUpdates()||this.nextRegistration()<=0)&&await this.updateRegistration().catch(()=>{}),B(js,this).call(this),B(Ws,this).call(this)}),J(this,"pauseRegistrationLoop",async()=>{Rs("pausing registrations"),this.reset(!0)}),J(this,"nextRegistration",()=>(this.field("next_registration_time")||0)-(new Date).getTime()),J(this,"clone",()=>{const e=new Bs(B(Gs,this));return super.clone(e),e}),J(this,"_nextUpdate",(e=0)=>Math.max(Math.min(6e4*e,36e5),this.nextRegistration())),Q(this,Ws,(e=0)=>{if(B(ks,this))return void console.error("CobrowseIO: tried to schedule registration while already scheduled");const t=this._nextUpdate(e);H(ks,this,setTimeout(async()=>{if(!B(ks,this))return console.error("Registration loop cancelled");try{return await this.updateRegistration(),H(ks,this,!1),B(Ws,this).call(this)}catch(t){return console.warn("CobrowseIO: registration failed",t),H(ks,this,!1),B(Ws,this).call(this,e+1)}},Math.max(1e3,t)))}),Q(this,xs,()=>_s(this.field("notification_url"))),Q(this,Vs,()=>{const e=this.field("notification_token");return[`cbio.http.headers.authorization.bearer.${window.btoa(e).replaceAll("=","")}`]}),Q(this,zs,()=>{B(Ps,this)||(H(Ps,this,new t({getUrl:B(xs,this),getProtocols:B(Vs,this)})),B(Ps,this).setMaxReconnectDelay(6e4),B(Ps,this).on("error",e=>{e&&console.warn("CobrowseIO notification socket error:",e)}),B(Ps,this).on("event",(e,t)=>{"notification"===e?this.emit("notification",t):"probe"===e&&B(Ps,this).send("alive",t)}),B(Ps,this).on("open",()=>{B(Ps,this).send("filter",{events:["probe","notification"]})}))}),Q(this,Fs,()=>{B(Ps,this)&&(console.log("CobrowseIO: Closing socket"),B(Ps,this).close(),H(Ps,this,null))}),Q(this,js,()=>{const e=this.field("notification_url"),t=this.field("notification_token");e&&t?B(zs,this).call(this):B(Fs,this).call(this)}),Rs("constructed"),!e)throw new Error("Device delegate is required");H(Gs,this,e),H(Ms,this,new ps(10,12e4))}id(){return Bs.deviceId()}get customData(){return this.field("custom_data")||{}}static deviceCredentials(){let e=Le().getItem(ys)||{};return"string"==typeof e&&(e={id:e}),"object"!=typeof e&&(e={}),e.id||(e.id=h()),e.token||(e.token=h()),Le().setItem(ys,e),e}static deviceId(){return this.deviceCredentials().id}static deviceToken(){return this.deviceCredentials().token}static get info(){const e=[Is,Ls,ms,Cs,Ns,gs,ws,As,vs,fs,Ts,Os,"calling"];return/Android|webOS|iPhone|iPad|iPod|Opera Mini/i.test(window.navigator.userAgent)||e.push(Ss),{platform:"web",device:window.navigator.userAgent,device_locale:window.navigator.language,device_timezone:window.Intl.DateTimeFormat().resolvedOptions().timeZone,os_version:window.navigator.platform,app_id:window.location.origin,app_name:window.document.title,app_build_configuration:"release",sdk_version:"3.20.0",capabilities:e}}}const Qs=_("cbio.Session");var Hs=new WeakMap,Ys=new WeakMap,Xs=new WeakMap,Js=new WeakMap,Ks=new WeakMap,$s=new WeakMap,qs=new WeakMap,Zs=new WeakMap,en=new WeakMap,tn=new WeakMap,sn=new WeakMap,nn=new WeakMap,on=new WeakMap;class an extends hs{constructor(e){if(super(),Q(this,Hs,void 0),Q(this,Ys,void 0),Q(this,Xs,{}),Q(this,Js,e=>{this.setHeader("X-CobrowseDeviceToken",e)}),Q(this,Ks,()=>this.getHeader("X-CobrowseDeviceToken")),J(this,"activate",()=>(Qs("activate session"),this.update({state:"active",device:Bs.info,custom_data:B(Hs,this).customData}))),J(this,"end",()=>(Qs("end session"),this.update({state:"ended"}))),J(this,"code",()=>this.field("code")),J(this,"state",()=>this.field("state")),J(this,"isActive",()=>"active"===this.state()),J(this,"isAuthorizing",()=>"authorizing"===this.state()),J(this,"isPending",()=>"pending"===this.state()),J(this,"isEnded",()=>"ended"===this.state()),J(this,"isVirtual",()=>!!this.field("virtual")),J(this,"redactionSelectors",()=>{const e=this.field("redaction_selectors");return Array.isArray(e)?e:[]}),J(this,"unredactionSelectors",()=>{const e=this.field("unredaction_selectors");return Array.isArray(e)?e:[]}),J(this,"agent",()=>this.field("agent")||!1),J(this,"requireConsent",()=>this.field("require_consent")),J(this,"endedReason",()=>this.field("ended_reason")),J(this,"fullDevice",()=>!0===this.field("full_device")||"on"===this.field("full_device")||"requested"===this.field("full_device")),J(this,"setFullDevice",e=>(B(Ys,this).toggle(["laser","drawing","disappearing_ink","arrows","rectangles","pointer","scroll","select","keypress","cursor"],"on"!==e),this.update({full_device:e}))),J(this,"update",e=>super.update($({capabilities:B(Ys,this).toArray()},e))),J(this,"scale",()=>this.field("scale")||.5),J(this,"remoteControl",()=>this.field("remote_control")||"on"),J(this,"setRemoteControl",e=>this.update({remote_control:e})),J(this,"allowRemoteControl",()=>"on"===this.remoteControl()),J(this,"calling",()=>this.field("calling")),J(this,"setCalling",e=>this.update({calling:e})),J(this,"updateResource",e=>{const t=this.isEnded();return super.updateResource(e),this.isEnded()&&!t&&(this.emit("ended",this),this.removeAllListeners()),this}),J(this,"clone",()=>{const e=new an(B(Hs,this));return super.clone(e),e}),Q(this,$s,bi(this,"setMetrics",(e={})=>{H(Xs,this,$($({},B(Xs,this)),e)),this.emit("metrics.updated",this)})),Q(this,qs,bi(this,"serialize",()=>$($({},this.resource),{},{_locals:{token:B(Ks,this).call(this)}}))),Q(this,Zs,bi(this,"serializeSanitized",()=>({state:this.resource.state,redaction_selectors:this.resource.redaction_selectors}))),Q(this,en,bi(this,"deserialize",e=>{const t=e._locals||{};return delete e._locals,B(Js,this).call(this,t.token),this.updateResource(e),this})),Q(this,tn,bi(this,"compress",()=>`${this.resource.id}:${B(Ks,this).call(this)}`)),Q(this,sn,bi(this,"decompress",e=>{const t=e.split(":");return B(en,this).call(this,{_locals:{token:t[t.length-1]},id:t.slice(0,-1).join(":")}),this})),Q(this,nn,bi(this,"proxyToken",()=>this.field("proxy_token"))),Q(this,on,bi(this,"proxyUrl",()=>this.field("proxy_url"))),!e)throw new Error("Session delegate is required");H(Hs,this,e),H(Ys,this,new is(e.capabilities));const t=Math.ceil(Date.now()/36e5);B(Js,this).call(this,u(t+"",Bs.deviceToken()))}get capabilities(){const e=this.field("capabilities");return null==e?B(Ys,this).toArray():B(Ys,this).toArray().filter(t=>null==e?void 0:e.includes(t))}url(){const e=this.id()||this.code();return new URL("api/1/sessions"+(e?`/${e}`:""),an.api).toString()}get created(){return new Date(this.field("created"))}get expires(){return new Date(this.field("expires"))}get activated(){return this.field("activated")?new Date(this.field("activated")):null}get updated(){return this.field("updated")?new Date(this.field("updated")):null}get ended(){return this.field("ended")?new Date(this.field("ended")):null}get metrics(){return B(Xs,this)}}const rn="_cobrowse_active_session",ln=_("cbio.sessionStorage.ForwardingSessionStorage"),cn=function({window:e=window}={}){try{const t=new URL(e.location.href),i=t.searchParams.get(rn);return i?(ln("found forwarded session that can be loaded",i),t.searchParams.delete(rn),e.history.replaceState({},"",t)):ln("no forwarded session to load",t),i}catch(e){console.warn("Failed to attempt to extract forwarded session",e)}}();var dn=new WeakMap;class hn{constructor({activeSessionData:e=cn}={}){Q(this,dn,void 0),H(dn,this,e)}isSupported(e){const t=!!e.trustedOrigins.length;return ln("isSupported?",t),t}load(e){try{if(B(dn,this))return ln("loading session",B(dn,this)),new an(e)[yi].decompress(B(dn,this));ln("no session to load")}catch(e){ln("failed to load forwarded session",e)}return null}store(e,t){t||H(dn,this,null)}reset(e){H(dn,this,null)}}var un=new WeakMap,En=new WeakMap;class _n extends Ri{constructor(t,i){super(),Q(this,un,void 0),Q(this,En,void 0),H(un,this,e(i.trustedOrigins)),H(En,this,()=>t[yi].compress())}get type(){return gi}shouldHandleEvent(e){return!0}shouldHandle(e){const t=new URL(e,window.location.origin);return B(un,this).call(this,t.origin)}handle(e){const t=function(e,t,{window:i=window}={}){try{const s=new URL(e);return s.origin===i.location.origin?(ln("not rewriting url because we are not changing origin",s.toString()),e):(s.searchParams.set(rn,t),ln("rewriting trusted url for an active session",{from:e,to:s.toString()}),"string"==typeof e?s.toString():s)}catch(t){return ln("failed rewriting url",t),e}}(e,B(En,this).call(this));return{rewrittenUrl:t}}}const pn=_("cbio.FrameLoop");class In{constructor(){J(this,"isRunning",()=>this._running),J(this,"setSource",async e=>{if(e.constructor!==(this.source&&this.source.constructor))if(this.isRunning()){this.source&&this.source.capturingWillStop(),this.source=e;try{await this.source.capturingWillStart(),this.invalidateFrame()}catch(e){console.error(e)}}else this.source=e;else pn("frame source type not changed")}),J(this,"getSource",()=>this.source),J(this,"start",async()=>{pn("starting frame loop in",document),this.isRunning()||(this._running=!0,this.source.capturingWillStart())}),J(this,"stop",()=>{this.isRunning()&&(this.source.capturingWillStop(),this._running=!1)}),J(this,"invalidateFrame",()=>{if(!this.isRunning())throw new Error("FrameLoop was destroyed");pn("invalidate frame in",document),this.source&&this.source.reset()}),J(this,"destroy",()=>{pn("destroying frame loop in",document),this.stop(),this.source&&(this.source.destroy(),this.source=null)}),pn("FrameLoop constructed in",document),this._running=!1}}const Ln=new class extends d{constructor(){super(),J(this,"windows",new Set),J(this,"tap",e=>{if(this.windows.has(e))return;this.windows.add(e);const t=this,i=e.history.pushState.bind(e.history);e.history.pushState=function(...s){const n=e.location.href;i(...s),t.emit("navigate",e,n)};const s=e.history.replaceState.bind(e.history);e.history.replaceState=function(...i){const n=e.location.href;s(...i),t.emit("navigate",e,n)};const{insertRule:n}=e.CSSStyleSheet.prototype;e.CSSStyleSheet.prototype.insertRule=function(...e){const i=n.bind(this)(...e);return t.emit("stylechange",this),i};const{deleteRule:o}=e.CSSStyleSheet.prototype;e.CSSStyleSheet.prototype.deleteRule=function(...e){const i=o.bind(this)(...e);return t.emit("stylechange",this),i};const{replace:a}=e.CSSStyleSheet.prototype;e.CSSStyleSheet.prototype.replace=function(...e){const i=a.bind(this)(...e);return t.emit("stylechange",this),i};const{replaceSync:r}=e.CSSStyleSheet.prototype;e.CSSStyleSheet.prototype.replaceSync=function(...e){const i=r.bind(this)(...e);return t.emit("stylechange",this),i};const{attachShadow:c}=e.Element.prototype;e.Element.prototype.attachShadow=function(e){const i=c.bind(this)(e);return t.emit("attachshadow",i),i};const d=e=>{Object.getOwnPropertyNames(e.prototype).forEach(i=>{try{if("function"!=typeof e.prototype[i])return}catch(e){return}const s=e.prototype[i];e.prototype[i]=function(){return this.canvas.__cbio_emit_change||(this.canvas.__cbio_emit_change=l(e=>t.emit("canvaschange",e),500,{leading:!1,trailing:!0})),this.canvas.__cbio_emit_change(this.canvas),s.apply(this,arguments)}})};d(e.CanvasRenderingContext2D),d(e.WebGLRenderingContext),e.WebGL2RenderingContext&&d(e.WebGL2RenderingContext)}),J(this,"untap",()=>{}),this.setMaxListeners(200)}};class mn{constructor(e){J(this,"_init",()=>{this._propertyWatcher||(this._propertyWatcher=new ue(this._onPropertySet),Ln.on("stylechange",this._onStyleSheetChange),Ln.on("navigate",this._onNavigation),Ln.on("canvaschange",this._onCanvasChange))}),J(this,"observe",e=>{if(this._observing.has(e))return;this._init();const{value:t=e.addEventListener}=Object.getOwnPropertyDescriptor(xe.prototype,"addEventListener");t.call(e,"scroll",this._onEvent,{capture:!0,passive:!0}),t.call(e,"focus",this._onFocusChange,{capture:!0,passive:!0}),t.call(e,"blur",this._onFocusChange,{capture:!0,passive:!0}),t.call(e,"change",this._onInputEvent,{capture:!0,passive:!0}),t.call(e,"keydown",this._onInputEvent,{capture:!0,passive:!0}),t.call(e,"keyup",this._onInputEvent,{capture:!0,passive:!0}),t.call(e,"keypress",this._onInputEvent,{capture:!0,passive:!0}),t.call(e,"selectionchange",this._onSelectionEvent,{capture:!0,passive:!0}),t.call(e,"select",this._onSelectionEvent,{capture:!0,passive:!0}),t.call(e,"mouseenter",this._onEvent,{capture:!0,passive:!0}),t.call(e,"mouseleave",this._onEvent,{capture:!0,passive:!0}),t.call(e,"mousedown",this._onEvent,{capture:!0,passive:!0}),t.call(e,"mouseup",this._onEvent,{capture:!0,passive:!0}),Ee.track(e),Gt.track(e),Jt.track(e),this._observing.add(e);const i=(e.ownerDocument||e).defaultView;i&&!this._windows.has(i)&&(this._windows.add(i),Ln.tap(i),Jt.tap(i),this._propertyWatcher.observe(i.HTMLInputElement,"value"),this._propertyWatcher.observe(i.HTMLInputElement,"checked"),this._propertyWatcher.observe(i.HTMLTextAreaElement,"value"),this._propertyWatcher.observe(i.ShadowRoot,"adoptedStyleSheets"),this._propertyWatcher.observe(i.Document,"adoptedStyleSheets"),i.addEventListener&&(i.addEventListener("hashchange",this._onEvent,{capture:!0,passive:!0}),i.addEventListener("resize",this._onEvent,{capture:!0,passive:!0})))}),J(this,"disconnect",()=>{this._observing.forEach(e=>{const{value:t=e.removeEventListener}=Object.getOwnPropertyDescriptor(xe.prototype,"removeEventListener");t.call(e,"scroll",this._onEvent,{capture:!0,passive:!0}),t.call(e,"focus",this._onFocusChange,{capture:!0,passive:!0}),t.call(e,"blur",this._onFocusChange,{capture:!0,passive:!0}),t.call(e,"change",this._onInputEvent,{capture:!0,passive:!0}),t.call(e,"keydown",this._onInputEvent,{capture:!0,passive:!0}),t.call(e,"keyup",this._onInputEvent,{capture:!0,passive:!0}),t.call(e,"keypress",this._onInputEvent,{capture:!0,passive:!0}),t.call(e,"selectionchange",this._onSelectionEvent,{capture:!0,passive:!0}),t.call(e,"select",this._onSelectionEvent,{capture:!0,passive:!0}),t.call(e,"mouseenter",this._onEvent,{capture:!0,passive:!0}),t.call(e,"mouseleave",this._onEvent,{capture:!0,passive:!0}),t.call(e,"mousedown",this._onEvent,{capture:!0,passive:!0}),t.call(e,"mouseup",this._onEvent,{capture:!0,passive:!0}),Ee.untrack(e),Gt.untrack(e),Jt.untrack(e)}),this._observing.clear(),this._windows.forEach(e=>{Ln.untap(e),Jt.untap(e),e&&!de(e)&&e.removeEventListener&&(e.removeEventListener("hashchange",this._onEvent,{capture:!0,passive:!0}),e.removeEventListener("resize",this._onEvent,{capture:!0,passive:!0}))}),this._windows.clear(),this._propertyWatcher&&(this._propertyWatcher.disconnect(),this._propertyWatcher=null,Ln.off("stylechange",this._onStyleSheetChange),Ln.off("navigate",this._onNavigation),Ln.off("canvaschange",this._onCanvasChange))}),J(this,"_getActualTarget",e=>{const{get:t}=Object.getOwnPropertyDescriptor(We.prototype,"target");return t.apply(e)}),J(this,"_target",e=>{const t=this._getActualTarget(e);return t&&t.document||t}),J(this,"_onEvent",(e,t={})=>{this._onModification(this._target(e),$($({},t),{},{type:e.type}))}),J(this,"_onSelectionEvent",e=>{var t;const i=this._getActualTarget(e),s=null!==(t=i.ownerDocument)&&void 0!==t?t:i;var n;s.__last_agent_selection_ts>Date.now()-100||("selectionchange"===e.type&&(["INPUT","TEXTAREA"].includes(null===(n=s.activeElement)||void 0===n?void 0:n.tagName)?(s.activeElement.__cobrowse_user_selection_timestamp=Date.now(),this._onModification(s.activeElement,{type:e.type})):(i.__cobrowse_user_selection_timestamp=Date.now(),this._onModification(i,{type:e.type}))),"select"===e.type&&(i.__cobrowse_user_selection_timestamp=Date.now(),this._onModification(i,{type:e.type})))}),J(this,"_onStyleSheetChange",e=>{e.ownerNode&&this._onModification(e.ownerNode,{type:"stylesheet"});for(const i of this._observing){var t;null!==(t=i.adoptedStyleSheets)&&void 0!==t&&t.includes(e)&&this._onModification(i,{type:"adoptedstylesheet"})}}),J(this,"_onNavigation",e=>{this._onModification(e.document,{type:"navigation"})}),J(this,"_onCanvasChange",e=>{this._onModification(e,{type:"canvas"})}),J(this,"_onFocusChange",e=>{const t=this._getActualTarget(e);null!=t&&(this._onModification(t,{type:e.type}),t.ownerDocument&&this._onModification(t.ownerDocument,{type:e.type}))}),J(this,"_onInputEvent",e=>{const t=this._getActualTarget(e);"SELECT"===t.tagName||"TEXTAREA"===t.tagName?this._onModification(this._target(e),{recursive:!0,type:e.type}):"INPUT"===t.tagName&&("radio"===t.type&&t.name?(t.closest("form")||t.ownerDocument).querySelectorAll(`input[type=radio][name="${t.name}"]`).forEach(t=>this._onModification(t,{type:e.type})):this._onModification(this._target(e),{recursive:!0,type:e.type}))}),J(this,"_onPropertySet",e=>{this._onModification(e,{type:"property"})}),this._onModification=(...t)=>setTimeout(()=>e(...t),0),this._observing=new Set,this._windows=new Set}}const Cn=_("cbio.NodeScheduler");var Nn=new WeakMap,gn=new WeakMap,wn=new WeakMap,vn=new WeakMap,An=new WeakMap,Sn=new WeakMap,fn=new WeakMap,Tn=new WeakMap,On=new WeakSet,Rn=new WeakMap;class yn{constructor(e){X(this,On),Q(this,Nn,null),Q(this,gn,null),Q(this,wn,null),Q(this,vn,0),Q(this,An,null),Q(this,Sn,new Map),Q(this,fn,!1),Q(this,Tn,null),Q(this,Rn,()=>{if(!B(fn,this))return;if(!B(Sn,this).size)return void H(gn,this,setTimeout(B(Rn,this),1e3));B(wn,this)||(H(wn,this,B(Sn,this).entries()),H(vn,this,B(Sn,this).size),H(An,this,performance.now()));let e=0,t=!1;for(;e<50;){var i;const s=null===(i=B(wn,this))||void 0===i?void 0:i.next();if(!s||null!=s&&s.done){t=!0;break}const[n,{checkReady:o,serializerOptions:a}]=s.value;V(On,this,Mn).call(this,n,o,a),e++}if(!t)return void H(Nn,this,requestAnimationFrame(B(Rn,this)));const s=Math.round(performance.now()-B(An,this));Cn(`Took ${s}ms to process queue with size of ${B(vn,this)}`),H(wn,this,null),H(vn,this,0),H(An,this,null),H(gn,this,setTimeout(B(Rn,this),Math.max(1e3-s,0)))}),H(Tn,this,e)}getScheduledAncestor(e){if(B(Sn,this).has(e))return e;for(const t of B(Sn,this).keys())if(t.contains(e))return t;return null}tryScheduleElement(e,t,i){return!!B(Sn,this).has(e)||(B(Sn,this).size>1e3?(Cn("reached queue size limit, skipping scheduling of node"),!1):(B(Sn,this).set(e,{checkReady:t,serializerOptions:i}),B(fn,this)||V(On,this,bn).call(this),!0))}unscheduleElement(e){B(Sn,this).delete(e),B(Sn,this).size||V(On,this,Pn).call(this)}destroy(){Cn("destroy()"),V(On,this,Pn).call(this),B(Sn,this).clear()}}function bn(){Cn("start()"),H(fn,this,!0),H(Nn,this,requestAnimationFrame(B(Rn,this)))}function Pn(){Cn("stop()"),H(fn,this,!1),B(Nn,this)&&cancelAnimationFrame(B(Nn,this)),H(Nn,this,null),B(gn,this)&&clearTimeout(B(gn,this)),H(gn,this,null),H(wn,this,null),H(vn,this,0),H(An,this,null)}function Mn(e,t,i){var s;e.isConnected?t(e)&&(Cn("scheduling node to be sent",e),this.unscheduleElement(e),null===(s=B(Tn,this))||void 0===s||s.call(this,e,i)):B(Sn,this).delete(e)}function kn(e){return"none"!==getComputedStyle(e).display}const Dn=_("cbio.PatchStream");var Gn=new WeakMap;class Un extends d{constructor(e,t={}){var i;super(),Q(this,Gn,{includeVisibility:!1}),J(this,"start",()=>{Dn("starting patch stream for",this._root),this._documents=new Set,this._iframeBridge.on("patch",this._onXDocIframeUpdate),performance.mark("cb:patch-stream-observe-start"),this._observe(this._root),performance.mark("cb:patch-stream-observe-end"),performance.measure("cb:patch-stream-observe","cb:patch-stream-observe-start","cb:patch-stream-observe-end"),Ln.on("attachshadow",this._onAttachShadow)}),J(this,"_serializeWithScheduling",(e,t,i)=>{var s;if(!(s=e)||1!==s.nodeType||!s.isConnected||s.ownerDocument.head.contains(s)||null===s.firstElementChild||kn(e)||!function(e){var t;let i=0;const s=null===(t=e.ownerDocument)||void 0===t?void 0:t.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);if(!s)return!1;for(;s.nextNode();)if(i++,i>5)return!0;return!1}(e))return Rt.serialize(e,t,i);if(!this._nodeScheduler.tryScheduleElement(e,kn,i))return Rt.serialize(e,t,i);const n=$($({},i),{},{skipChildren:!0,forceHidden:!0});return t([]),Rt.serialize(e,t,n)}),J(this,"partialSync",e=>{const t=be.getById(e);t&&this.emit("patch",{_t:"partialsync",modified:[Rt.serialize(t,void 0,B(Gn,this))]})}),J(this,"stop",()=>{Dn("stopping patch stream for",this._root),this._eventObserver.disconnect(),this._mutationObserver.disconnect(),this._iframeBridge.removeListener("patch",this._onXDocIframeUpdate),this._documents&&this._documents.clear(),this._documents=null,Ln.off("attachshadow",this._onAttachShadow)}),J(this,"destroy",()=>{Dn("destroying patch stream for",this._root),this.stop(),this.removeAllListeners(),je.depthFirst(this._root,this._untrack),this._mutationObserver=null,this._eventObserver=null,this._iframeBridge=null,this._root=null,this._nodeScheduler.destroy(),this._nodeScheduler=null}),J(this,"_track",e=>{ye.isDOMNode(e)&&(be.track(e),e.nodeType===window.Node.DOCUMENT_NODE&&this._observe(e),e.nodeType===window.Node.DOCUMENT_FRAGMENT_NODE&&this._observe(e),"IFRAME"===e.tagName&&(this._iframeBridge.track(e),e.removeEventListener("load",this._onIframeLoad,{capture:!0}),e.addEventListener("load",this._onIframeLoad,{capture:!0})))}),J(this,"_untrack",e=>{be.forget(e),ye.isDOMNode(e)&&"IFRAME"===e.tagName&&(e.removeEventListener("load",this._onIframeLoad,{capture:!0}),this._iframeBridge.remove(e))}),J(this,"_onAttachShadow",e=>{var t;const i=e.host;be.get(i)&&(null!==(t=_t.instance)&&void 0!==t&&t.isRedacted(i)||(this._observe(e),je.isIgnored(i)||this.emit("patch",{_t:"attachshadow",modified:[Rt.serialize(i,void 0,B(Gn,this)),je.depthFirstMapped(e,(e,t)=>Rt.serialize(e,t,B(Gn,this)))]})))}),J(this,"_onXDocIframeUpdate",(e,{iframe:t})=>{var i;Dn("xdoc iframe updated",t,e),t&&(null!==(i=_t.instance)&&void 0!==i&&i.isRedacted(t)||je.isIgnored(t)||(t.__document_id=e.document_id,this.emit("patch",{_t:"xdociframeupdate",modified:[Rt.serialize(t,void 0,B(Gn,this)),...e.patch]})))}),J(this,"_onIframeLoad",({target:e})=>{var t;Dn("iframe loaded",e),null!==(t=_t.instance)&&void 0!==t&&t.isRedacted(e)||(de(e)||this._observe(e.contentWindow.document),this._iframeBridge.track(e),je.isIgnored(e)||this.emit("patch",{_t:"iframeupdate",modified:[je.depthFirstMapped(e,(e,t)=>Rt.serialize(e,t,B(Gn,this)))]}))}),J(this,"_onEventMutation",(e,t={})=>{var i;if(!this._eventObserver)return;if(this._mutationObserver&&this._onDOMChange(this._mutationObserver.takeRecords()),"TEXTAREA"===e.tagName&&je.depthFirst(e,this._track),!be.get(e))return;if(null!==(i=_t.instance)&&void 0!==i&&i.isRedacted(e))return;if(je.isIgnored(e))return;const s=$($({},B(Gn,this)),{},{rasterizeCanvas:"canvas"===t.type});this.emit("patch",{_t:`eventmutation:${t.type}`,modified:[(()=>{var i;const n=null===(i=this._nodeScheduler)||void 0===i?void 0:i.getScheduledAncestor(e);n&&this._nodeScheduler.unscheduleElement(n);const o=n||e,a=Boolean(n),r=a||t.recursive?je.depthFirstMapped(o,(e,t)=>this._serializeWithScheduling(e,t,s)):Rt.serialize(o,void 0,s);return a&&r.attributes&&void 0===r.attributes.style&&(r.attributes.style=""),r})()]})}),J(this,"_getModifications",e=>{const t=new Set,i=new Set,s=new Set;return e.forEach(e=>{("characterData"===e.type||i.has(e.target)||be.get(e.target))&&function(e,t,i,s){const n=new Set(e.addedNodes?[].slice.call(e.addedNodes):[]);s.has(e.target)||t.add(e.target);for(const e of n)je.depthFirst(e,e=>{t.add(e),s.delete(e),i.add(e)});e.removedNodes&&[].slice.call(e.removedNodes).forEach(e=>{je.depthFirst(e,e=>{t.delete(e),i.delete(e),s.add(e)})})}(e,i,s,t)}),t.forEach(e=>this._untrack(e)),i.forEach(e=>this._track(e)),{added:s,modified:i,removed:t}}),J(this,"_onDOMChange",e=>{var t,i;const{added:s,modified:n,removed:o}=this._getModifications(e),a=null!==(t=null===(i=_t.instance)||void 0===i?void 0:i.notifyChanges(e,s,n,o))&&void 0!==t?t:[],r=new Map,l=[...n,...a];for(const e of l){var c;const t=null===(c=this._nodeScheduler)||void 0===c?void 0:c.getScheduledAncestor(e);t&&this._nodeScheduler.unscheduleElement(t);const i=t||e,s=Boolean(t),n=r.get(i);(void 0===n||!n&&s)&&r.set(i,s)}if(0===r.size)return;Dn("DOM changed",r);const d=[];for(const[e,t]of r){const i=t?je.depthFirstMapped(e,(e,t)=>this._serializeWithScheduling(e,t,B(Gn,this))):Rt.serialize(e,void 0,B(Gn,this));i&&(t&&i.attributes&&void 0===i.attributes.style&&(i.attributes.style=""),d.push(i))}Dn("DOM changes serialized",d),this.emit("patch",{_t:"domchange",modified:d})}),J(this,"_onScheduledNodeReady",(e,t)=>{Dn("scheduled element ready",e);const i=je.depthFirstMapped(e,(e,i)=>Rt.serialize(e,i,t));this.emit("patch",{_t:"scheduled",modified:[i]})}),this._root=e,B(Gn,this).includeVisibility=null!==(i=t.includeVisibility)&&void 0!==i&&i,this._mutationObserver=new Ue(this._onDOMChange),this._eventObserver=new mn(this._onEventMutation),this._nodeScheduler=new yn(this._onScheduledNodeReady),this._iframeBridge=Ma}forceUpdate(){Dn("forcing entire state update from",this._root);const e=$($({},B(Gn,this)),{},{rasterizeCanvas:!0});performance.mark("cb:serialize-head-start");const t=$($({},Rt.serialize(this._root,void 0,B(Gn,this))),{},{scroll:void 0,childNodes:[$($({},Rt.serialize(this._root.documentElement,void 0,B(Gn,this))),{},{childNodes:[je.depthFirstMapped(this._root.head,(e,t)=>Rt.serialize(e,t,B(Gn,this)))]})]});performance.mark("cb:serialize-head-end"),performance.measure("cb:serialize-head","cb:serialize-head-start","cb:serialize-head-end"),this.emit("patch",{_t:"pre-force",flush:!0,modified:[t]}),performance.mark("cb:serialize-body-start");const i=je.depthFirstMapped(this._root,(t,i)=>this._serializeWithScheduling(t,i,e));performance.mark("cb:serialize-body-end"),performance.measure("cb:serialize-body","cb:serialize-body-start","cb:serialize-body-end"),this.emit("patch",{_t:"forced",flush:!0,modified:[i]})}_observe(e){if(e.nodeType!==window.Node.DOCUMENT_NODE&&e.nodeType!==window.Node.DOCUMENT_FRAGMENT_NODE)throw new Error(`CobrowseIO: observed a non-document or fragment node (type=${e.nodeType})`);if(!this._documents.has(e)){Dn("starting observation of",e),this._documents.add(e),Dn("doing initial node tracking on observe for",e),je.depthFirst(e,this._track),this._eventObserver.observe(e);try{this._mutationObserver.observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}catch(t){console.error("CobrowseIO failed to start mutation observer for",e)}}}}class Wn{constructor(e){this._id=e,this.reset()}_difference(e,t){if(!t)return $({},e);const i={};for(const[s,n]of Object.entries(e))U(n,t[s])||(i[s]=n);return i}compress(){const e=[],t=Object.values(this.modified);for(let i=0;i<t.length;i++){const s=t[i],n=this.state.node(s.id),o=this._difference(s,this._flatten(n||{}));Object.keys(o).length>0&&(o.id=s.id,e.push(o))}return e}mark(){return this.state.applyPatch(Object.values(this.modified)),this.modified={},this}_flatten(e){return e.childNodes?$($({},e),{},{childNodes:e.childNodes.map(e=>({id:e.id}))}):e}push(e){if(!e||!e.modified)return console.error("invalid patch",e),this;for(const t of e.modified)t&&ne(t,e=>{this.modified[e.id]=$($({},this.modified[e.id]),this._flatten(e))});return this}reset(e){return this.state=new le(this._id),this.modified={},e&&this.push({_t:"reset",modified:[e]}),this}}const xn=_("cbio.DOMFrameSource");var Vn=new WeakMap;class zn{constructor(e,t={}){Q(this,Vn,{}),J(this,"_throttleCompressAndEmitFrame",l(()=>this._compressAndEmitFrame(),110)),J(this,"capturingWillStart",()=>{if(xn("capturingWillStart for DOMFrameSource in",document),this._sendInterval)throw new Error("DOMFrameSource already running");this._compression||(this._compression=new Wn(be.track(document))),this._patchStream||(this._patchStream=new Un(document,B(Vn,this))),fe.on("activate",this.reset),this._patchStream.on("patch",e=>{this._compression.push(e),e.flush?this._compressAndEmitFrame():this._throttleCompressAndEmitFrame()}),this._sendInterval=setInterval(()=>this._compressAndEmitFrame(),500),this._patchStream.start()}),J(this,"capturingWillStop",()=>{xn("capturingWillStop for DOMFrameSource in",document),fe.removeListener("activate",this.reset),this._sendInterval&&(clearInterval(this._sendInterval),this._sendInterval=null),this._patchStream&&(this._patchStream.destroy(),this._patchStream=null),this._compression&&(this._compression.reset(),this._compression=null)}),J(this,"setCodecs",e=>{}),J(this,"reset",()=>{xn("resetting DOMFrameSource in",document),setTimeout(()=>{var e,t;null===(e=this._compression)||void 0===e||e.reset(),null===(t=this._patchStream)||void 0===t||t.forceUpdate()},0)}),J(this,"destroy",()=>{xn("destroying DOMFrameSource in",document),this.capturingWillStop(),this._onUpdate=null}),J(this,"partialSync",e=>{var t;null===(t=this._patchStream)||void 0===t||t.partialSync(e)}),xn("DOMFrameSource constructed in",document),this._onUpdate=e,H(Vn,this,t)}setOptions(e){H(Vn,this,e)}_compressAndEmitFrame(){if(!this._compression)return;if(!document||!be.get(document))return;const e=this._compression.compress();e.length&&this._onUpdate({document_id:be.get(document),patch:e})&&this._compression.mark()}}class Fn{constructor(){this.videoTrack={},this.audioTrack={}}}class jn{}J(jn,"Error","error"),J(jn,"MediaInfo","media-info"),J(jn,"MediaPacket","media-packet");const Bn=c,Qn={timerInterval:100,logCallback:null};class Hn extends Bn{constructor(e,t){super(),this.options=t?$($({},Qn),t):Qn,this.mediaRecorder=e,this.mediaInfo=new Fn,this.mediaRecorder.addEventListener("dataavailable",async e=>{this.addBlob(e.data)}),this.mediaRecorder.addEventListener("error",e=>{this.emit(jn.Error,e.error)})}start(){this.mediaRecorder.start(),"function"==typeof this.mediaRecorder.requestData?this.timer=window.setInterval(()=>{this.mediaRecorder.requestData()},this.options.timerInterval):this.timer=window.setTimeout(()=>{this.mediaRecorder.stop()},this.options.timerInterval)}stop(){"recording"===this.mediaRecorder.state&&this.mediaRecorder.stop(),this.timer&&(clearInterval(this.timer),this.timer=null)}static isSupported(e){return"undefined"!=typeof MediaRecorder&&"function"==typeof MediaRecorder.prototype.requestData&&"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported(e)}}class Yn{}function Xn(e,t){const i=function(e){for(var t=7;t>3;t--)if(e&1<<t)return 8-t;throw Error("invalid ebml element id")}(e.current);if(i>e.bytesAvailable)return!1;let s=e.current;for(var n=0;n<i-1;++n)s=s<<8|e.nextUnsafe();return e.nextUnsafe(),e.checkBounds(),t.id=s,t.idLength=i,!0}J(Yn,"Ebml",440786851),J(Yn,"EbmlVersion",17030),J(Yn,"EbmlReadVersion",17143),J(Yn,"EbmlMaxIdLength",17138),J(Yn,"EbmlMaxSizeLength",17139),J(Yn,"DocType",17026),J(Yn,"DocTypeVersion",17031),J(Yn,"DocTypeReadVersion",17029),J(Yn,"Void",236),J(Yn,"Segment",408125543),J(Yn,"SeekHead",290298740),J(Yn,"Seek",19899),J(Yn,"SeekID",21419),J(Yn,"SeekPosition",21420),J(Yn,"Info",357149030),J(Yn,"TimestampScale",2807729),J(Yn,"Duration",17545),J(Yn,"DateUTC",17505),J(Yn,"Title",31657),J(Yn,"MuxingApp",19840),J(Yn,"WritingApp",22337),J(Yn,"Cluster",524531317),J(Yn,"Timestamp",231),J(Yn,"SimpleBlock",163),J(Yn,"SegmentUID",29604),J(Yn,"Tracks",374648427),J(Yn,"TrackEntry",174),J(Yn,"TrackNumber",215),J(Yn,"TrackUID",29637),J(Yn,"TrackType",131),J(Yn,"FlagEnabled",185),J(Yn,"FlagDefault",136),J(Yn,"FlagForced",21930),J(Yn,"FlagLacing",156),J(Yn,"MinCache",28135),J(Yn,"MaxBlockAdditionID",21998),J(Yn,"CodecID",134),J(Yn,"CodecDecodeAll",170),J(Yn,"SeekPreRoll",22203),J(Yn,"Video",224),J(Yn,"FlagInterlaced",154),J(Yn,"PixelWidth",176),J(Yn,"PixelHeight",186),J(Yn,"DefaultDuration",2352003),J(Yn,"TrackTimestampScale",2306383),J(Yn,"CodecName",2459272),J(Yn,"CodecPrivate",25506),J(Yn,"Audio",225),J(Yn,"SamplingFrequency",181),J(Yn,"Channels",159),J(Yn,"Cues",475249515),J(Yn,"CuePoint",187),J(Yn,"CueTime",179),J(Yn,"CueTrackPositions",183),J(Yn,"CueTrack",247),J(Yn,"CueClusterPosition",241),J(Yn,"CueRefTime",150),J(Yn,"CueBlockNumber",21368),J(Yn,"Position",167),J(Yn,"Colour",21936);class Jn{}function Kn(e){switch(e){case Yn.Segment:case Yn.Ebml:case Yn.SeekHead:case Yn.Seek:case Yn.Cluster:case Yn.Info:case Yn.Tracks:case Yn.TrackEntry:case Yn.Video:case Yn.Audio:case Yn.Cues:case Yn.CuePoint:case Yn.CueTrackPositions:case Yn.Colour:return Jn.Master;case Yn.EbmlVersion:case Yn.EbmlReadVersion:case Yn.EbmlMaxIdLength:case Yn.EbmlMaxSizeLength:case Yn.DocTypeVersion:case Yn.DocTypeReadVersion:case Yn.SeekPosition:case Yn.TimestampScale:case Yn.Timestamp:case Yn.TrackNumber:case Yn.TrackUID:case Yn.TrackType:case Yn.FlagEnabled:case Yn.FlagDefault:case Yn.FlagForced:case Yn.FlagLacing:case Yn.MinCache:case Yn.MaxBlockAdditionID:case Yn.CodecDecodeAll:case Yn.SeekPreRoll:case Yn.FlagInterlaced:case Yn.PixelWidth:case Yn.PixelHeight:case Yn.DefaultDuration:case Yn.Channels:case Yn.CueTime:case Yn.CueTrack:case Yn.CueClusterPosition:case Yn.CueRefTime:case Yn.CueBlockNumber:case Yn.Position:return Jn.UnsignedInteger;case Yn.DocType:case Yn.CodecID:return Jn.String;case Yn.Void:case Yn.SeekID:case Yn.SimpleBlock:case Yn.SegmentUID:case Yn.CodecPrivate:return Jn.Binary;case Yn.Duration:case Yn.TrackTimestampScale:case Yn.SamplingFrequency:return Jn.Float;case Yn.DateUTC:return Jn.Date;case Yn.Title:case Yn.MuxingApp:case Yn.WritingApp:case Yn.CodecName:return Jn.Utf8String;default:throw Error(`cannot determine type of unknown ebml element with id ${e}`)}}function $n(e){let t=0;return e.forEach(e=>{t=t<<8|e}),t}J(Jn,"Unknown",0),J(Jn,"Master",1),J(Jn,"UnsignedInteger",2),J(Jn,"SignedInteger",3),J(Jn,"String",4),J(Jn,"Utf8String",5),J(Jn,"Binary",6),J(Jn,"Float",7),J(Jn,"Date",8);class qn{constructor(){this.array=null,this.current=null,this.offset=0}addArray(e){if(null!=e&&0!=e.length)if(this.bytesToSkip>=e.length)this.bytesToSkip-=e.length;else{if(this.bytesToSkip&&(e=e.slice(this.bytesToSkip)),this.array){let t=new Uint8Array(this.array.length-this.offset+e.length);t.set(this.offset?this.array.slice(this.offset):this.array,0),t.set(e,this.array.length-this.offset),this.array=t,this.offset=0}else this.array=e;this.current=this.array[0]}}checkBounds(){if(this.offset===this.array.length)this.offset=0,this.current=null,this.array=null;else{if(!(this.offset<this.array.length))throw Error(`invalid Uint8ArrayAggregator state, offset (${this.offset}) is larger than bytes in the current array (${this.array.length})`);this.current=this.array[this.offset]}}next(){return this.array?(this.offset++,this.checkBounds(),this.current):null}nextUnsafe(){return this.offset++,this.current=this.array[this.offset],this.current}get bytesAvailable(){return this.array?this.array.length-this.offset:0}trim(){if(this.array)if(this.offset<this.array.length)this.array=this.array.slice(this.offset),this.offset=0,this.current=this.array[0];else{if(this.offset>this.array.length)throw Error(`invalid Uint8ArrayAggregator state, offset (${this.offset}) is larger than bytes in the current array (${this.array.length})`);this.array=null,this.offset=0,this.current=null}}extract(e){if(this.bytesAvailable>=e){const t=this.offset;let i=this.array.slice(t,t+e);return this.offset+=e,this.current=this.array[this.offset],this.checkBounds(),i}return null}skip(e){if(this.bytesAvailable>=e)return this.offset+=e,this.current=this.array[this.offset],void this.checkBounds();e-=this.bytesAvailable,this.array=null,this.offset=0,this.current=null,this.bytesToSkip=e}}class Zn{get elementSize(){return this.idLength+this.sizeLength+this.size}get id(){return this._id}set id(e){this._id=e,this.name=function(e){switch(e){case Yn.Ebml:return"EBML";case Yn.EbmlVersion:return"EBMLVersion";case Yn.EbmlReadVersion:return"EBMLReadVersion";case Yn.EbmlMaxIdLength:return"EBMLMaxIDLength";case Yn.EbmlMaxSizeLength:return"EBMLMaxSizeLength";case Yn.DocType:return"DocType";case Yn.DocTypeVersion:return"DocTypeVersion";case Yn.DocTypeReadVersion:return"DocTypeReadVersion";case Yn.Void:return"Void";case Yn.Segment:return"Segment";case Yn.SeekHead:return"SeekHead";case Yn.Seek:return"Seek";case Yn.SeekID:return"SeekID";case Yn.SeekPosition:return"SeekPosition";case Yn.Info:return"Info";case Yn.TimestampScale:return"TimestampScale";case Yn.Duration:return"Duration";case Yn.DateUTC:return"DateUTC";case Yn.Title:return"Title";case Yn.MuxingApp:return"MuxingApp";case Yn.WritingApp:return"WritinApp";case Yn.Cluster:return"Cluster";case Yn.Timestamp:return"Timestamp";case Yn.SimpleBlock:return"SimpleBlock";case Yn.SegmentUID:return"SegmentUID (unsupported by WebM)";case Yn.Tracks:return"Tracks";case Yn.TrackEntry:return"TrackEntry";case Yn.TrackNumber:return"TrackNumber";case Yn.TrackUID:return"TrackUID";case Yn.TrackType:return"TrackType";case Yn.FlagEnabled:return"FlagEnabled";case Yn.FlagDefault:return"FlagDefault";case Yn.FlagForced:return"FlagForced";case Yn.FlagLacing:return"FlagLacing";case Yn.MinCache:return"MinCache";case Yn.MaxBlockAdditionID:return"MaxBlockAdditionID";case Yn.CodecID:return"CodecID";case Yn.CodecDecodeAll:return"CodecDecodeAll";case Yn.SeekPreRoll:return"SeekPreRoll";case Yn.Video:return"Video";case Yn.FlagInterlaced:return"FlagInterlaced";case Yn.PixelWidth:return"PixelWidth";case Yn.PixelHeight:return"PixelHeight";case Yn.DefaultDuration:return"DefaultDuration";case Yn.TrackTimestampScale:return"TrackTimestampScale";case Yn.CodecName:return"CodecName";case Yn.CodecPrivate:return"CodecPrivate";case Yn.Audio:return"Audio";case Yn.SamplingFrequency:return"SamplingFrequency";case Yn.Channels:return"Channels";case Yn.Cues:return"Cues";case Yn.CuePoint:return"CuePoint";case Yn.CueTime:return"CueTime";case Yn.CueTrackPositions:return"CueTrackPositions";case Yn.CueTrack:return"CueTrack";case Yn.CueClusterPosition:return"CueClusterPosition";case Yn.CueRefTime:return"CueRefTime";case Yn.CueBlockNumber:return"CueBlockNumber";case Yn.Position:return"Position";case Yn.Colour:return"Colour";default:return""}}(this._id),this.type=Kn(this._id)}}function eo(e,t){const i=function(e){if(1==e)return 8;for(var t=7;t>0;t--)if(e&1<<t)return 8-t;throw Error("invalid ebml element size")}(e.current);if(i>e.bytesAvailable)return!1;let s=e.current-(1<<8-i);for(var n=0;n<i-1;++n)s=s<<8|e.nextUnsafe();return e.nextUnsafe(),e.checkBounds(),t.sizeLength=i,t.size=s===1<<8*i-1?-1:s,!0}function to(e,t){switch(e){case Jn.UnsignedInteger:case Jn.SignedInteger:return $n(t);case Jn.String:return String.fromCharCode.apply(null,t);case Jn.Utf8String:case Jn.Float:throw new Error(`cannot read value of element with type ${e}`);case Jn.Date:return 978307200+$n(t);case Jn.Binary:return t}}class io{constructor(e,t){this.data=e,this.ptsMs=t}}function so(){return new Promise(e=>{let t=new FileReader;t.onload=()=>{e(t.result)},t.readAsArrayBuffer(this)})}class no extends Hn{constructor(e,t){super(e,t),this.state=no.stateParseElementId,this.currentEbmlElement=new Zn,this.uint8ArrayAggregator=new qn,this.clusterTimestamp=0,this.timestampMsScale=1,this.ebmlElementStack=[],Blob.prototype.arrayBuffer=Blob.prototype.arrayBuffer||so}async addBlob(e){try{for(this.uint8ArrayAggregator.addArray(new Uint8Array(await e.arrayBuffer()));this.uint8ArrayAggregator.bytesAvailable;)switch(this.state){case no.stateParseElementId:if(!Xn(this.uint8ArrayAggregator,this.currentEbmlElement))break;null==this.options.logCallback||this.options.logCallback(`got new current ebml element (id: ${this.currentEbmlElement.id}, name: ${this.currentEbmlElement.name})`),this.state=no.stateParseElementLength;break;case no.stateParseElementLength:if(!eo(this.uint8ArrayAggregator,this.currentEbmlElement))break;null==this.options.logCallback||this.options.logCallback(`got size ${this.currentEbmlElement.size} for current ebml element (id: ${this.currentEbmlElement.id}, name: ${this.currentEbmlElement.name})`),this.ebmlElementStack.length&&-1==this.currentEbmlElement.size&&(this.ebmlElementStack=[]),this.state=no.stateParseElementValue;break;case no.stateParseElementValue:const e=Kn(this.currentEbmlElement.id);let i=e!==Jn.Master||this.currentEbmlElement.id===Yn.Colour;if(e===Jn.Master&&-1!==this.currentEbmlElement.size&&this.ebmlElementStack.push({element:Object.assign(new Zn,this.currentEbmlElement),bytesRemaining:this.currentEbmlElement.size}),this.currentEbmlElement.id===Yn.CodecID){i=!1;let e=this.uint8ArrayAggregator.extract(this.currentEbmlElement.size);if(null==e)break;const t=to(this.currentEbmlElement.type,e);1===this.currentTrackType?this.mediaInfo.videoTrack.codecName=t:2===this.currentTrackType&&(this.mediaInfo.audioTrack.codecName=t),null==this.options.logCallback||this.options.logCallback(`got codec id ${t}`)}else if(this.currentEbmlElement.id===Yn.CodecPrivate){if(i=!1,null==this.uint8ArrayAggregator.extract(this.currentEbmlElement.size))break}else if(this.currentEbmlElement.id===Yn.TimestampScale){i=!1;let e=this.uint8ArrayAggregator.extract(this.currentEbmlElement.size);if(null==e)break;this.mediaInfo.timestampScale=to(this.currentEbmlElement.type,e),this.timestampMsScale=this.mediaInfo.timestampScale/1e6,null==this.options.logCallback||this.options.logCallback(`got timestamp scale ${this.mediaInfo.timestampScale}`)}else if(this.currentEbmlElement.id===Yn.Timestamp){i=!1;let e=this.uint8ArrayAggregator.extract(this.currentEbmlElement.size);if(null==e)break;this.clusterTimestamp=to(this.currentEbmlElement.type,e),null==this.options.logCallback||this.options.logCallback(`got cluser timestamp ${this.clusterTimestamp}`)}else if(this.currentEbmlElement.id===Yn.TrackType){i=!1;let e=this.uint8ArrayAggregator.extract(this.currentEbmlElement.size);if(null==e)break;this.currentTrackType=to(this.currentEbmlElement.type,e),null==this.options.logCallback||this.options.logCallback(`got track with type ${this.currentTrackType}`)}else if(this.currentEbmlElement.id===Yn.SimpleBlock){i=!1;let e=this.uint8ArrayAggregator.extract(this.currentEbmlElement.size);if(null==e)break;let t=new qn;t.addArray(e);let s={};eo(t,s),s.size;let n=$n(t.extract(2));t.current,t.next(),t.trim();let o=(this.clusterTimestamp+n)*this.timestampMsScale;this.emit(jn.MediaPacket,new io(t.array,o))}if(i&&this.uint8ArrayAggregator.skip(this.currentEbmlElement.size),e!==Jn.Master&&this.ebmlElementStack.length){this.ebmlElementStack[this.ebmlElementStack.length-1].bytesRemaining-=this.currentEbmlElement.elementSize;do{if(0!==this.ebmlElementStack[this.ebmlElementStack.length-1].bytesRemaining)break;var t=this.ebmlElementStack.pop();this.ebmlElementStack.length&&(this.ebmlElementStack[this.ebmlElementStack.length-1].bytesRemaining-=t.element.elementSize),t.element.id===Yn.Tracks&&this.emit(jn.MediaInfo,this.mediaInfo)}while(this.ebmlElementStack.length)}this.state=no.stateParseElementId}this.uint8ArrayAggregator.trim()}catch(e){this.stop(),this.emit(jn.Error,e)}}}J(no,"stateParseElementId",1),J(no,"stateParseElementLength",2),J(no,"stateParseElementValue",3);const oo=_("cbio.H264Encoder");var ao=new WeakMap,ro=new WeakMap,lo=new WeakMap,co=new WeakMap;class ho{constructor(e,t){if(Q(this,ao,void 0),Q(this,ro,void 0),Q(this,lo,void 0),Q(this,co,[]),J(this,"reset",()=>{oo("resetting H264Encoder"),B(co,this).forEach(e=>{B(ao,this).handleFrame(e,ho.MIME_TYPE,1/0)})}),J(this,"destroy",()=>{oo("destroy H264Encoder"),B(lo,this)&&(B(lo,this).stop(),H(lo,this,null)),H(co,this,null)}),oo("H264Encoder constructed"),H(ao,this,t),H(ro,this,e),H(lo,this,function(e){let t;return 0==("undefined"!=typeof MediaRecorder)?null:((0==("function"==typeof MediaRecorder.isTypeSupported)||MediaRecorder.isTypeSupported("video/webm;codecs=h264"))&&(t=new no(new MediaRecorder(e,{mimeType:"video/webm;codecs=h264"}),void 0)),t)}(e)),!B(lo,this))throw new Error("Failed to create MediaRecorderDemuxer");return B(lo,this).on("media-packet",({data:e})=>{if(null===B(lo,this))return;let t;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]?t=e[4]:0===e[0]&&0===e[1]&&1===e[2]&&(t=e[3]),7==(31&t)&&H(co,this,[]),B(co,this).push(e),B(ao,this).handleFrame(e,ho.MIME_TYPE,1/0)}),B(lo,this).start()}static isSupported(){return Hn.isSupported("video/webm;codecs=h264")}}J(ho,"MIME_TYPE","video/avc");const uo=_("cbio.JPEGEncoder");var Eo=new WeakMap,_o=new WeakMap,po=new WeakMap,Io=new WeakMap,Lo=new WeakMap;class mo{constructor(e,t){Q(this,Eo,void 0),Q(this,_o,void 0),Q(this,po,void 0),Q(this,Io,void 0),Q(this,Lo,()=>{if(!B(po,this))return;const e=B(po,this).scale();B(_o,this).width=B(Eo,this).videoWidth*e,B(_o,this).height=B(Eo,this).videoHeight*e,B(_o,this).getContext("2d").drawImage(B(Eo,this),0,0,B(_o,this).width,B(_o,this).height),B(_o,this).toBlob(async e=>{if(!B(po,this))return;const t=new Uint8Array(await new Response(e).arrayBuffer());B(po,this).handleFrame(t,mo.MIME_TYPE,1)},mo.MIME_TYPE,.5)}),J(this,"reset",()=>{}),J(this,"destroy",()=>{uo("destroy JPEGEncoder"),B(Io,this)&&(clearInterval(B(Io,this)),H(Io,this,null)),H(po,this,null),H(Eo,this,null),H(_o,this,null)}),uo("JPEGEncoder constructed"),H(po,this,t),H(Eo,this,document.createElement("video")),H(_o,this,document.createElement("canvas")),B(Eo,this).srcObject=e,B(Eo,this).play(),H(Io,this,setInterval(B(Lo,this),100))}}J(mo,"MIME_TYPE","image/jpeg");const Co=_("cbio.MediaStreamFrameSource");var No=new WeakMap,go=new WeakMap,wo=new WeakMap,vo=new WeakMap,Ao=new WeakMap,So=new WeakMap,fo=new WeakMap;class To{constructor(e){Q(this,No,void 0),Q(this,go,void 0),Q(this,wo,void 0),Q(this,vo,null),Q(this,Ao,[]),Q(this,So,()=>B(Ao,this).length&&!B(Ao,this).includes(ho.MIME_TYPE)||!ho.isSupported()?mo:ho),Q(this,fo,async e=>{const t=B(So,this).call(this);var i;return B(vo,this)instanceof t||(Co("Changing encoder to",t),null===(i=B(vo,this))||void 0===i||i.destroy(),H(vo,this,new t(e,B(wo,this)))),B(vo,this)}),J(this,"setCodecs",e=>{H(Ao,this,e||[]),B(go,this)&&B(fo,this).call(this,B(go,this))}),J(this,"capturingWillStart",async()=>{Co("capturingWillStart for MediaStreamFrameSource");const e=await B(wo,this).requestPermission();if(e)try{if(e instanceof MediaStream?H(go,this,e):H(go,this,await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always",width:{ideal:1400},height:{ideal:1e3},frameRate:{max:10}},audio:!1,selfBrowserSurface:"include"})),[ee(H,[No,this])._]=B(go,this).getVideoTracks(),!B(No,this))throw new Error("failed to get display media track");B(No,this).onended=()=>{Co("track ended"),H(No,this,null),B(wo,this).captureEnded(),this.destroy()},B(fo,this).call(this,B(go,this)),B(wo,this).captureStarted(B(go,this))}catch(e){B(wo,this).captureEnded(e)}}),J(this,"capturingWillStop",()=>{var e;Co("capturingWillStop for MediaStreamFrameSource"),null===(e=B(vo,this))||void 0===e||e.destroy(),H(vo,this,null),H(go,this,null),B(No,this)&&(B(No,this).stop(),H(No,this,null),B(wo,this).captureEnded())}),J(this,"reset",()=>{var e;Co("resetting MediaStreamFrameSource"),null===(e=B(vo,this))||void 0===e||e.reset()}),J(this,"destroy",()=>{var e;Co("destroying MediaStreamFrameSource"),this.capturingWillStop(),H(wo,this,null),null===(e=B(vo,this))||void 0===e||e.destroy(),H(vo,this,null)}),Co("MediaStreamFrameSource constructed"),H(wo,this,e)}}const Oo=["true","yes",void 0],Ro=["false","no"];var yo=new WeakMap,bo=new WeakMap,Po=new WeakMap;class Mo extends c{constructor(e){super(),Q(this,yo,void 0),Q(this,bo,void 0),Q(this,Po,e=>{e.url!==B(bo,this)&&(H(bo,this,e.url),this.emit("load",new Event("load")))}),H(yo,this,e),B(yo,this).on("updated",B(Po,this))}get closed(){return B(yo,this).isClosed}get location(){return new URL(B(yo,this).url)}close(){B(yo,this).close()}addEventListener(e,t,i){null!=i&&i.once?this.once(e,t):this.on(e,t)}removeEventListener(e,t){this.off(e,t)}}var ko=new WeakMap,Do=new WeakMap,Go=new WeakMap,Uo=new WeakMap,Wo=new WeakMap,xo=new WeakMap,Vo=new WeakMap,zo=new WeakMap,Fo=new WeakMap,jo=new WeakMap;class Bo extends c{constructor(...e){super(...e),Q(this,ko,void 0),Q(this,Do,void 0),Q(this,Go,void 0),Q(this,Uo,void 0),Q(this,Wo,void 0),Q(this,xo,void 0),Q(this,Vo,void 0),Q(this,zo,void 0),Q(this,Fo,!1),Q(this,jo,void 0),J(this,"load",(e,t,i,{element:s,type:n}={})=>{H(Do,this,e);const o=(e=>"string"!=typeof e?{}:e.toLowerCase().split(",").reduce((e,t)=>{const[i,s]=t.split("=");return e[i]=Oo.indexOf(s)>=0||!(Ro.indexOf(s)>=0)&&s,e},{}))(i);H(ko,this,o.popup?"_blank":t),H(Go,this,s),H(Uo,this,n),H(Wo,this,""),H(xo,this,""),H(Vo,this,!0),H(zo,this,!1),this.emit("updated",this)}),J(this,"close",()=>{B(Fo,this)||(H(Fo,this,!0),this.emit("closed",this))}),J(this,"serialize",()=>({url:this.url,icon:this.icon,title:this.title,isLoading:this.isLoading,isBlocked:this.isBlocked,isClosed:this.isClosed}))}get target(){return B(ko,this)}get url(){return B(Do,this)}set url(e){this.url!==e&&(H(Do,this,e),this.emit("updated",this))}get element(){return B(Go,this)}get type(){return B(Uo,this)}get icon(){return B(Wo,this)}set icon(e){B(Wo,this)!==e&&(H(Wo,this,e),this.emit("updated",this))}get title(){return B(xo,this)}set title(e){B(xo,this)!==e&&(H(xo,this,e),this.emit("updated",this))}get isLoading(){return B(Vo,this)}set isLoading(e){B(Vo,this)!==e&&(H(Vo,this,e),this.emit("updated",this))}get isBlocked(){return B(zo,this)}set isBlocked(e){B(zo,this)!==e&&(H(zo,this,e),this.emit("updated",this))}get isClosed(){return B(Fo,this)}get windowProxy(){return B(jo,this)||H(jo,this,new Mo(this)),B(jo,this)}}var Qo=new WeakMap,Ho=new WeakMap,Yo=new WeakMap,Xo=new WeakMap,Jo=new WeakMap,Ko=new WeakMap,$o=new WeakMap,qo=new WeakMap;class Zo{constructor({onDocumentAdded:e}){Q(this,Qo,new Map),Q(this,Ho,new Map),Q(this,Yo,new Map),Q(this,Xo,new Map),Q(this,Jo,void 0),Q(this,Ko,({handle:e,document:t},{trusted:i})=>{if(!i)return;const s=this.getDocumentByHandle(e);s&&!s.isClosed&&t.isClosed&&s.close(!0)}),Q(this,$o,e=>{const t=B(Ho,this).get(e);B(Qo,this).delete(t),B(Ho,this).delete(e);const i=B(Xo,this).get(t);B(Xo,this).delete(t),i&&B(Yo,this).delete(i)}),Q(this,qo,(e,t)=>{const i=()=>{const i={handle:e,document:t.serialize()};t.element?Ma.broadcastToChildren("document",i):Ma.sendToParent("document",i)};t.on("updated",i),i(),t.once("closed",()=>{t.off("updated",i),i(),B($o,this).call(this,t)})}),J(this,"addDocument",(e,t,i)=>{var s;B(Qo,this).has(e)||i.isClosed||(B(Qo,this).set(e,i),B(Ho,this).set(i,e),t&&(B(Yo,this).set(t,e),B(Xo,this).set(e,t)),B(qo,this).call(this,e,i),null===(s=B(Jo,this))||void 0===s||s.call(this,i))}),J(this,"closeAllDocuments",()=>{for(const[,e]of B(Qo,this))e.close(),B($o,this).call(this,e)}),J(this,"getDocumentByHandle",e=>B(Qo,this).get(e)),J(this,"resolveDocumentHandle",e=>B(Yo,this).get(e)||h()),J(this,"resolveDocument",(e,t)=>{const i=e||this.resolveDocumentHandle(t);return{handle:i,document:this.getDocumentByHandle(i)||new Bo}}),J(this,"destroy",()=>{Ma.off("document",B(Ko,this))}),H(Jo,this,e),Ma.on("document",B(Ko,this))}}var ea=new WeakMap,ta=new WeakMap;class ia{constructor(e){Q(this,ea,void 0),Q(this,ta,()=>{const e=pt.unproxify(window.location.href),t=new URL((()=>{const e=document.querySelectorAll('link[rel="icon"]');return e.length>0?e[0].href:"/favicon.ico"})(),e).href;B(ea,this).call(this,{url:e,icon:pt.proxify(t),title:document.title,isLoading:"complete"!==document.readyState,isBlocked:!1})}),J(this,"sendLoading",e=>{B(ea,this).call(this,{url:e,icon:"",title:"",isLoading:!0,isBlocked:!1})}),J(this,"sendBlocked",e=>{B(ea,this).call(this,{url:e,icon:"",title:"",isLoading:!1,isBlocked:!0})}),J(this,"destroy",()=>{Ln.off("navigate",B(ta,this)),window.removeEventListener("popstate",B(ta,this),{capture:!0}),document.removeEventListener("readystatechange",B(ta,this),{capture:!0})}),H(ea,this,e),Ln.on("navigate",B(ta,this)),window.addEventListener("popstate",B(ta,this),{capture:!0}),document.addEventListener("readystatechange",B(ta,this),{capture:!0}),B(ta,this).call(this)}}var sa=new WeakMap,na=new WeakMap,oa=new WeakMap,aa=new WeakMap,ra=new WeakMap,la=new WeakMap,ca=new WeakMap,da=new WeakMap,ha=new WeakMap,ua=new WeakMap,Ea=new WeakMap,_a=new WeakMap,pa=new WeakMap,Ia=new WeakMap,La=new WeakMap,ma=new WeakMap,Ca=new WeakMap,Na=new WeakMap;class ga{constructor(e,t,i){Q(this,sa,void 0),Q(this,na,void 0),Q(this,oa,void 0),Q(this,aa,void 0),Q(this,ra,void 0),Q(this,la,void 0),Q(this,ca,void 0),Q(this,da,e=>{var t;return!(null===(t=B(sa,this))||void 0===t||!t.isActive()||!B(sa,this)[yi].proxyToken())}),J(this,"handleNavigation",(e,t,i,s)=>{const{name:n,go:o,e:a,type:r,block:l}=s,{handle:c,document:d}=B(ra,this).resolveDocument(s.handle,n),{windowProxy:h}=d,u=(a.view||window)!==window,E=!t||"_self"===t,_={url:e,target:t,windowFeatures:i,type:r,nav:{block:()=>(a.eventPhase===Event.CAPTURING_PHASE||(l(),u||B(la,this).sendBlocked(e)),{windowProxy:h}),parent:s=>(d.load(e,t,i,{type:s||r}),a.eventPhase===Event.CAPTURING_PHASE||(B(ra,this).addDocument(c,n,d),B(na,this).open(e,t,i,{type:s||r,handle:c})),{windowProxy:h}),continue:()=>{const s=B(ca,this).runHandler(e,t,i,{type:r,document:d});return s.rewrittenUrl?{rewrittenUrl:s.rewrittenUrl}:(s.document&&B(ra,this).addDocument(c,n,s.document),{windowProxy:h})},replay:()=>o()},getConsent:()=>B(na,this).confirmOpen(e,r),windowProxy:h,setLoading:()=>!u&&E&&B(la,this).sendLoading(e)};return(pt.inUniversalProxy?B(ua,this):B(ha,this))(_)}),Q(this,ha,({target:e,type:t,nav:i,getConsent:s,windowProxy:n})=>t?t===gi?i.continue():B(da,this).call(this,t)?(s().then(({accepted:t})=>t?"_blank"===e?i.parent():void i.continue():i.replay()),{windowProxy:n}):i.continue():i.continue()),Q(this,ua,({url:e,target:t,type:i,nav:s,getConsent:n,windowProxy:o,setLoading:a})=>{const r=new URL(pt.unproxify(window.location.href)).origin,l=r!==new URL(e,r).origin;return i?l?B(da,this).call(this,i)?(n().then(({accepted:e})=>e?"_blank"===t?s.parent():i===Ni?s.continue():(a(),void s.replay()):s.block()),{windowProxy:o}):s.continue():"_blank"===t?s.parent():i===Ni?s.continue():(a(),{rewrittenUrl:e}):"_blank"===t?s.parent(wi):s.block()}),Q(this,Ea,e=>{B(ma,this).call(this,e),e.isActive()&&!B(aa,this)&&B(pa,this).call(this)}),Q(this,_a,()=>{B(Ia,this).call(this),B(ra,this)&&B(ra,this).closeAllDocuments()}),Q(this,pa,()=>{var e;null!==(e=B(aa,this))&&void 0!==e&&e.isRunning()||(H(aa,this,new In),B(aa,this).setSource(new zn(e=>(B(oa,this).call(this,"patch",e),!0))),B(aa,this).start(),B(aa,this).invalidateFrame())}),Q(this,Ia,()=>{B(aa,this)&&B(aa,this).destroy(),H(aa,this,null)}),Q(this,La,(e,t)=>{B(ma,this).call(this,B(sa,this)),(mt.hasChange(B(na,this).redactedViews,t)||mt.hasChange(B(na,this).unredactedViews,t)||mt.hasChange(B(sa,this).redactionSelectors(),t)||mt.hasChange(B(sa,this).unredactionSelectors(),t))&&setTimeout(()=>{this.invalidateFrame()},0)}),J(this,"invalidateFrame",()=>{var e;null!==(e=B(aa,this))&&void 0!==e&&e.isRunning()&&B(aa,this).invalidateFrame()}),J(this,"partialSync",async e=>{var t;if(null===(t=B(aa,this))||void 0===t||!t.isRunning())return;const i=B(aa,this).getSource();i instanceof zn&&(await St(e),i.partialSync(e))}),Q(this,ma,e=>{_t.instance=new Je(mt.filterSelectors(B(na,this).redactedViews),mt.filterSelectors(B(na,this).unredactedViews),mt.filterSelectors(e.redactionSelectors()),mt.filterSelectors(e.unredactionSelectors()))}),Q(this,Ca,e=>B(oa,this).call(this,"click",e)),Q(this,Na,e=>B(oa,this).call(this,"change",e)),J(this,"destroy",()=>{B(sa,this)&&(B(sa,this).removeListener("update",B(Ea,this)),B(sa,this).removeListener("ended",B(_a,this))),H(sa,this,null),B(ca,this)&&B(ca,this).destroy(),H(ca,this,null),Ln.off("navigate",B(La,this)),Gt.off("click",B(Ca,this)),Gt.off("change",B(Na,this)),B(la,this)&&B(la,this).destroy(),H(la,this,null),B(ra,this)&&B(ra,this).destroy(),H(ra,this,null)}),H(sa,this,e),H(na,this,t),H(oa,this,i),B(Ea,this).call(this,e),e.on("updated",B(Ea,this)),e.on("ended",B(_a,this)),pt.inUniversalProxy&&H(la,this,new ia(e=>B(oa,this).call(this,"document",{document:e}))),H(ra,this,new Zo({onDocumentAdded:e=>{e.element&&B(na,this).showDocument(e)}}));const s=new Qi(e,t),n=new es(e,t),o=new _n(e,t);H(ca,this,new Oi({shouldNavigate:B(da,this),handlers:[s,n,o],handleNavigation:this.handleNavigation})),Ln.on("navigate",B(La,this)),Gt.on("click",B(Ca,this)),Gt.on("change",B(Na,this))}navigate(e,t,{type:i}){const s=B(ca,this).navigate(e,t,{type:i});if("string"==typeof s)return window.open(s,t)}}const wa=_("cbio.iframes.trust"),va=_("cbio.ControlEvents"),Aa=new class{constructor(){J(this,"_applyScroll",(e,t)=>{const i=e.defaultView||e;i.scrollTo?i.scrollTo(t.x,t.y):(i.scrollTop=t.y,i.scrollLeft=t.x)}),J(this,"_updateCheckbox",(e,{checked:t})=>{if(void 0!==t&&"INPUT"===e.tagName&&void 0!==e.checked){const i=Object.getOwnPropertyDescriptor(e.constructor.prototype,"checked");i&&i.set.call(e,t)}}),J(this,"_updateInnerHTML",(e,{innerHTML:t})=>{if(void 0!==t){const i=(new DOMParser).parseFromString(W.sanitize(t),"text/html");e.replaceChildren(...i.body.children)}}),J(this,"_updateValue",(e,{value:t,selectedOptions:i},s)=>{if(void 0!==t&&"input"===s){const i=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value");i&&i.set.call(e,t)}"TEXTAREA"===e.tagName&&be.track(e.childNodes[0]),"SELECT"===e.tagName&&null!=i&&[...e.options].forEach(e=>{e.selected=i.includes(e.value)})}),J(this,"_updateTarget",(e,t)=>{this._updateValue(e,t.target,t.state),this._updateCheckbox(e,t.target),this._updateInnerHTML(e,t.target)}),J(this,"_generateMouse",(e,t)=>new MouseEvent(t.state,{clientX:t.x*window.innerWidth,clientY:t.y*window.innerHeight,bubbles:!0,cancelable:!0,composed:!0,view:e.ownerDocument&&e.ownerDocument.defaultView||window})),J(this,"_generatePointer",(e,t)=>new PointerEvent(t.state,{clientX:t.x*window.innerWidth,clientY:t.y*window.innerHeight,pointerId:t.pointerId,width:t.width,height:t.height,pressure:t.pressure,tangentialPressure:t.tangentialPressure,tiltX:t.tiltX,tiltY:t.tiltY,twist:t.twist,pointerType:t.pointerType,isPrimary:t.isPrimary,bubbles:!0,cancelable:!0,composed:!0,view:e.ownerDocument&&e.ownerDocument.defaultView||window})),J(this,"_generateKeypress",(e,t)=>new KeyboardEvent(t.state,{key:t.key,code:t.code,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,charCode:t.charCode,keyCode:t.keyCode,which:t.which,bubbles:!0,cancelable:!0,composed:!0,view:e.ownerDocument&&e.ownerDocument.defaultView||window})),J(this,"_generateFocus",(e,t)=>new FocusEvent(t.state,{bubbles:["focusin","focusout"].includes(t.state),cancelable:!1,composed:!0,view:e.ownerDocument&&e.ownerDocument.defaultView||window})),J(this,"_generateChange",(e,t)=>new CustomEvent(t.state,{bubbles:!0,cancelable:!1,composed:!0,view:e.ownerDocument&&e.ownerDocument.defaultView||window})),J(this,"_generateInput",(e,t)=>new CustomEvent(t.state,{bubbles:!0,cancelable:!1,composed:!0,view:e.ownerDocument&&e.ownerDocument.defaultView||window,inputType:t.inputType,data:t.data})),J(this,"_generateSelection",(e,t)=>new CustomEvent("selection",{bubbles:!0,cancelable:!1,composed:!0,view:e.ownerDocument&&e.ownerDocument.defaultView||window,selection:t.selection})),J(this,"_generateEvent",(e,t,i)=>{switch(i.state.includes("move")&&va("generate",i,"on",t),e){case"keypress":return this._generateKeypress(t,i);case"mouse":return this._generateMouse(t,i);case"pointer":return this._generatePointer(t,i);case"change":return this._generateChange(t,i);case"input":return this._generateInput(t,i);case"focus":return this._generateFocus(t,i);case"select":return this._generateSelection(t,i);default:return console.warn("CobrowseIO: unknown event type",e,i),null}}),J(this,"_setSelection",(e,{selection:t})=>{if(!(e.__cobrowse_user_selection_timestamp>Date.now()-100)&&e.getSelection&&e.getSelection())try{t?(e.__last_agent_selection_ts=Date.now(),e.getSelection().removeAllRanges(),t.forEach(t=>{const{start:i,startOffset:s,end:n,endOffset:o}=t,a=document.createRange(),r=be.getById(i),l=be.getById(n);a.setStart(r,s),a.setEnd(l,o),e.getSelection().addRange(a)})):e.getSelection().removeAllRanges()}catch(e){console.warn("Failed to apply selection",t,e)}}),J(this,"_setInputSelection",(e,{selection:t})=>{if(!(e.ownerDocument.__cobrowse_user_selection_timestamp>Date.now()-100)&&["text","textarea","search","url"].includes(e.type))try{if(e.ownerDocument.__last_agent_selection_ts=Date.now(),t){const{start:i,end:s,direction:n}=t;e.focus(),e.setSelectionRange(i,s,n)}else e.getRootNode({composed:!0}).activeElement===e&&e.setSelectionRange(null,null)}catch(e){console.warn("Failed to select text",e)}}),J(this,"applyEvent",(e,t)=>{var i;if(!t.target)return null;const s=be.getById(t.target.id);if(!s)return null;if(null!==(i=_t.instance)&&void 0!==i&&i.isRedacted(s))return null;try{var n;if("scroll"===e)return this._applyScroll(s,t);if(null!==(n=s._cobrowse_suppress_events)&&void 0!==n&&n.has(t.state))return s._cobrowse_suppress_events.delete(t.state),0===s._cobrowse_suppress_events.size&&delete s._cobrowse_suppress_events.size,null;const i=this._generateEvent(e,s,t);return i&&(s.dispatchEvent(i)?(["keydown","keypress","input"].includes(t.state)&&this._updateTarget(s,t),["selectionchange"].includes(t.state)&&this._setSelection(s,t),["select"].includes(t.state)&&this._setInputSelection(s,t)):"keydown"===t.state?s._cobrowse_suppress_events=new Set(["keypress","input"]):"keypress"===t.state&&(s._cobrowse_suppress_events=new Set(["input"]))),i}catch(t){return console.warn("Error while injecting event",e,t),null}})}isTypingInput(e){if(e.target){const t=be.getById(e.target.id);if(["text","email","number","password","search","tel","url","datetime","textarea"].includes(null==t?void 0:t.type))return!0}return!1}},Sa=_("cbio.iframes.control"),fa=_("cbio.iframes.sessions");function Ta(e,t){function i(t){const i=t[yi].serializeSanitized();if(e.broadcastToChildren("session",i,{trustedOnly:!1}),t.id()){const i=t[yi].serialize();e.broadcastToChildren("session",i,{trustedOnly:!0})}}function s(i,{iframe:s,trusted:n}){if(!s)return;const o=t.currentSession;if(o){const t=n?o[yi].serialize():o[yi].serializeSanitized();e.send(s.contentWindow,"session",t,{trustedOnly:n})}}function n(e,{trusted:s,fromParent:n}){if(!s)return fa("Ignoring untrusted session event");n&&(t.currentSession[yi].deserialize(e),i(t.currentSession))}return e.on("trust",s),e.on("session",n),{publish:i,unsubscribe:()=>{e.off("trust",s),e.off("session",n)}}}class Oa{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}const Ra=_("cbio.iframes.sync");function ya(e,t,{waitForParentSync:i}={}){let s,n=!i||new Oa;function o(e){return{redactedViews:[...(null==e?void 0:e.redactedViews)||[],...t.redactedViews||[]],unredactedViews:[...(null==e?void 0:e.unredactedViews)||[],...t.unredactedViews||[]],universalLinks:(null==e?void 0:e.universalLinks)||t.universalLinks||[],pdfLinks:(null==e?void 0:e.pdfLinks)||t.pdfLinks||[],api:(null==e?void 0:e.api)||t.api}}function a(e){const t=o(e);return $($({},t),{},{redactedViews:t.redactedViews.filter(e=>"string"!=typeof e),unredactedViews:t.unredactedViews.filter(e=>"string"!=typeof e)})}async function r(t,{iframe:i}){i&&(await n.promise,e.send(i.contentWindow,"sync",a(s),{trustedOnly:!1}))}function l(e){Ra("iframe available",e,"issuing sync"),e&&r(0,{iframe:e})}function c(t,{source:i,origin:o,trusted:r}){if(!r)return Ra("Ignoring untrusted sync event");s=t,n.resolve(),e.broadcastToChildren("sync",a(t),{trustedOnly:!1})}return e.on("init",r),e.on("iframe_discovered",l),e.on("sync",c),{getSyncedConfig:async()=>(await n.promise,o(s)),unsubscribe:()=>{s=null,n=!i||new Oa,e.off("init",r),e.off("iframe_discovered",l),e.off("sync",c)},sendSync:async()=>{await n.promise,e.broadcastToChildren("sync",a(s),{trustedOnly:!1})}}}const ba=_("cbio.iframes"),Pa=i(),Ma=new s(Pa),ka=new n(Ma,Pa);!function(e){e.on("sync",(t,{trusted:i})=>{if(!i)return wa("Ignoring untrusted sync event");e.sendToParent("trust",null,{trustedOnly:!1}),"complete"!==document.readyState&&window.addEventListener("load",()=>{e.sendToParent("trust",null,{trustedOnly:!1})},{once:!0,capture:!0})});const t=({target:t})=>{e.breakTrust(t.contentWindow)};e.on("trust",(i,{iframe:s,origin:n})=>{s&&(s.removeEventListener("load",t,{capture:!0}),s.addEventListener("load",t,{capture:!0}),e.establishTrust(s.contentWindow,n))})}(Ma),function(e){e.on("sync",(t,{trusted:i})=>{if(!i)return Sa("Ignoring untrusted sync event");Ee.onChange=t=>e.sendToParent("mouse",t),Ee.track(window)}),e.on("mouse",(e,{iframe:t})=>{Sa("Received mouse event in",e,document,"from",t),t&&(Ee.setPosition(e.x,e.y,t),Ee.setDown(e.down))}),e.on("control",(t,{trusted:i,trustedOnly:s})=>{if(Sa("Received control event in",document),!i)return Sa("Ignoring untrusted control event");Aa.applyEvent(...t),e.broadcastToChildren("control",t,{trustedOnly:s})})}(Ma);const Da=e=>t=>{const i=t[yi].proxyUrl(),s=new URL(i,e);ba("trusting",s.origin),Ma.automaticTrustedOrigins=[s.origin]},Ga="_cobrowse_active_highlight",Ua=_("cbio.HighlightTracking");var Wa=new WeakMap,xa=new WeakSet;function Va(e){Le().removeItem(Ga),this.emit("end",e)}const za=new class extends c{constructor(...e){super(...e),X(this,xa),Q(this,Wa,new qt),J(this,"highlightAndWait",async(e,t)=>{const i=t.id;Le().setItem(Ga,i),B(Wa,this).monitor();try{if(!await this.highlight(e,t))return Ua("highlight did not run"),void V(xa,this,Va).call(this,{id:i,state:"not-found"});await Jt.ensureNoNavigation(),await B(Wa,this).waitUntilStable(),V(xa,this,Va).call(this,{id:i,state:"resolved"})}finally{B(Wa,this).destroy()}})}async highlight(e,t){if(await Ci.highlight(e,t))return!0;const i=await Promise.all(Ma.trustedIframes.map(async e=>{const i=new n(Ma,e.contentWindow);try{return await i.send("highlight",t)}finally{i.destroy()}}));return i.some(Boolean)}resolvePendingHighlight(){const e=Le().getItem(Ga);e&&(Ua("resolving pending highlight",e),V(xa,this,Va).call(this,{id:e,state:"resolved"}))}};var Fa=new WeakMap,ja=new WeakMap,Ba=new WeakMap,Qa=new WeakMap,Ha=new WeakMap,Ya=new WeakMap,Xa=new WeakMap;class Ja{constructor(e){Q(this,Fa,void 0),Q(this,ja,void 0),Q(this,Ba,void 0),Q(this,Qa,void 0),J(this,"open",()=>{B(Fa,this).isEnded()||(B(Ya,this).call(this),B(Xa,this).call(this))}),J(this,"close",()=>{window.removeEventListener("visibilitychange",this.onVisibilityChange),B(Qa,this)&&(clearInterval(B(Qa,this)),H(Qa,this,null)),B(Fa,this)&&(B(Fa,this).removeListener("updated",this.open),H(Fa,this,null)),B(Ba,this)&&(B(Ba,this).close(),H(Ba,this,null)),B(ja,this)&&(B(ja,this).close(),H(ja,this,null))}),Q(this,Ha,(e,i)=>{const s=new t({getUrl:()=>_s(e),getProtocols:()=>[`cbio.http.headers.authorization.bearer.${window.btoa(B(Fa,this).field(i)).replaceAll("=","")}`]});return s.on("error",e=>{console.warn("CobrowseIO session socket error:",e)}),s}),Q(this,Ya,()=>{const e=B(Fa,this).field("control_url"),t=B(Fa,this).field("control_token");e&&t&&!B(ja,this)&&(H(ja,this,B(Ha,this).call(this,e,"control_token")),B(ja,this).on("open",()=>{B(ja,this).send("filter",{events:["session"]}),B(Fa,this).fetch().catch(e=>{console.warn("CobrowseIO failed fetching session state",e)})}),B(ja,this).on("event",(e,t)=>{"session"===e&&B(Fa,this).updateResource(t)}))}),Q(this,Xa,()=>{const e=B(Fa,this).field("stream_url"),t=B(Fa,this).field("stream_token");if(e&&t&&!B(Ba,this)){H(Ba,this,B(Ha,this).call(this,e,"stream_token")),H(Qa,this,setInterval(()=>{const e=Math.round(B(Ba,this).metrics.latency());B(Fa,this)[yi].setMetrics({latency:e})},1e3));const t=["highlight","drawing","laser","url"],i=["touch","mouse","pointer","keypress","scroll","focus","input","change","select"];B(Ba,this).on("event",(e,s)=>{"sync"===e&&B(Fa,this).emit("sync",s),"remote-error"===e&&B(Fa,this).emit("remote-error",s),"client"===e?B(Fa,this).emit("client",s):"probe"===e?B(Ba,this).send("alive",s):t.includes(e)?B(Fa,this).emit(e,s):i.includes(e)&&B(Fa,this).emit("control",e,s),B(Fa,this)[yi].setMetrics({last_alive:new Date})}),B(Ba,this).on("open",()=>{B(Ba,this).send("filter",{events:[...i,...t,"sync","probe","remote-error","client","sdp","icecandidate"]}),B(Fa,this).emit("stream-open")})}}),H(Fa,this,e),e.on("updated",this.open),e[yi].setMetrics({last_alive:null,latency:null}),this.open()}get stream(){return B(Ba,this)}}const Ka=new class{constructor(){J(this,"el",()=>(this._el||(this._el=document.createElement("img"),this._el.className="cbio_session_overlay",this._el.style.pointerEvents="none",this._el.style.visibility="visible",this._el.style.width="10vw",this._el.style.height="100vh",this._el.style.position="fixed",this._el.style.zIndex="2147483647",this._el.style.display="none",this._el.style.top="0",this._el.style.left="0"),this._el)),J(this,"_arrayBufferToBase64",e=>{let t="";const i=new Uint8Array(e),s=i.byteLength;for(let e=0;e<s;e+=1)t+=String.fromCharCode(i[e]);return window.btoa(t)}),J(this,"remove",(e,t=1e3)=>{e.style.transition=`opacity ${t}ms ease-in-out`,e.style.opacity=1,e.addEventListener("transitionend",function(){e.remove()}),e.style.opacity=0}),J(this,"update",e=>{if(fe.isActive())if(e.image){const t=this.el().cloneNode(),i=`data:${e.mime_type};base64,${this._arrayBufferToBase64(e.image)}`,{id:s="cb_io_drawing"}=e;t.style.left=100*e.x+"%",t.style.top=100*e.y+"%",t.style.height=100*e.height+"%",t.style.width=100*e.width+"%",t.style.display="block",t.src=i,t.id=s,t.dataset.agent=e.agent,t.decode().then(()=>{const i=document.getElementById(s);i?i.replaceWith(t):document.body.appendChild(t),null!=e.disappears_in&&setTimeout(()=>{this.remove(t,e.fade_duration)},e.disappears_in)}).catch(e=>{console.error(e)})}else this.hide(e.agent)}),J(this,"hide",e=>{(null!=e?document.querySelectorAll(`.cbio_session_overlay[data-agent="${e}"]`):document.querySelectorAll(".cbio_session_overlay")).forEach(function(e){e.remove()})})}},$a=new Set;function qa(e,t,i,s={}){!function(e,t){const i=`${e}-${t}`;if($a.has(i))return;const s=document.createElement("style");s.id=`cbio_session_ripple_stylesheet_${i}`,s.textContent=`\n        @keyframes cbio_session_ripple_effect-${i} {\n            0% {\n                transform: translate(-50%, -50%) scale(2);\n                opacity: 1;\n            }\n            100% {\n                transform: translate(-50%, -50%) scale(${t});\n                opacity: 0;\n            }\n        }\n        .cbio_session_ripple-${i} {\n            width: 8px;\n            height: 8px;\n            border-radius: 50%;\n            position: absolute;\n            z-index: 2147483647;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%) scale(${t});\n            pointer-events: none;\n            animation: cbio_session_ripple_effect-${i} ${e}ms ease-out forwards;\n        }\n    `,document.head.appendChild(s),$a.add(i)}(t,i);const n=(o=e,"rgba("+parseInt(o.slice(1,3),16)+", "+parseInt(o.slice(3,5),16)+", "+parseInt(o.slice(5,7),16)+", 0.25)");var o;const a=document.createElement("div");return a.classList.add(`cbio_session_ripple-${t}-${i}`),Object.assign(a.style,{backgroundColor:n},s),setTimeout(()=>{a.remove()},t),a}var Za=new WeakMap,er=new WeakMap;class tr{constructor(e){Q(this,Za,new Map),Q(this,er,null),H(er,this,e)}getInstanceForAgent(e){return B(Za,this).has(e)||B(Za,this).set(e,new(B(er,this))),B(Za,this).get(e)}hide(){B(Za,this).forEach((e,t)=>{e.hide(),B(Za,this).delete(t)})}}const ir="#e94435";class sr{constructor(){J(this,"el",()=>(this._el||(this._el=document.createElement("div"),this._el.className="cbio_session_overlay",Object.assign(this._el.style,{position:"fixed",zIndex:"2147483647",width:"8px",height:"8px",background:ir,marginLeft:"-4px",marginTop:"-4px",borderRadius:"50%",border:"border: 1px solid white",pointerEvents:"none"})),this._el)),J(this,"hasChangedPosition",()=>null!=this.previousPosition&&(Math.abs(this.previousPosition.x-this.currentPosition.x)>1||Math.abs(this.previousPosition.y-this.currentPosition.y)>1)),J(this,"startAnimation",e=>{this._intervalId||(this._intervalId=setInterval(()=>this._createRipple(e),this.rippleInterval),this._createRipple(e))}),J(this,"stopAnimation",()=>{this._intervalId&&clearInterval(this._intervalId),this._el&&this._el.replaceChildren(),this.resetState()}),J(this,"update",e=>{fe.isActive()&&(document.body&&!this.el().parentNode&&document.body.appendChild(this.el()),"touchend"===e.state?this.hide():null!=e.x&&null!=e.y&&(this.currentPosition.x=100*e.x,this.currentPosition.y=100*e.y,this.el().style.background=e.colour,this.el().style.left=`${this.currentPosition.x}%`,this.el().style.top=`${this.currentPosition.y}%`,this.startAnimation(e.colour)))}),J(this,"hide",()=>{var e;null===(e=this._el)||void 0===e||null===(e=e.parentNode)||void 0===e||e.removeChild(this._el),this.stopAnimation()}),this.rippleDuration=3e3,this.rippleInterval=750,this._el=null,this.resetState()}resetState(){this._intervalId=null,this.currentPosition={x:0,y:0},this.previousPosition=null,this.resetRippleScale()}resetRippleScale(){this.rippleScale=16}_createRipple(e=ir){this.hasChangedPosition()?this.rippleScale=6:this.rippleScale=Math.min(this.rippleScale+5,16),this.previousPosition=$({},this.currentPosition);const t=qa(e,this.rippleDuration,this.rippleScale);this.el().appendChild(t)}}const nr=new class extends tr{constructor(){super(sr)}update(e){this.getInstanceForAgent(e.agent).update(e)}};class or{constructor(){J(this,"el",()=>{if(!this._el){const e="http://www.w3.org/2000/svg";this._el=document.createElementNS(e,"svg"),this._el.setAttribute("class","__cbio_ignored"),this._el.setAttribute("viewBox","0 0 35 35"),this._el.setAttribute("fill","none"),this._el.style.position="fixed",this._el.style.zIndex="2147483647",this._el.style.height="32px",this._el.style.width="32px",this._el.style.marginLeft="-16px",this._el.style.marginTop="0px",this._el.style.color="red",this._el.style.transition="opacity 0.5s",this._el.style.opacity=1,this._el.style.pointerEvents="none";const t=document.createElementNS(e,"path");t.setAttribute("d","M26.5148 15.8441V17.0941C26.5148 17.7541 26.9798 17.2891 26.3198 17.2891C25.6598 17.2891 26.1248 17.7541 26.1248 17.0941V14.5108C26.1248 13.8361 24.5779 12.2891 23.9032 12.2891C23.2285 12.2891 21.6815 13.8361 21.6815 14.5108V17.0941C21.6815 17.7541 22.1465 17.2891 21.4865 17.2891C20.8265 17.2891 21.2915 17.7541 21.2915 17.0941V13.0108C21.2915 12.3361 19.7445 10.7891 19.0698 10.7891C18.3951 10.7891 16.8482 12.3361 16.8482 13.0108V17.0941C16.8482 17.7541 17.3131 17.2891 16.6532 17.2891C15.9932 17.2891 16.4582 17.7541 16.4582 17.0941V5.01073C16.4582 4.33602 14.9112 2.78906 14.2365 2.78906C13.5618 2.78906 12.0148 4.33602 12.0148 5.01073V18.5941C12.0148 19.0774 12.7237 18.5132 12.2771 18.6981C11.8306 18.8831 11.3166 18.7809 10.9748 18.4391L8.262 15.7263C7.85703 15.3213 6.23834 15.2209 5.72608 15.477C5.04602 15.8171 4.78867 17.6568 5.16142 18.3195L11.0678 28.0419C12.5818 30.7334 15.4298 32.3991 18.518 32.3991H21.3198C25.9066 32.3991 30.6248 27.6808 30.6248 23.0941V15.8441C30.6248 15.2614 29.1525 13.7891 28.5698 13.7891C27.9872 13.7891 26.5148 15.2614 26.5148 15.8441Z"),t.setAttribute("fill","currentColor"),t.setAttribute("fill-rule","evenodd"),t.setAttribute("clip-rule","evenodd");const i=document.createElementNS(e,"path");i.setAttribute("d","M10.6247 5.01011C10.6247 3.01544 12.2417 1.39844 14.2364 1.39844C16.2311 1.39844 17.8481 3.01544 17.8481 5.01011V9.61029C18.2296 9.47316 18.641 9.39844 19.0697 9.39844C20.4448 9.39844 21.6404 10.1669 22.2505 11.2978C22.7457 11.0425 23.3076 10.8984 23.9031 10.8984C25.2578 10.8984 26.4383 11.6443 27.0563 12.7478C27.5131 12.524 28.0268 12.3984 28.5697 12.3984C30.4724 12.3984 32.0147 13.9408 32.0147 15.8434V23.0934C32.0147 29.0001 27.2264 33.7884 21.3197 33.7884H18.5179C14.5663 33.7884 10.9219 31.657 8.98462 28.2129L4.07828 19.4905C3.03598 17.6375 3.7556 15.2894 5.65716 14.3386C7.08954 13.6225 8.81951 13.9032 9.95191 15.0356L10.6247 15.7084V5.01011ZM27.5147 15.8434V17.0934C27.5147 17.7534 26.9797 18.2884 26.3197 18.2884C25.6597 18.2884 25.1247 17.7534 25.1247 17.0934V14.5101C25.1247 13.8354 24.5778 13.2884 23.9031 13.2884C23.2284 13.2884 22.6814 13.8354 22.6814 14.5101V17.0934C22.6814 17.7534 22.1464 18.2884 21.4864 18.2884C20.8264 18.2884 20.2914 17.7534 20.2914 17.0934V13.0101C20.2914 12.3354 19.7444 11.7884 19.0697 11.7884C18.395 11.7884 17.8481 12.3354 17.8481 13.0101V17.0934C17.8481 17.7534 17.313 18.2884 16.6531 18.2884C15.9931 18.2884 15.4581 17.7534 15.4581 17.0934V5.01011C15.4581 4.3354 14.9111 3.78844 14.2364 3.78844C13.5617 3.78844 13.0147 4.3354 13.0147 5.01011V18.5934C13.0147 19.0767 12.7236 19.5125 12.277 19.6974C11.8305 19.8824 11.3165 19.7802 10.9747 19.4384L8.26192 16.7256C7.85695 16.3206 7.23826 16.2202 6.726 16.4763C6.04594 16.8164 5.78859 17.6561 6.16134 18.3188L11.0677 27.0412C12.5817 29.7327 15.4297 31.3984 18.5179 31.3984H21.3197C25.9065 31.3984 29.6247 27.6801 29.6247 23.0934V15.8434C29.6247 15.2607 29.1524 14.7884 28.5697 14.7884C27.9871 14.7884 27.5147 15.2607 27.5147 15.8434Z"),i.setAttribute("fill","white"),i.setAttribute("fill-rule","evenodd"),i.setAttribute("clip-rule","evenodd"),this._el.appendChild(t),this._el.appendChild(i)}return this._el}),J(this,"calculateOffset",e=>{var t;const i=be.getById(e.target.id),s=null==i||null===(t=i.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t?void 0:t.frameElement;if(!s)return{offsetX:0,offsetY:0};const n=s.getBoundingClientRect();return{offsetX:Math.round(n.left),offsetY:Math.round(n.top)}}),J(this,"getOffset",e=>{var t,i;const{offsetX:s,offsetY:n}=e;return void 0!==s&&void 0!==n?{offsetX:s*(null===(t=window.document)||void 0===t||null===(t=t.documentElement)||void 0===t?void 0:t.clientWidth),offsetY:n*(null===(i=window.document)||void 0===i||null===(i=i.documentElement)||void 0===i?void 0:i.clientHeight)}:this.calculateOffset(e)}),J(this,"_updatePosition",e=>{var t,i;let{x:s,y:n}=e;if(!1===s||!1===n)return;s*=null===(t=window.document)||void 0===t||null===(t=t.documentElement)||void 0===t?void 0:t.clientWidth,n*=null===(i=window.document)||void 0===i||null===(i=i.documentElement)||void 0===i?void 0:i.clientHeight;const o=this.getOffset(e);s+=o.offsetX,n+=o.offsetY,this.el().style.top=`${n}px`,this.el().style.left=`${s}px`,this._lastPosition={x:s,y:n}}),J(this,"_getRippleStyle",()=>({position:"fixed",left:this._lastPosition.x-4+"px",top:`${this._lastPosition.y+4}px`})),J(this,"_createRipple",(e="#e94435")=>{const t=qa(e,1e3,12,this._getRippleStyle());document.body.appendChild(t)}),J(this,"update",(e,t)=>{if("mouse"===e&&fe.isActive())switch(document.body&&!this.el().parentNode&&document.body.appendChild(this.el()),t.colour&&(this.el().style.color=t.colour),t.state){case"mousedown":this._hideAfterTimeout(),this._createRipple(t.colour),this.interval||(this.interval=setInterval(()=>{this._createRipple(t.colour)},500));break;case"mouseup":this._hideAfterTimeout(),clearInterval(this.interval),this.interval=null;break;case"mousemove":this._hideAfterTimeout(),this._updatePosition(t)}}),J(this,"hide",()=>{clearTimeout(this.fadeTimeOut),this.el().parentNode&&this.el().parentNode.removeChild(this.el())})}_hideAfterTimeout(){clearTimeout(this.fadeTimeOut),this.el().style.opacity=1,this.fadeTimeOut=setTimeout(()=>{this.el().style.opacity=0},5e3)}}const ar=new class extends tr{constructor(){super(or)}update(e,t){this.getInstanceForAgent(t.agent).update(e,t)}},rr={ar:{ALLOW:"",CALLING_ACCEPT:"",CALLING_CAMERA_OFF:" ",CALLING_CAMERA_PERMISSION_DENIED:"    .       .",CALLING_CAMERA_PERMISSION_PROMPT:"   ",CALLING_CAMERA_STARTING:"  ",CALLING_CANCEL:"",CALLING_DISABLE_AUDIO:" ",CALLING_DISABLE_VIDEO:" ",CALLING_ENABLE_AUDIO:" ",CALLING_ENABLE_VIDEO:" ",CALLING_END:" ",CALLING_JOIN:"  ",CALLING_JOIN_PROMPT:"     .",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"",CALLING_MICROPHONE_PERMISSION_DENIED:"    .      .",CALLING_MICROPHONE_PERMISSION_PROMPT:"   ",CALLING_NO_DEVICES:" ",CALLING_PERMISSION_NEEDED:" ",CALLING_REJECT:" ",CALLING_REJOIN_PROMPT:"     .     ",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"",CALLING_REQUEST:"     ",CALLING_SAVE:"",CALLING_SELECT_CAMERA:" ",CALLING_SELECT_MICROPHONE:" ",CALLING_SELECT_SPEAKER:" ",CALLING_SHOW_CALL_SETTINGS:"  ",DENY:"",END_SESSION:"  Cobrowse",FULL_DEVICE_REQUEST_DESCRIPTION:"     .",FULL_DEVICE_REQUEST_TITLE:"   ",REMOTE_CONTROL_REQUEST_DESCRIPTION:"     .",REMOTE_CONTROL_REQUEST_TITLE:"   ",SESSION_REQUEST_DESCRIPTION:"         ",SESSION_REQUEST_TITLE:"  ",UNIVERSAL_PROXY_BLOCKED:"       ",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"        .",UNIVERSAL_PROXY_REQUEST_TITLE:"  "},cs:{ALLOW:"Povolit",CALLING_ACCEPT:"Pijmout",CALLING_CAMERA_OFF:"Kamera je vypnut",CALLING_CAMERA_PERMISSION_DENIED:"Pstup ke kamee odepen. Povolit jej v nastaven prohlee.",CALLING_CAMERA_PERMISSION_PROMPT:"Povolit pstup ke kamee",CALLING_CAMERA_STARTING:"Kamera se spout",CALLING_CANCEL:"Zruit",CALLING_DISABLE_AUDIO:"Zakzat zvuk",CALLING_DISABLE_VIDEO:"Zakzat video",CALLING_ENABLE_AUDIO:"Povolit zvuk",CALLING_ENABLE_VIDEO:"Povolit video",CALLING_END:"Ukonit hovor",CALLING_JOIN:"Pipojit se k hovoru",CALLING_JOIN_PROMPT:"Podpora by vs rda kontaktovala telefonicky.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"J",CALLING_MICROPHONE_PERMISSION_DENIED:"Pstup k mikrofonu odepen. Povolte jej v nastaven prohlee.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Povolit pstup k mikrofonu",CALLING_NO_DEVICES:"dn",CALLING_PERMISSION_NEEDED:"Vyadovno povolen",CALLING_REJECT:"Odmtnout hovor",CALLING_REJOIN_PROMPT:"Mte aktivn hovor s podprnm agentem. Chcete se znovu pipojit?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Agent",CALLING_REQUEST:"Vstoupit do videohovoru?",CALLING_SAVE:"Uloit",CALLING_SELECT_CAMERA:"Vyberte kameru",CALLING_SELECT_MICROPHONE:"Vybrat mikrofon",CALLING_SELECT_SPEAKER:"Vyberte reproduktor",CALLING_SHOW_CALL_SETTINGS:"Zobrazit nastaven hovoru",DENY:"Odmtnout",END_SESSION:"Zastavit sdlen",FULL_DEVICE_REQUEST_DESCRIPTION:"Podpora by si rda prohldla celou vai obrazovku.",FULL_DEVICE_REQUEST_TITLE:"Povolit pln snmn obrazovky?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Podpora by rda ovldala tuto strnku.",REMOTE_CONTROL_REQUEST_TITLE:"Povolit vzdlen ovldn?",SESSION_REQUEST_DESCRIPTION:"Podprn pracovnk by s vmi chtl doasn pouvat tuto webovou strnku.",SESSION_REQUEST_TITLE:"Povolit spolen prohlen?",UNIVERSAL_PROXY_BLOCKED:"Tuto webovou strnku nelze zobrazit s podprnm pracovnkem",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Agent podpory by vs rd sledoval na jin webov strnky.",UNIVERSAL_PROXY_REQUEST_TITLE:"Povolit pokraovn relace?"},da:{ALLOW:"Tillad",CALLING_ACCEPT:"Accepter",CALLING_CAMERA_OFF:"Kamera er slukket",CALLING_CAMERA_PERMISSION_DENIED:"Adgang til kamera ngtet. Aktivr det i dine browserindstillinger.",CALLING_CAMERA_PERMISSION_PROMPT:"Tillad adgang til kamera",CALLING_CAMERA_STARTING:"Kamera starter",CALLING_CANCEL:"Annuller",CALLING_DISABLE_AUDIO:"Deaktiver lyd",CALLING_DISABLE_VIDEO:"Deaktiver video",CALLING_ENABLE_AUDIO:"Aktiver lyd",CALLING_ENABLE_VIDEO:"Aktivr video",CALLING_END:"Afslut opkald",CALLING_JOIN:"Deltag i opkaldet",CALLING_JOIN_PROMPT:"En supportagent vil gerne ringe til dig.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Mig",CALLING_MICROPHONE_PERMISSION_DENIED:"Adgang til mikrofon ngtet. Aktivr det i dine browserindstillinger.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Tillad adgang til mikrofon",CALLING_NO_DEVICES:"Ingen",CALLING_PERMISSION_NEEDED:"Tilladelse ndvendig",CALLING_REJECT:"Afvis opkald",CALLING_REJOIN_PROMPT:"Du har en aktiv samtale med en supportagent. Vil du genoptage den?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Agent",CALLING_REQUEST:"Deltage i videoopkald?",CALLING_SAVE:"Gem </translateOnlyThis>",CALLING_SELECT_CAMERA:"Vlg kamera",CALLING_SELECT_MICROPHONE:"Vlg mikrofon",CALLING_SELECT_SPEAKER:"Vlg hjtaler",CALLING_SHOW_CALL_SETTINGS:"Vis opkaldsindstillinger",DENY:"Ngt",END_SESSION:"Stop deling",FULL_DEVICE_REQUEST_DESCRIPTION:"En supportagent nsker at se din hele skrm.",FULL_DEVICE_REQUEST_TITLE:"Tillad fuldskrmsoptagelse?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"En supportagent nsker at kontrollere denne side.",REMOTE_CONTROL_REQUEST_TITLE:"Tillad fjernbetjening?",SESSION_REQUEST_DESCRIPTION:"En supportagent nsker midlertidigt at bruge denne webside sammen med dig.",SESSION_REQUEST_TITLE:"Tillad cobrowsing?",UNIVERSAL_PROXY_BLOCKED:"Denne webside kan ikke vises sammen med en supportagent",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"En supportagent vil gerne flge dig til andre websider.",UNIVERSAL_PROXY_REQUEST_TITLE:"Tillad fortsttelse af session?"},de:{ALLOW:"Erlauben",CALLING_ACCEPT:"Akzeptieren",CALLING_CAMERA_OFF:"Kamera ist ausgeschaltet",CALLING_CAMERA_PERMISSION_DENIED:"Kamerazugriff verweigert. Aktivieren Sie ihn in den Browsereinstellungen.",CALLING_CAMERA_PERMISSION_PROMPT:"Zugriff auf die Kamera erlauben",CALLING_CAMERA_STARTING:"Kamera wird gestartet",CALLING_CANCEL:"Abbrechen",CALLING_DISABLE_AUDIO:"Audio deaktivieren",CALLING_DISABLE_VIDEO:"Video deaktivieren",CALLING_ENABLE_AUDIO:"Audio aktivieren",CALLING_ENABLE_VIDEO:"Video aktivieren",CALLING_END:"Anruf beenden",CALLING_JOIN:"Anruf beitreten",CALLING_JOIN_PROMPT:"Ein Support-Mitarbeiter mchte Sie anrufen.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Ich",CALLING_MICROPHONE_PERMISSION_DENIED:"Zugriff auf Mikrofon verweigert. Aktivieren Sie diesen in den Browsereinstellungen.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Zugriff auf Mikrofon erlauben",CALLING_NO_DEVICES:"Keine",CALLING_PERMISSION_NEEDED:"Berechtigung erforderlich",CALLING_REJECT:"Anruf ablehnen",CALLING_REJOIN_PROMPT:"Sie sind in einem aktiven Gesprch mit einem Support-Mitarbeiter. Mchten Sie wieder beitreten?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Agent",CALLING_REQUEST:"Videoanruf starten?",CALLING_SAVE:"Speichern",CALLING_SELECT_CAMERA:"Kamera auswhlen",CALLING_SELECT_MICROPHONE:"Mikrofon auswhlen",CALLING_SELECT_SPEAKER:"Sprecher auswhlen",CALLING_SHOW_CALL_SETTINGS:"Anrufeinstellungen anzeigen",DENY:"Ablehnen",END_SESSION:"Cobrowse-Sitzung beenden",FULL_DEVICE_REQUEST_DESCRIPTION:"Ein Support-Mitarbeiter mchte Ihren gesamten Bildschirm anzeigen.",FULL_DEVICE_REQUEST_TITLE:"Vollstndige Bildschirmaufnahme erlauben?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Ein Support-Mitarbeiter mchte diese Seite steuern.",REMOTE_CONTROL_REQUEST_TITLE:"Fernsteuerung erlauben?",SESSION_REQUEST_DESCRIPTION:"Ein Support-Mitarbeiter mchte diese Webseite vorbergehend mit Ihnen nutzen.",SESSION_REQUEST_TITLE:"Cobrowsing erlauben?",UNIVERSAL_PROXY_BLOCKED:"Diese Webseite kann nicht mit einem Support-Mitarbeiter angezeigt werden",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Ein Support-Mitarbeiter mchte Sie zu anderen Webseiten begleiten.",UNIVERSAL_PROXY_REQUEST_TITLE:"Sitzungsfortsetzung erlauben?"},en:{ALLOW:"Allow",CALLING_ACCEPT:"Accept",CALLING_CAMERA_OFF:"Camera is off",CALLING_CAMERA_PERMISSION_DENIED:"Camera access denied. Enable it in your browser settings.",CALLING_CAMERA_PERMISSION_PROMPT:"Allow access to camera",CALLING_CAMERA_STARTING:"Camera is starting",CALLING_CANCEL:"Cancel",CALLING_DISABLE_AUDIO:"Disable audio",CALLING_DISABLE_VIDEO:"Disable video",CALLING_ENABLE_AUDIO:"Enable audio",CALLING_ENABLE_VIDEO:"Enable video",CALLING_END:"End call",CALLING_JOIN:"Join call",CALLING_JOIN_PROMPT:"A support agent would like to call you.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Me",CALLING_MICROPHONE_PERMISSION_DENIED:"Microphone access denied. Enable it in your browser settings.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Allow access to microphone",CALLING_NO_DEVICES:"None",CALLING_PERMISSION_NEEDED:"Permission needed",CALLING_REJECT:"Reject call",CALLING_REJOIN_PROMPT:"You have an active call with a support agent. Do you want to rejoin?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Agent",CALLING_REQUEST:"Enter video call?",CALLING_SAVE:"Save",CALLING_SELECT_CAMERA:"Select camera",CALLING_SELECT_MICROPHONE:"Select microphone",CALLING_SELECT_SPEAKER:"Select speaker",CALLING_SHOW_CALL_SETTINGS:"Show call settings",DENY:"Deny",END_SESSION:"Stop Sharing",FULL_DEVICE_REQUEST_DESCRIPTION:"A support agent would like to view your entire screen.",FULL_DEVICE_REQUEST_TITLE:"Allow full screen capture?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"A support agent would like to control this page.",REMOTE_CONTROL_REQUEST_TITLE:"Allow remote control?",SESSION_REQUEST_DESCRIPTION:"A support agent would like to temporarily use this web page with you.",SESSION_REQUEST_TITLE:"Allow cobrowsing?",UNIVERSAL_PROXY_BLOCKED:"This web page cannot be viewed with a support agent",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"A support agent would like to follow you to other web pages.",UNIVERSAL_PROXY_REQUEST_TITLE:"Allow session continuation?"},es:{ALLOW:"Permitir",CALLING_ACCEPT:"Aceptar",CALLING_CAMERA_OFF:"La cmara est apagada",CALLING_CAMERA_PERMISSION_DENIED:"Acceso a la cmara denegado. Habiltelo en la configuracin de su navegador.",CALLING_CAMERA_PERMISSION_PROMPT:"Permitir acceso a la cmara",CALLING_CAMERA_STARTING:"La cmara se est iniciando",CALLING_CANCEL:"Cancelar",CALLING_DISABLE_AUDIO:"Desactivar audio",CALLING_DISABLE_VIDEO:"Desactivar vdeo",CALLING_ENABLE_AUDIO:"Activar audio",CALLING_ENABLE_VIDEO:"Habilitar vdeo",CALLING_END:"Finalizar llamada",CALLING_JOIN:"Unirse a la llamada",CALLING_JOIN_PROMPT:"Un agente de soporte desea llamarle.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Yo",CALLING_MICROPHONE_PERMISSION_DENIED:"Acceso al micrfono denegado. Habiltelo en la configuracin de su navegador.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Permitir acceso al micrfono",CALLING_NO_DEVICES:"Ninguno",CALLING_PERMISSION_NEEDED:"Permiso necesario",CALLING_REJECT:"Rechazar llamada",CALLING_REJOIN_PROMPT:"Tienes una llamada activa con un agente de soporte. Quieres volver a unirte?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Agente",CALLING_REQUEST:"Entrar a la videollamada?",CALLING_SAVE:"Guardar",CALLING_SELECT_CAMERA:"Seleccionar cmara",CALLING_SELECT_MICROPHONE:"Seleccionar micrfono",CALLING_SELECT_SPEAKER:"Seleccionar altavoz",CALLING_SHOW_CALL_SETTINGS:"Mostrar configuracin de llamadas",DENY:"Denegar",END_SESSION:"Finalizar Sesin",FULL_DEVICE_REQUEST_DESCRIPTION:"Un asistente de soporte solicita visualizar la totalidad de su pantalla.",FULL_DEVICE_REQUEST_TITLE:"Permitir captura completa de pantalla?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Un agente de soporte desea controlar esta pgina.",REMOTE_CONTROL_REQUEST_TITLE:"Permitir control remoto?",SESSION_REQUEST_DESCRIPTION:"Un agente de soporte quiere usar temporalmente esta pgina web con usted.",SESSION_REQUEST_TITLE:"Permitir cobrowsing?",UNIVERSAL_PROXY_BLOCKED:"Esta pgina web no puede ser vista con un agente de soporte",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Un agente de soporte desea seguirle a otras pginas web.",UNIVERSAL_PROXY_REQUEST_TITLE:"Permitir continuacin de sesin?"},"es-MX":{ALLOW:"Permitir",CALLING_ACCEPT:"Aceptar",CALLING_CAMERA_OFF:"La cmara est apagada",CALLING_CAMERA_PERMISSION_DENIED:"Acceso a la cmara denegado. Habiltelo en la configuracin de su navegador.",CALLING_CAMERA_PERMISSION_PROMPT:"Permitir acceso a la cmara",CALLING_CAMERA_STARTING:"La cmara se est iniciando",CALLING_CANCEL:"Cancelar",CALLING_DISABLE_AUDIO:"Desactivar audio",CALLING_DISABLE_VIDEO:"Desactivar video",CALLING_ENABLE_AUDIO:"Habilitar audio",CALLING_ENABLE_VIDEO:"Habilitar video",CALLING_END:"Finalizar llamada",CALLING_JOIN:"Unirse a la llamada",CALLING_JOIN_PROMPT:"Un agente de soporte desea llamarle.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Yo",CALLING_MICROPHONE_PERMISSION_DENIED:"Acceso al micrfono denegado. Habiltelo en la configuracin de su navegador.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Permitir acceso al micrfono",CALLING_NO_DEVICES:"Ninguno",CALLING_PERMISSION_NEEDED:"Permiso necesario",CALLING_REJECT:"Rechazar llamada",CALLING_REJOIN_PROMPT:"Tienes una llamada activa con un agente de soporte. Deseas volver a unirte?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Agente",CALLING_REQUEST:"Ingresar a la videollamada?",CALLING_SAVE:"Guardar",CALLING_SELECT_CAMERA:"Seleccionar cmara",CALLING_SELECT_MICROPHONE:"Seleccionar micrfono",CALLING_SELECT_SPEAKER:"Seleccionar altavoz",CALLING_SHOW_CALL_SETTINGS:"Mostrar configuracin de llamada",DENY:"Denegar",END_SESSION:"Finalizar Sesin de Navegacin Conjunta",FULL_DEVICE_REQUEST_DESCRIPTION:"Un agente de soporte quiere ver toda su pantalla.",FULL_DEVICE_REQUEST_TITLE:"Permitir captura completa de pantalla?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Un agente de soporte quiere controlar esta pgina.",REMOTE_CONTROL_REQUEST_TITLE:"Permitir control remoto?",SESSION_REQUEST_DESCRIPTION:"Un agente de soporte quiere usar temporalmente esta pgina web con usted.",SESSION_REQUEST_TITLE:"Permitir cobrowsing?",UNIVERSAL_PROXY_BLOCKED:"Esta pgina web no puede ser vista con un agente de soporte",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Un agente de soporte quiere seguirle a otras pginas web.",UNIVERSAL_PROXY_REQUEST_TITLE:"Permitir continuacin de sesin?"},et:{ALLOW:"Luba",CALLING_ACCEPT:"Nustu",CALLING_CAMERA_OFF:"Kaamera on vlja llitatud",CALLING_CAMERA_PERMISSION_DENIED:"Kaamera ligips keelatud. Luba see oma brauseri seadetes.",CALLING_CAMERA_PERMISSION_PROMPT:"Luba juurdeps kaamerale",CALLING_CAMERA_STARTING:"Kaamera kivitub",CALLING_CANCEL:"Thista",CALLING_DISABLE_AUDIO:"Llita heli vlja",CALLING_DISABLE_VIDEO:"Keela video",CALLING_ENABLE_AUDIO:"Luba heli",CALLING_ENABLE_VIDEO:"Luba video",CALLING_END:"Lpeta kne",CALLING_JOIN:"Liitu knega",CALLING_JOIN_PROMPT:"Toetusagend soovib teid helistada.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Mina",CALLING_MICROPHONE_PERMISSION_DENIED:"Mikrofoni ligips keelatud. Luba see oma brauseri seadetes.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Luba mikrofoni kasutamise igus",CALLING_NO_DEVICES:"Mitte kski",CALLING_PERMISSION_NEEDED:"Vaja luba",CALLING_REJECT:"Keela kne",CALLING_REJOIN_PROMPT:"Teilitate jooksval knel tugiteenuse esindajaga. Kas soovite uuesti hineda?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Esindaja",CALLING_REQUEST:"Sisene videoknesse?",CALLING_SAVE:"Salvesta",CALLING_SELECT_CAMERA:"Vali kaamera",CALLING_SELECT_MICROPHONE:"Vali mikrofon",CALLING_SELECT_SPEAKER:"Vali kneleja",CALLING_SHOW_CALL_SETTINGS:"Kuva kne seadeid",DENY:"Keeldu",END_SESSION:"Jaga jagamine lpetada",FULL_DEVICE_REQUEST_DESCRIPTION:"Tugiagendi soovib teie kogu ekraani vaadata.",FULL_DEVICE_REQUEST_TITLE:"Luba tisekraani salvestuse lubamine?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Tugiteenindaja soovib seda lehte juhtida.",REMOTE_CONTROL_REQUEST_TITLE:"Lubate kaugjuhtimist?",SESSION_REQUEST_DESCRIPTION:"Toetusagent soovib seda veebilehte teiega ajutiselt kasutada.",SESSION_REQUEST_TITLE:"Luba koosturundus?",UNIVERSAL_PROXY_BLOCKED:"Seda veebilehte ei saa vaadata koos tugiesindajaga",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Toetusagendi soovib teid teistele veebilehtedele jlgida.",UNIVERSAL_PROXY_REQUEST_TITLE:"Kas lubada seansi jtkamine?"},fi:{ALLOW:"Salli",CALLING_ACCEPT:"Hyvksy",CALLING_CAMERA_OFF:"Kamera on pois plt",CALLING_CAMERA_PERMISSION_DENIED:"Kameran kytt estetty. Ota se kyttn selaimesi asetuksissa.",CALLING_CAMERA_PERMISSION_PROMPT:"Salli psy kameraan",CALLING_CAMERA_STARTING:"Kamera kynnistyy",CALLING_CANCEL:"Peruuta",CALLING_DISABLE_AUDIO:"Poista ni kytst",CALLING_DISABLE_VIDEO:"Poista video kytst",CALLING_ENABLE_AUDIO:"Ota ni kyttn",CALLING_ENABLE_VIDEO:"Ota video kyttn",CALLING_END:"Lopeta puhelu",CALLING_JOIN:"Liity puheluun",CALLING_JOIN_PROMPT:"Tukihenkil haluaisi soittaa sinulle.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Min",CALLING_MICROPHONE_PERMISSION_DENIED:"Mikrofonin kytt estetty. Ota se kyttn selaimesi asetuksissa.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Salli psy mikrofonille",CALLING_NO_DEVICES:"Ei mitn",CALLING_PERMISSION_NEEDED:"Lupa tarvitaan",CALLING_REJECT:"Hylk puhelu",CALLING_REJOIN_PROMPT:"Sinulla on aktiivinen puhelu tukiedustajan kanssa. Haluatko liitty uudelleen?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Asiakaspalvelija",CALLING_REQUEST:"Haluatko menn videopuheluun?",CALLING_SAVE:"Tallenna",CALLING_SELECT_CAMERA:"Valitse kamera",CALLING_SELECT_MICROPHONE:"Valitse mikrofoni",CALLING_SELECT_SPEAKER:"Valitse kaiutin",CALLING_SHOW_CALL_SETTINGS:"Nyt puheluasetukset",DENY:"Est",END_SESSION:"Lopeta jakaminen",FULL_DEVICE_REQUEST_DESCRIPTION:"Tukihenkil haluaa nhd koko nyttsi.",FULL_DEVICE_REQUEST_TITLE:"Sallitaanko kokoruudun tallennus?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Tukihenkil haluaisi ohjata tt sivua.",REMOTE_CONTROL_REQUEST_TITLE:"Sallitaanko etohjaus?",SESSION_REQUEST_DESCRIPTION:"Asiakaspalvelija haluaisi vliaikaisesti kytt tt verkkosivua kanssasi.",SESSION_REQUEST_TITLE:"Salli yhteisselaus?",UNIVERSAL_PROXY_BLOCKED:"Tt verkkosivua ei voi tarkastella tukihenkiln kanssa",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Tukihenkil haluaa seurata sinua muille verkkosivuille.",UNIVERSAL_PROXY_REQUEST_TITLE:"Sallitaanko istunnon jatkaminen?"},fr:{ALLOW:"Autoriser",CALLING_ACCEPT:"Accepter",CALLING_CAMERA_OFF:"La camra est teinte",CALLING_CAMERA_PERMISSION_DENIED:"Accs  la camra refus. Activez-le dans les paramtres de votre navigateur.",CALLING_CAMERA_PERMISSION_PROMPT:"Autoriser l'accs  la camra",CALLING_CAMERA_STARTING:"La camra dmarre",CALLING_CANCEL:"Annuler",CALLING_DISABLE_AUDIO:"Dsactiver l'audio",CALLING_DISABLE_VIDEO:"Dsactiver la vido",CALLING_ENABLE_AUDIO:"Activer l'audio",CALLING_ENABLE_VIDEO:"Activer la vido",CALLING_END:"Terminer l'appel",CALLING_JOIN:"Rejoindre l'appel",CALLING_JOIN_PROMPT:"Un agent de support souhaite vous appeler.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Moi",CALLING_MICROPHONE_PERMISSION_DENIED:"Accs au microphone refus. Activez-le dans les paramtres de votre navigateur.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Autoriser l'accs au microphone",CALLING_NO_DEVICES:"Aucun",CALLING_PERMISSION_NEEDED:"Permission requise",CALLING_REJECT:"Rejeter l'appel",CALLING_REJOIN_PROMPT:"Vous tes en communication avec un agent de support. Voulez-vous rejoindre  nouveau ?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Agent",CALLING_REQUEST:"Entrer dans l'appel vido ?",CALLING_SAVE:"Enregistrer",CALLING_SELECT_CAMERA:"Slectionner la camra",CALLING_SELECT_MICROPHONE:"Slectionner un microphone",CALLING_SELECT_SPEAKER:"Slectionner le haut-parleur",CALLING_SHOW_CALL_SETTINGS:"Afficher les paramtres d'appel",DENY:"Refuser",END_SESSION:"Terminer la session de Cobrowse",FULL_DEVICE_REQUEST_DESCRIPTION:"Un agent de soutien souhaiterait voir l'intgralit de votre cran.",FULL_DEVICE_REQUEST_TITLE:"Autoriser la capture d'cran complte ?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Un agent du soutien souhaiterait avoir le contrle de cette page.",REMOTE_CONTROL_REQUEST_TITLE:"Autoriser le contrle  distance ?",SESSION_REQUEST_DESCRIPTION:"Un agent de soutien souhaiterait temporairement utiliser cette page Web avec vous.",SESSION_REQUEST_TITLE:"Autoriser le cobrowsing ?",UNIVERSAL_PROXY_BLOCKED:"Cette page Web ne peut pas tre vue avec un agent de soutien",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Un agent de soutien souhaiterait vous suivre vers d'autres pages Web.",UNIVERSAL_PROXY_REQUEST_TITLE:"Autoriser la continuation de session ?"},hi:{ALLOW:" ",CALLING_ACCEPT:" ",CALLING_CAMERA_OFF:"  ",CALLING_CAMERA_PERMISSION_DENIED:"         ",CALLING_CAMERA_PERMISSION_PROMPT:"     ",CALLING_CAMERA_STARTING:"    ",CALLING_CANCEL:" ",CALLING_DISABLE_AUDIO:"  ",CALLING_DISABLE_VIDEO:"  ",CALLING_ENABLE_AUDIO:"  ",CALLING_ENABLE_VIDEO:"  ",CALLING_END:"  ",CALLING_JOIN:"   ",CALLING_JOIN_PROMPT:"       ",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"",CALLING_MICROPHONE_PERMISSION_DENIED:"         ",CALLING_MICROPHONE_PERMISSION_PROMPT:"     ",CALLING_NO_DEVICES:" ",CALLING_PERMISSION_NEEDED:"  ",CALLING_REJECT:"  ",CALLING_REJOIN_PROMPT:"              ?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"",CALLING_REQUEST:"    ?",CALLING_SAVE:"",CALLING_SELECT_CAMERA:" ",CALLING_SELECT_MICROPHONE:" ",CALLING_SELECT_SPEAKER:" ",CALLING_SHOW_CALL_SETTINGS:"  ",DENY:" ",END_SESSION:"   ",FULL_DEVICE_REQUEST_DESCRIPTION:"       ",FULL_DEVICE_REQUEST_TITLE:"     ?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"         ",REMOTE_CONTROL_REQUEST_TITLE:"    ?",SESSION_REQUEST_DESCRIPTION:"              ",SESSION_REQUEST_TITLE:"   ?",UNIVERSAL_PROXY_BLOCKED:"          ",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"          ",UNIVERSAL_PROXY_REQUEST_TITLE:"    ?"},it:{ALLOW:"Consenti",CALLING_ACCEPT:"Accetta",CALLING_CAMERA_OFF:"La fotocamera  spenta",CALLING_CAMERA_PERMISSION_DENIED:"Accesso alla fotocamera negato. Attivalo nelle impostazioni del tuo browser.",CALLING_CAMERA_PERMISSION_PROMPT:"Consenti l'accesso alla fotocamera",CALLING_CAMERA_STARTING:"La fotocamera si sta avviando",CALLING_CANCEL:"Annulla",CALLING_DISABLE_AUDIO:"Disabilita audio",CALLING_DISABLE_VIDEO:"Disabilita video",CALLING_ENABLE_AUDIO:"Abilita audio",CALLING_ENABLE_VIDEO:"Abilita video",CALLING_END:"Termina chiamata",CALLING_JOIN:"Partecipa alla chiamata",CALLING_JOIN_PROMPT:"Un agente di supporto desidera chiamarla.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Me",CALLING_MICROPHONE_PERMISSION_DENIED:"Accesso al microfono negato. Abilitalo nelle impostazioni del browser.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Consenti l'accesso al microfono",CALLING_NO_DEVICES:"Nessuno",CALLING_PERMISSION_NEEDED:"Permesso necessario",CALLING_REJECT:"Rifiuta chiamata",CALLING_REJOIN_PROMPT:"Hai una chiamata attiva con un agente di supporto. Vuoi rientrare?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Agente",CALLING_REQUEST:"Avviare la videochiamata?",CALLING_SAVE:"Salva",CALLING_SELECT_CAMERA:"Seleziona la fotocamera",CALLING_SELECT_MICROPHONE:"Seleziona microfono",CALLING_SELECT_SPEAKER:"Seleziona altoparlante",CALLING_SHOW_CALL_SETTINGS:"Mostra impostazioni chiamata",DENY:"Nega",END_SESSION:"Termina la sessione di Cobrowse",FULL_DEVICE_REQUEST_DESCRIPTION:"Un agente dell'assistenza desidera visualizzare tutto il tuo schermo.",FULL_DEVICE_REQUEST_TITLE:"Consentire cattura schermo completa?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Un agente dell'assistenza desidera controllare questa pagina.",REMOTE_CONTROL_REQUEST_TITLE:"Consentire controllo remoto?",SESSION_REQUEST_DESCRIPTION:"Un agente dell'assistenza vorrebbe utilizzare temporaneamente questa pagina web con te.",SESSION_REQUEST_TITLE:"Consentire cobrowsing?",UNIVERSAL_PROXY_BLOCKED:"Questa pagina web non pu essere visualizzata con un agente dell'assistenza",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Un agente dell'assistenza vorrebbe seguirti su altre pagine web.",UNIVERSAL_PROXY_REQUEST_TITLE:"Consentire continuazione sessione?"},ja:{ALLOW:"",CALLING_ACCEPT:"",CALLING_CAMERA_OFF:"",CALLING_CAMERA_PERMISSION_DENIED:"",CALLING_CAMERA_PERMISSION_PROMPT:"",CALLING_CAMERA_STARTING:"",CALLING_CANCEL:"",CALLING_DISABLE_AUDIO:"",CALLING_DISABLE_VIDEO:"",CALLING_ENABLE_AUDIO:"",CALLING_ENABLE_VIDEO:"",CALLING_END:"",CALLING_JOIN:"",CALLING_JOIN_PROMPT:"",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"",CALLING_MICROPHONE_PERMISSION_DENIED:"",CALLING_MICROPHONE_PERMISSION_PROMPT:"",CALLING_NO_DEVICES:"",CALLING_PERMISSION_NEEDED:"",CALLING_REJECT:"",CALLING_REJOIN_PROMPT:"",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"",CALLING_REQUEST:"",CALLING_SAVE:"",CALLING_SELECT_CAMERA:"",CALLING_SELECT_MICROPHONE:"",CALLING_SELECT_SPEAKER:"",CALLING_SHOW_CALL_SETTINGS:"",DENY:"",END_SESSION:"",FULL_DEVICE_REQUEST_DESCRIPTION:"",FULL_DEVICE_REQUEST_TITLE:"",REMOTE_CONTROL_REQUEST_DESCRIPTION:"",REMOTE_CONTROL_REQUEST_TITLE:"",SESSION_REQUEST_DESCRIPTION:"Web",SESSION_REQUEST_TITLE:"",UNIVERSAL_PROXY_BLOCKED:"Web",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Web",UNIVERSAL_PROXY_REQUEST_TITLE:""},kk:{ALLOW:" ",CALLING_ACCEPT:"",CALLING_CAMERA_OFF:" ",CALLING_CAMERA_PERMISSION_DENIED:"   .    .",CALLING_CAMERA_PERMISSION_PROMPT:"   ",CALLING_CAMERA_STARTING:"  ",CALLING_CANCEL:"",CALLING_DISABLE_AUDIO:" ",CALLING_DISABLE_VIDEO:" ",CALLING_ENABLE_AUDIO:" ",CALLING_ENABLE_VIDEO:" ",CALLING_END:" ",CALLING_JOIN:" ",CALLING_JOIN_PROMPT:"      .",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"",CALLING_MICROPHONE_PERMISSION_DENIED:"   .    .",CALLING_MICROPHONE_PERMISSION_PROMPT:"  ",CALLING_NO_DEVICES:"",CALLING_PERMISSION_NEEDED:" ",CALLING_REJECT:" ",CALLING_REJOIN_PROMPT:"     .    ?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"",CALLING_REQUEST:"    ?",CALLING_SAVE:"",CALLING_SELECT_CAMERA:" ",CALLING_SELECT_MICROPHONE:" ",CALLING_SELECT_SPEAKER:" ",CALLING_SHOW_CALL_SETTINGS:"  ",DENY:" ",END_SESSION:"   ",FULL_DEVICE_REQUEST_DESCRIPTION:"     .",FULL_DEVICE_REQUEST_TITLE:"     ?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"     .",REMOTE_CONTROL_REQUEST_TITLE:"    ?",SESSION_REQUEST_DESCRIPTION:"   -    .",SESSION_REQUEST_TITLE:"   ?",UNIVERSAL_PROXY_BLOCKED:" -      ",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"    -     .",UNIVERSAL_PROXY_REQUEST_TITLE:"    ?"},ko:{ALLOW:"",CALLING_ACCEPT:"",CALLING_CAMERA_OFF:"  ",CALLING_CAMERA_PERMISSION_DENIED:"  .   .",CALLING_CAMERA_PERMISSION_PROMPT:"  ",CALLING_CAMERA_STARTING:"  ",CALLING_CANCEL:"",CALLING_DISABLE_AUDIO:" ",CALLING_DISABLE_VIDEO:" ",CALLING_ENABLE_AUDIO:" ",CALLING_ENABLE_VIDEO:" ",CALLING_END:" ",CALLING_JOIN:" ",CALLING_JOIN_PROMPT:"    .",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"",CALLING_MICROPHONE_PERMISSION_DENIED:"  .   .",CALLING_MICROPHONE_PERMISSION_PROMPT:"  ",CALLING_NO_DEVICES:"",CALLING_PERMISSION_NEEDED:" ",CALLING_REJECT:" ",CALLING_REJOIN_PROMPT:"   .  ?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"",CALLING_REQUEST:"  ?",CALLING_SAVE:"",CALLING_SELECT_CAMERA:" ",CALLING_SELECT_MICROPHONE:" ",CALLING_SELECT_SPEAKER:" ",CALLING_SHOW_CALL_SETTINGS:"  ",DENY:"",END_SESSION:"Cobrowse  ",FULL_DEVICE_REQUEST_DESCRIPTION:"      .",FULL_DEVICE_REQUEST_TITLE:"   ?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"     .",REMOTE_CONTROL_REQUEST_TITLE:"  ?",SESSION_REQUEST_DESCRIPTION:"         .",SESSION_REQUEST_TITLE:" ?",UNIVERSAL_PROXY_BLOCKED:"        ",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"       .",UNIVERSAL_PROXY_REQUEST_TITLE:"  ?"},lt:{ALLOW:"Leisti",CALLING_ACCEPT:"Priimti",CALLING_CAMERA_OFF:"Kamera ijungta",CALLING_CAMERA_PERMISSION_DENIED:"Prieiga prie kameros udrausta. galinkite j savo narykls nustatymuose.",CALLING_CAMERA_PERMISSION_PROMPT:"Leisti prieig prie kameros",CALLING_CAMERA_STARTING:"Kamera pradedama veikti",CALLING_CANCEL:"Ataukti",CALLING_DISABLE_AUDIO:"Ijungti gars",CALLING_DISABLE_VIDEO:"Ijungti vaizdo ra",CALLING_ENABLE_AUDIO:"jungti gars",CALLING_ENABLE_VIDEO:"jungti vaizdo ra",CALLING_END:"Baigti skambut",CALLING_JOIN:"Prisijungti prie skambuio",CALLING_JOIN_PROMPT:"Paramaus agentas nort jums paskambinti.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Mano",CALLING_MICROPHONE_PERMISSION_DENIED:"Prieiga prie mikrofono atmesta. galinkite j savo narykls nustatymuose.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Leisti prieig prie mikrofono",CALLING_NO_DEVICES:"Nra",CALLING_PERMISSION_NEEDED:"Reikalinga leidimas",CALLING_REJECT:"Atmesti skambut",CALLING_REJOIN_PROMPT:"Js turite aktyv skambut su palaikymo agentu. Ar norite vl prisijungti?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Agentas",CALLING_REQUEST:"Pradti vaizdo skambut?",CALLING_SAVE:"Isaugoti",CALLING_SELECT_CAMERA:"Pasirinkite kamer",CALLING_SELECT_MICROPHONE:"Pasirinkite mikrofon",CALLING_SELECT_SPEAKER:"Pasirinkite kalbtoj",CALLING_SHOW_CALL_SETTINGS:"Rodyti skambuio nustatymus",DENY:"Atmesti",END_SESSION:"Nutraukti bendrinim",FULL_DEVICE_REQUEST_DESCRIPTION:"Pagalbos agentas nort perirti vis js ekran.",FULL_DEVICE_REQUEST_TITLE:"Leisti fiksuoti vis ekran?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Palaikymo agentas nort valdyti  puslap.",REMOTE_CONTROL_REQUEST_TITLE:"Leisti nuotolin kontrol?",SESSION_REQUEST_DESCRIPTION:"Pagalbos agentas nort laikinai naudotis iuo tinklapiu kartu su jumis.",SESSION_REQUEST_TITLE:"Leisti bendr narym?",UNIVERSAL_PROXY_BLOCKED:"io puslapio negalima perirti su palaikymo agentu",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Pagalbos agentas nort jus sekti  kitas interneto svetaines.",UNIVERSAL_PROXY_REQUEST_TITLE:"Leisti tsti sesij?"},mr:{ALLOW:" ",CALLING_ACCEPT:" ",CALLING_CAMERA_OFF:"  ",CALLING_CAMERA_PERMISSION_DENIED:"   .      .",CALLING_CAMERA_PERMISSION_PROMPT:"  ",CALLING_CAMERA_STARTING:"   ",CALLING_CANCEL:" ",CALLING_DISABLE_AUDIO:"  ",CALLING_DISABLE_VIDEO:"  ",CALLING_ENABLE_AUDIO:"  ",CALLING_ENABLE_VIDEO:"  ",CALLING_END:" ",CALLING_JOIN:"  ",CALLING_JOIN_PROMPT:"     .",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"",CALLING_MICROPHONE_PERMISSION_DENIED:"    .      .",CALLING_MICROPHONE_PERMISSION_PROMPT:"   ",CALLING_NO_DEVICES:"",CALLING_PERMISSION_NEEDED:"  ",CALLING_REJECT:" ",CALLING_REJOIN_PROMPT:"     .    ?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"",CALLING_REQUEST:"     ?",CALLING_SAVE:" ",CALLING_SELECT_CAMERA:" ",CALLING_SELECT_MICROPHONE:" ",CALLING_SELECT_SPEAKER:" ",CALLING_SHOW_CALL_SETTINGS:"  ",DENY:" ",END_SESSION:"   ",FULL_DEVICE_REQUEST_DESCRIPTION:"      .",FULL_DEVICE_REQUEST_TITLE:"    ?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"       .",REMOTE_CONTROL_REQUEST_TITLE:"   ?",SESSION_REQUEST_DESCRIPTION:"        .",SESSION_REQUEST_TITLE:"  ?",UNIVERSAL_PROXY_BLOCKED:"        ",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"         .",UNIVERSAL_PROXY_REQUEST_TITLE:"   ?"},ms:{ALLOW:"Benarkan",CALLING_ACCEPT:"Terima",CALLING_CAMERA_OFF:"Kamera dimatikan",CALLING_CAMERA_PERMISSION_DENIED:"Akses kamera dinafi. Aktifkannya dalam tetapan pelayar anda.",CALLING_CAMERA_PERMISSION_PROMPT:"Benarkan akses ke kamera",CALLING_CAMERA_STARTING:"Kamera sedang dimulakan",CALLING_CANCEL:"Batal",CALLING_DISABLE_AUDIO:"Lumpuhkan audio",CALLING_DISABLE_VIDEO:"Lumpuhkan video",CALLING_ENABLE_AUDIO:"Dayakan audio",CALLING_ENABLE_VIDEO:"Dayakan video",CALLING_END:"Tamatkan panggilan",CALLING_JOIN:"Sertai panggilan",CALLING_JOIN_PROMPT:"Ejen sokongan ingin menghubungi anda.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Saya",CALLING_MICROPHONE_PERMISSION_DENIED:"Akses mikrofon ditolak. Aktifkan dalam tetapan pelayar anda.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Benarkan akses ke mikrofon",CALLING_NO_DEVICES:"Tiada",CALLING_PERMISSION_NEEDED:"Kebenaran diperlukan",CALLING_REJECT:"Tolak panggilan",CALLING_REJOIN_PROMPT:"Anda sedang dalam panggilan aktif dengan ejen sokongan. Adakah anda ingin menyertai semula?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Ejen",CALLING_REQUEST:"Masuk panggilan video?",CALLING_SAVE:"Simpan",CALLING_SELECT_CAMERA:"Pilih kamera",CALLING_SELECT_MICROPHONE:"Pilih mikrofon",CALLING_SELECT_SPEAKER:"Pilih pembesar suara",CALLING_SHOW_CALL_SETTINGS:"Tunjukkan tetapan panggilan",DENY:"Tolak",END_SESSION:"Berhenti Berkongsi",FULL_DEVICE_REQUEST_DESCRIPTION:"Ejen sokongan ingin melihat seluruh skrin anda.",FULL_DEVICE_REQUEST_TITLE:"Benarkan rakaman skrin penuh?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Ejen sokongan ingin mengawal halaman ini.",REMOTE_CONTROL_REQUEST_TITLE:"Benarkan kawalan jauh?",SESSION_REQUEST_DESCRIPTION:"Ejen sokongan ingin menggunakan halaman web ini dengan anda buat sementara waktu.",SESSION_REQUEST_TITLE:"Benarkan cobrowsing?",UNIVERSAL_PROXY_BLOCKED:"Halaman web ini tidak dapat dilihat bersama ejen sokongan",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Ejen sokongan ingin mengikuti anda ke halaman web lain.",UNIVERSAL_PROXY_REQUEST_TITLE:"Benarkan sambungan sesi?"},nl:{ALLOW:"Toestaan",CALLING_ACCEPT:"Accepteren",CALLING_CAMERA_OFF:"Camera is uit",CALLING_CAMERA_PERMISSION_DENIED:"Toegang tot camera geweigerd. Schakel deze in de instellingen van uw browser in.",CALLING_CAMERA_PERMISSION_PROMPT:"Toegang tot camera toestaan",CALLING_CAMERA_STARTING:"Camera wordt gestart",CALLING_CANCEL:"Annuleren",CALLING_DISABLE_AUDIO:"Audio uitschakelen",CALLING_DISABLE_VIDEO:"Video uitschakelen",CALLING_ENABLE_AUDIO:"Audio inschakelen",CALLING_ENABLE_VIDEO:"Video inschakelen",CALLING_END:"Oproep beindigen",CALLING_JOIN:"Deelnemen aan oproep",CALLING_JOIN_PROMPT:"Een supportmedewerker wil u bellen.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Ik",CALLING_MICROPHONE_PERMISSION_DENIED:"Microfoon toegang geweigerd. Schakel dit in uw browserinstellingen in.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Toegang tot microfoon toestaan",CALLING_NO_DEVICES:"Geen",CALLING_PERMISSION_NEEDED:"Toestemming vereist",CALLING_REJECT:"Oproep weigeren",CALLING_REJOIN_PROMPT:"U bent in gesprek met een supportmedewerker. Wilt u opnieuw deelnemen?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Agent",CALLING_REQUEST:"Video-oproep starten?",CALLING_SAVE:"Opslaan",CALLING_SELECT_CAMERA:"Selecteer camera",CALLING_SELECT_MICROPHONE:"Selecteer microfoon",CALLING_SELECT_SPEAKER:"Selecteer spreker",CALLING_SHOW_CALL_SETTINGS:"Toon oproepinstellingen",DENY:"Afwijzen",END_SESSION:"Cobrowse-sessie beindigen",FULL_DEVICE_REQUEST_DESCRIPTION:"Een support agent wilt jouw volledige scherm zien.",FULL_DEVICE_REQUEST_TITLE:"Volledige schermopname toestaan?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Een support agent wilt graag deze pagina bedienen.",REMOTE_CONTROL_REQUEST_TITLE:"Bediening op afstand toestaan?",SESSION_REQUEST_DESCRIPTION:"Een support agent wilt graag tijdelijk met u meekijken op deze webpagina.",SESSION_REQUEST_TITLE:"Cobrowsing toestaan?",UNIVERSAL_PROXY_BLOCKED:"Deze webpagina kan niet worden bekeken met een support agent",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Een support agent wilt u graag volgen naar andere webpagina's.",UNIVERSAL_PROXY_REQUEST_TITLE:"Sessievoortzetting toestaan?"},pl:{ALLOW:"Umoliwi",CALLING_ACCEPT:"Akceptuj",CALLING_CAMERA_OFF:"Kamera jest wyczona",CALLING_CAMERA_PERMISSION_DENIED:"Odmowa dostpu do kamery. Wcz j w ustawieniach przegldarki.",CALLING_CAMERA_PERMISSION_PROMPT:"Zezwl na dostp do kamery",CALLING_CAMERA_STARTING:"Kamera si uruchamia",CALLING_CANCEL:"Anuluj",CALLING_DISABLE_AUDIO:"Wycz dwik",CALLING_DISABLE_VIDEO:"Wycz wideo",CALLING_ENABLE_AUDIO:"Wcz dwik",CALLING_ENABLE_VIDEO:"Wcz wideo",CALLING_END:"Zakocz rozmow",CALLING_JOIN:"Docz do rozmowy",CALLING_JOIN_PROMPT:"Agent wsparcia chciaby do Ciebie zadzwoni.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Ja",CALLING_MICROPHONE_PERMISSION_DENIED:"Dostp do mikrofonu zosta odmwiony. Wcz go w ustawieniach przegldarki.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Zezwl na dostp do mikrofonu",CALLING_NO_DEVICES:"Brak",CALLING_PERMISSION_NEEDED:"Wymagana zgoda",CALLING_REJECT:"Odrzu poczenie",CALLING_REJOIN_PROMPT:"Masz aktywne poczenie z agentem wsparcia. Czy chcesz doczy ponownie?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Agent",CALLING_REQUEST:"Rozpocz rozmow wideo?",CALLING_SAVE:"Zapisz",CALLING_SELECT_CAMERA:"Wybierz kamer",CALLING_SELECT_MICROPHONE:"Wybierz mikrofon",CALLING_SELECT_SPEAKER:"Wybierz gonik",CALLING_SHOW_CALL_SETTINGS:"Poka ustawienia poczenia",DENY:"Zaprzeczy",END_SESSION:"Zakocz sesj Cobrowse",FULL_DEVICE_REQUEST_DESCRIPTION:"Pracownik dziau pomocy chciaby zobaczy cay Twj ekran.",FULL_DEVICE_REQUEST_TITLE:"Czy zezwoli na pene przechwycenie ekranu?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Pracownik dziau pomocy chciaby kontrolowa t stron.",REMOTE_CONTROL_REQUEST_TITLE:"Czy zezwoli na zdalne sterowanie?",SESSION_REQUEST_DESCRIPTION:"Pracownik dziau pomocy chciaby tymczasowo korzysta z tej strony internetowej razem z Tob.",SESSION_REQUEST_TITLE:"Czy zezwoli na cobrowsing?",UNIVERSAL_PROXY_BLOCKED:"Ta strona internetowa nie moe by ogldana z pracownikiem dziau pomocy",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Pracownik dziau pomocy chciaby poda za Tob na inne strony internetowe.",UNIVERSAL_PROXY_REQUEST_TITLE:"Czy zezwoli na kontynuacj sesji?"},pt:{ALLOW:"Permitir",CALLING_ACCEPT:"Aceitar",CALLING_CAMERA_OFF:"Cmara desligada",CALLING_CAMERA_PERMISSION_DENIED:"Acesso  cmara negado. Ative-o nas definies do seu navegador.",CALLING_CAMERA_PERMISSION_PROMPT:"Permitir acesso  cmara",CALLING_CAMERA_STARTING:"Cmara a iniciar-se",CALLING_CANCEL:"Cancelar",CALLING_DISABLE_AUDIO:"Desativar udio",CALLING_DISABLE_VIDEO:"Desativar vdeo",CALLING_ENABLE_AUDIO:"Ativar udio",CALLING_ENABLE_VIDEO:"Ativar vdeo",CALLING_END:"Terminar chamada",CALLING_JOIN:"Entrar na chamada",CALLING_JOIN_PROMPT:"Um agente de suporte gostaria de lhe telefonar.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Eu",CALLING_MICROPHONE_PERMISSION_DENIED:"Acesso ao microfone negado. Ative-o nas definies do seu navegador.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Permitir acesso ao microfone",CALLING_NO_DEVICES:"Nenhum",CALLING_PERMISSION_NEEDED:"Permisso necessria",CALLING_REJECT:"Recusar chamada",CALLING_REJOIN_PROMPT:"Tem uma chamada ativa com um agente de suporte. Deseja voltar a participar?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Agente",CALLING_REQUEST:"Entrar na chamada de vdeo?",CALLING_SAVE:"Guardar",CALLING_SELECT_CAMERA:"Selecionar cmara",CALLING_SELECT_MICROPHONE:"Selecionar microfone",CALLING_SELECT_SPEAKER:"Selecionar orador",CALLING_SHOW_CALL_SETTINGS:"Mostrar definies de chamada",DENY:"Negado",END_SESSION:"Terminar Sesso de Cobrowse",FULL_DEVICE_REQUEST_DESCRIPTION:"Um agente de suporte gostaria de ver sua tela inteira.",FULL_DEVICE_REQUEST_TITLE:"Permitir captura completa de ecr?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Um agente de suporte gostaria de controlar esta pgina.",REMOTE_CONTROL_REQUEST_TITLE:"Permitir controlo remoto?",SESSION_REQUEST_DESCRIPTION:"Um agente de suporte gostaria de usar temporariamente esta pgina da web com voc.",SESSION_REQUEST_TITLE:"Permitir cobrowsing?",UNIVERSAL_PROXY_BLOCKED:"Esta pgina da web no pode ser visualizada com um agente de suporte",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Um agente de suporte gostaria de segui-lo para outras pginas da web.",UNIVERSAL_PROXY_REQUEST_TITLE:"Permitir continuao da sesso?"},"pt-BR":{ALLOW:"Permitir",CALLING_ACCEPT:"Aceitar",CALLING_CAMERA_OFF:"Cmera est desligada",CALLING_CAMERA_PERMISSION_DENIED:"Acesso  cmera negado. Ative-o nas configuraes do seu navegador.",CALLING_CAMERA_PERMISSION_PROMPT:"Permitir acesso  cmera",CALLING_CAMERA_STARTING:"A cmera est iniciando",CALLING_CANCEL:"Cancelar",CALLING_DISABLE_AUDIO:"Desativar udio",CALLING_DISABLE_VIDEO:"Desativar vdeo",CALLING_ENABLE_AUDIO:"Ativar udio",CALLING_ENABLE_VIDEO:"Ativar vdeo",CALLING_END:"Encerrar chamada",CALLING_JOIN:"Entrar na chamada",CALLING_JOIN_PROMPT:"Um agente de suporte gostaria de ligar para voc.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Eu",CALLING_MICROPHONE_PERMISSION_DENIED:"Acesso ao microfone negado. Ative-o nas configuraes do seu navegador.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Permitir acesso ao microfone",CALLING_NO_DEVICES:"Nenhum",CALLING_PERMISSION_NEEDED:"Permisso necessria",CALLING_REJECT:"Rejeitar chamada",CALLING_REJOIN_PROMPT:"Voc est em uma ligao ativa com um agente de suporte. Deseja retornar?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Agente",CALLING_REQUEST:"Entrar na chamada de vdeo?",CALLING_SAVE:"Salvar",CALLING_SELECT_CAMERA:"Selecionar cmera",CALLING_SELECT_MICROPHONE:"Selecionar microfone",CALLING_SELECT_SPEAKER:"Selecionar orador",CALLING_SHOW_CALL_SETTINGS:"Mostrar configuraes de chamada",DENY:"Negar",END_SESSION:"Terminar Sesso de Cobrowse",FULL_DEVICE_REQUEST_DESCRIPTION:"Um agente de suporte gostaria de ver sua tela inteira.",FULL_DEVICE_REQUEST_TITLE:"Permitir captura completa de tela?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Um agente de suporte gostaria de controlar esta pgina.",REMOTE_CONTROL_REQUEST_TITLE:"Permitir controle remoto?",SESSION_REQUEST_DESCRIPTION:"Um agente de suporte gostaria de usar temporariamente esta pgina da web com voc.",SESSION_REQUEST_TITLE:"Permitir cobrowsing?",UNIVERSAL_PROXY_BLOCKED:"Esta pgina da web no pode ser visualizada com um agente de suporte",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Um agente de suporte gostaria de segui-lo para outras pginas da web.",UNIVERSAL_PROXY_REQUEST_TITLE:"Permitir continuao da sesso?"},ro:{ALLOW:"Permite",CALLING_ACCEPT:"Accept",CALLING_CAMERA_OFF:"Camera este oprit",CALLING_CAMERA_PERMISSION_DENIED:"Accesul la camer a fost refuzat. Activai-l n setrile browserului dvs.",CALLING_CAMERA_PERMISSION_PROMPT:"Permitei accesul la camer",CALLING_CAMERA_STARTING:"Camera pornete",CALLING_CANCEL:"Anuleaz",CALLING_DISABLE_AUDIO:"Dezactiveaz audio-ul",CALLING_DISABLE_VIDEO:"Dezactiveaz video-ul",CALLING_ENABLE_AUDIO:"Activeaz audio",CALLING_ENABLE_VIDEO:"Activeaz video-ul",CALLING_END:"ncheiere apel",CALLING_JOIN:"Alturai-v apelului",CALLING_JOIN_PROMPT:"Un agent de suport ar dori s v contacteze telefonic.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Eu",CALLING_MICROPHONE_PERMISSION_DENIED:"Accesul la microfon a fost refuzat. Activai-l n setrile browserului dumneavoastr.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Permite accesul la microfon",CALLING_NO_DEVICES:"Niciunul",CALLING_PERMISSION_NEEDED:"Permisiune necesar",CALLING_REJECT:"Respinge apelul",CALLING_REJOIN_PROMPT:"Avei un apel activ cu un agent de suport. Dorii s v reconectai?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Agent",CALLING_REQUEST:"Dorii s intrai n apelul video?",CALLING_SAVE:"Salveaz",CALLING_SELECT_CAMERA:"Selectai camera",CALLING_SELECT_MICROPHONE:"Selectai microfonul",CALLING_SELECT_SPEAKER:"Selectai difuzorul",CALLING_SHOW_CALL_SETTINGS:"Afiai setrile apelului",DENY:"Refuz",END_SESSION:"Oprii partajarea",FULL_DEVICE_REQUEST_DESCRIPTION:"Un agent de asisten dorete s vad ntreg ecranul dumneavoastr.",FULL_DEVICE_REQUEST_TITLE:"Permite capturarea ecranului complet?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Un agent de suport dorete s controleze aceast pagin.",REMOTE_CONTROL_REQUEST_TITLE:"Permite controlul de la distan?",SESSION_REQUEST_DESCRIPTION:"Un agent de asisten dorete s utilizeze temporar aceast pagin web mpreun cu dumneavoastr.",SESSION_REQUEST_TITLE:"Permitei cobrowsing-ul?",UNIVERSAL_PROXY_BLOCKED:"Aceast pagin web nu poate fi vizualizat mpreun cu un agent de asisten",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Un agent de suport dorete s v urmreasc pe alte pagini web.",UNIVERSAL_PROXY_REQUEST_TITLE:"Permitei continuarea sesiunii?"},ru:{ALLOW:"",CALLING_ACCEPT:"",CALLING_CAMERA_OFF:" ",CALLING_CAMERA_PERMISSION_DENIED:"   .      .",CALLING_CAMERA_PERMISSION_PROMPT:"   ",CALLING_CAMERA_STARTING:" ",CALLING_CANCEL:"",CALLING_DISABLE_AUDIO:" ",CALLING_DISABLE_VIDEO:" ",CALLING_ENABLE_AUDIO:" ",CALLING_ENABLE_VIDEO:" ",CALLING_END:" ",CALLING_JOIN:"  ",CALLING_JOIN_PROMPT:"    .",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"",CALLING_MICROPHONE_PERMISSION_DENIED:"   .     .",CALLING_MICROPHONE_PERMISSION_PROMPT:"   ",CALLING_NO_DEVICES:"",CALLING_PERMISSION_NEEDED:" ",CALLING_REJECT:" ",CALLING_REJOIN_PROMPT:"      .   ?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"",CALLING_REQUEST:" ?",CALLING_SAVE:"",CALLING_SELECT_CAMERA:" ",CALLING_SELECT_MICROPHONE:" ",CALLING_SELECT_SPEAKER:" ",CALLING_SHOW_CALL_SETTINGS:"  ",DENY:"",END_SESSION:"   ",FULL_DEVICE_REQUEST_DESCRIPTION:"       .",FULL_DEVICE_REQUEST_TITLE:"   ?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"      .",REMOTE_CONTROL_REQUEST_TITLE:"  ?",SESSION_REQUEST_DESCRIPTION:"        -  .",SESSION_REQUEST_TITLE:" ?",UNIVERSAL_PROXY_BLOCKED:" -       ",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"         -.",UNIVERSAL_PROXY_REQUEST_TITLE:"  ?"},sk:{ALLOW:"Povoli",CALLING_ACCEPT:"Prija",CALLING_CAMERA_OFF:"Kamera je vypnut",CALLING_CAMERA_PERMISSION_DENIED:"Prstup ku kamere odmietnut. Povoli ho v nastaveniach prehliadaa.",CALLING_CAMERA_PERMISSION_PROMPT:"Povoli prstup ku kamere",CALLING_CAMERA_STARTING:"Kamera sa spa",CALLING_CANCEL:"Zrui",CALLING_DISABLE_AUDIO:"Vypn zvuk",CALLING_DISABLE_VIDEO:"Zakza video",CALLING_ENABLE_AUDIO:"Povoli zvuk",CALLING_ENABLE_VIDEO:"Povoli video",CALLING_END:"Ukoni hovor",CALLING_JOIN:"Pripoji sa k hovoru",CALLING_JOIN_PROMPT:"Podporn agent vs chce kontaktova telefonicky.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Ja",CALLING_MICROPHONE_PERMISSION_DENIED:"Prstup k mikrofnu zamietnut. Povoli ho v nastaveniach prehliadaa.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Povoli prstup k mikrofnu",CALLING_NO_DEVICES:"iadne",CALLING_PERMISSION_NEEDED:"Vyaduje sa povolenie",CALLING_REJECT:"Zamietnu hovor",CALLING_REJOIN_PROMPT:"Mte aktvne volanie s podpornm agentom. Chcete sa znova pripoji?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Agent",CALLING_REQUEST:"Vstpi do videohovoru?",CALLING_SAVE:"Uloi",CALLING_SELECT_CAMERA:"Vyberte kameru",CALLING_SELECT_MICROPHONE:"Vyberte mikrofn",CALLING_SELECT_SPEAKER:"Vybra reproduktora",CALLING_SHOW_CALL_SETTINGS:"Zobrazi nastavenia hovoru",DENY:"Odmietnu",END_SESSION:"Zastavi zdieanie",FULL_DEVICE_REQUEST_DESCRIPTION:"Podporn agent si el zobrazi cel vau obrazovku.",FULL_DEVICE_REQUEST_TITLE:"Povoli pln snmanie obrazovky?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Podporn agent by chcel ovlda tto strnku.",REMOTE_CONTROL_REQUEST_TITLE:"Povoli vzdialen sprvu?",SESSION_REQUEST_DESCRIPTION:"Podporn agent by chcel doasne pouva tto webov strnku spolu s vami.",SESSION_REQUEST_TITLE:"Povoli spolusurfovanie?",UNIVERSAL_PROXY_BLOCKED:"Tto webov strnku nie je mon zobrazi so servisnm agentom",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Podporn agent by vs rd sledoval na alie webov strnky.",UNIVERSAL_PROXY_REQUEST_TITLE:"Povoli pokraovanie relcie?"},sl:{ALLOW:"Dovoli",CALLING_ACCEPT:"Sprejmi",CALLING_CAMERA_OFF:"Kamera je izklopljena",CALLING_CAMERA_PERMISSION_DENIED:"Dostop do kamere zavrnjen. Omogoite ga v nastavitvah brskalnika.",CALLING_CAMERA_PERMISSION_PROMPT:"Dovoli dostop do kamere",CALLING_CAMERA_STARTING:"Kamera se zaenja",CALLING_CANCEL:"Preklii",CALLING_DISABLE_AUDIO:"Onemogoi zvok",CALLING_DISABLE_VIDEO:"Onemogoi video",CALLING_ENABLE_AUDIO:"Omogoi zvok",CALLING_ENABLE_VIDEO:"Omogoi video",CALLING_END:"Konaj klic",CALLING_JOIN:"Pridrui se klicu",CALLING_JOIN_PROMPT:"Podporni agent vas eli poklicati.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Jaz",CALLING_MICROPHONE_PERMISSION_DENIED:"Dostop do mikrofona zavrnjen. Omogoite ga v nastavitvah brskalnika.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Dovoli dostop do mikrofona",CALLING_NO_DEVICES:"Noben",CALLING_PERMISSION_NEEDED:"Potrebna dovoljenja",CALLING_REJECT:"Zavrni klic",CALLING_REJOIN_PROMPT:"Imate aktivni klic s podporo. elite ponovno pristopiti?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Agent",CALLING_REQUEST:"elite vstopiti v video klic?",CALLING_SAVE:"Shrani",CALLING_SELECT_CAMERA:"Izberite kamero",CALLING_SELECT_MICROPHONE:"Izberite mikrofon",CALLING_SELECT_SPEAKER:"Izberite zvonika",CALLING_SHOW_CALL_SETTINGS:"Prikai nastavitve klica",DENY:"Zanikati",END_SESSION:"Konaj sejo Cobrowse",FULL_DEVICE_REQUEST_DESCRIPTION:"Agent za podporo si eli ogledati va celoten zaslon.",FULL_DEVICE_REQUEST_TITLE:"Dovoliti zajemanje celotnega zaslona?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Podporni agent eli nadzorovati to stran.",REMOTE_CONTROL_REQUEST_TITLE:"Dovoliti daljinsko upravljanje?",SESSION_REQUEST_DESCRIPTION:"Agent za podporo eli zaasno uporabljati to spletno stran z vami.",SESSION_REQUEST_TITLE:"Dovoliti cobrowsing?",UNIVERSAL_PROXY_BLOCKED:"Ta spletna stran se ne more ogledovati z agentom za podporo",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Agent za podporo vas eli slediti na druge spletne strani.",UNIVERSAL_PROXY_REQUEST_TITLE:"Dovoliti nadaljevanje seje?"},sv:{ALLOW:"Tillt",CALLING_ACCEPT:"Acceptera",CALLING_CAMERA_OFF:"Kameran r avstngd",CALLING_CAMERA_PERMISSION_DENIED:"Kameratillgng nekad. Aktivera den i dina webblsarinstllningar.",CALLING_CAMERA_PERMISSION_PROMPT:"Tillt tkomst till kamera",CALLING_CAMERA_STARTING:"Kameran startar",CALLING_CANCEL:"Avbryt",CALLING_DISABLE_AUDIO:"Inaktivera ljud",CALLING_DISABLE_VIDEO:"Inaktivera video",CALLING_ENABLE_AUDIO:"Aktivera ljud",CALLING_ENABLE_VIDEO:"Aktivera video",CALLING_END:"Avsluta samtal",CALLING_JOIN:"G med i samtal",CALLING_JOIN_PROMPT:"En supportagent vill ringa dig.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Jag",CALLING_MICROPHONE_PERMISSION_DENIED:"Mikrofontillgng nekad. Aktivera den i din webblsarinstllningar.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Tillt tkomst till mikrofonen",CALLING_NO_DEVICES:"Ingen",CALLING_PERMISSION_NEEDED:"Behrighet krvs",CALLING_REJECT:"Avvisa samtal",CALLING_REJOIN_PROMPT:"Du har ett aktivt samtal med en supportagent. Vill du ansluta igen?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"Agent",CALLING_REQUEST:"Starta videosamtal?",CALLING_SAVE:"Spara",CALLING_SELECT_CAMERA:"Vlj kamera",CALLING_SELECT_MICROPHONE:"Vlj mikrofon",CALLING_SELECT_SPEAKER:"Vlj talare",CALLING_SHOW_CALL_SETTINGS:"Visa samtalsinstllningar",DENY:"Neka",END_SESSION:"Sluta dela",FULL_DEVICE_REQUEST_DESCRIPTION:"En supportagent vill se hela din skrm.",FULL_DEVICE_REQUEST_TITLE:"Tillt fullskrmsinspelning?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"En supportagent vill kontrollera denna sida.",REMOTE_CONTROL_REQUEST_TITLE:"Tillt fjrrstyrning?",SESSION_REQUEST_DESCRIPTION:"En supportagent vill tillflligt anvnda denna webbsida tillsammans med dig.",SESSION_REQUEST_TITLE:"Tillt samvisning?",UNIVERSAL_PROXY_BLOCKED:"Den hr webbsidan kan inte visas tillsammans med en supportagent",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"En supportagent vill flja dig till andra webbsidor.",UNIVERSAL_PROXY_REQUEST_TITLE:"Tillt sessionens fortsttning?"},th:{ALLOW:"",CALLING_ACCEPT:"",CALLING_CAMERA_OFF:"",CALLING_CAMERA_PERMISSION_DENIED:" ",CALLING_CAMERA_PERMISSION_PROMPT:"",CALLING_CAMERA_STARTING:"",CALLING_CANCEL:"",CALLING_DISABLE_AUDIO:"",CALLING_DISABLE_VIDEO:"",CALLING_ENABLE_AUDIO:"",CALLING_ENABLE_VIDEO:"",CALLING_END:"",CALLING_JOIN:"",CALLING_JOIN_PROMPT:"",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"",CALLING_MICROPHONE_PERMISSION_DENIED:" ",CALLING_MICROPHONE_PERMISSION_PROMPT:"",CALLING_NO_DEVICES:"",CALLING_PERMISSION_NEEDED:"",CALLING_REJECT:"",CALLING_REJOIN_PROMPT:" ?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"",CALLING_REQUEST:"?",CALLING_SAVE:"",CALLING_SELECT_CAMERA:"",CALLING_SELECT_MICROPHONE:"",CALLING_SELECT_SPEAKER:"",CALLING_SHOW_CALL_SETTINGS:"",DENY:"",END_SESSION:"",FULL_DEVICE_REQUEST_DESCRIPTION:"",FULL_DEVICE_REQUEST_TITLE:"?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"",REMOTE_CONTROL_REQUEST_TITLE:"?",SESSION_REQUEST_DESCRIPTION:"",SESSION_REQUEST_TITLE:"?",UNIVERSAL_PROXY_BLOCKED:"",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:" ",UNIVERSAL_PROXY_REQUEST_TITLE:"?"},"th-TH":{ALLOW:"",CALLING_ACCEPT:"",CALLING_CAMERA_OFF:"",CALLING_CAMERA_PERMISSION_DENIED:" ",CALLING_CAMERA_PERMISSION_PROMPT:"",CALLING_CAMERA_STARTING:"",CALLING_CANCEL:"",CALLING_DISABLE_AUDIO:"",CALLING_DISABLE_VIDEO:"",CALLING_ENABLE_AUDIO:"",CALLING_ENABLE_VIDEO:"",CALLING_END:"",CALLING_JOIN:"",CALLING_JOIN_PROMPT:"",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"",CALLING_MICROPHONE_PERMISSION_DENIED:" ",CALLING_MICROPHONE_PERMISSION_PROMPT:"",CALLING_NO_DEVICES:"",CALLING_PERMISSION_NEEDED:"",CALLING_REJECT:"",CALLING_REJOIN_PROMPT:" ?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"",CALLING_REQUEST:"?",CALLING_SAVE:"",CALLING_SELECT_CAMERA:"",CALLING_SELECT_MICROPHONE:"",CALLING_SELECT_SPEAKER:"",CALLING_SHOW_CALL_SETTINGS:"",DENY:"",END_SESSION:"",FULL_DEVICE_REQUEST_DESCRIPTION:"",FULL_DEVICE_REQUEST_TITLE:"?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"",REMOTE_CONTROL_REQUEST_TITLE:"?",SESSION_REQUEST_DESCRIPTION:"",SESSION_REQUEST_TITLE:"?",UNIVERSAL_PROXY_BLOCKED:"",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:" ",UNIVERSAL_PROXY_REQUEST_TITLE:"?"},uk:{ALLOW:"",CALLING_ACCEPT:"",CALLING_CAMERA_OFF:" ",CALLING_CAMERA_PERMISSION_DENIED:"   .     .",CALLING_CAMERA_PERMISSION_PROMPT:"   ",CALLING_CAMERA_STARTING:" ",CALLING_CANCEL:"",CALLING_DISABLE_AUDIO:" ",CALLING_DISABLE_VIDEO:" ",CALLING_ENABLE_AUDIO:" ",CALLING_ENABLE_VIDEO:" ",CALLING_END:" ",CALLING_JOIN:"  ",CALLING_JOIN_PROMPT:"    .",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"",CALLING_MICROPHONE_PERMISSION_DENIED:"   .     .",CALLING_MICROPHONE_PERMISSION_PROMPT:"   ",CALLING_NO_DEVICES:"",CALLING_PERMISSION_NEEDED:" ",CALLING_REJECT:" ",CALLING_REJOIN_PROMPT:"      .   ?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"",CALLING_REQUEST:" ?",CALLING_SAVE:"",CALLING_SELECT_CAMERA:" ",CALLING_SELECT_MICROPHONE:" ",CALLING_SELECT_SPEAKER:" ",CALLING_SHOW_CALL_SETTINGS:"  ",DENY:"",END_SESSION:"  Cobrowse",FULL_DEVICE_REQUEST_DESCRIPTION:"       .",FULL_DEVICE_REQUEST_TITLE:"   ?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"      .",REMOTE_CONTROL_REQUEST_TITLE:"  ?",SESSION_REQUEST_DESCRIPTION:"        -   .",SESSION_REQUEST_TITLE:" ?",UNIVERSAL_PROXY_BLOCKED:" -       ",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"         -.",UNIVERSAL_PROXY_REQUEST_TITLE:"  ?"},vi:{ALLOW:"Cho php",CALLING_ACCEPT:"Chp nhn",CALLING_CAMERA_OFF:"Camera  tt",CALLING_CAMERA_PERMISSION_DENIED:"Truy cp camera b t chi. Hy bt n trong ci t trnh duyt ca bn.",CALLING_CAMERA_PERMISSION_PROMPT:"Cho php truy cp camera",CALLING_CAMERA_STARTING:"My nh ang khi ng",CALLING_CANCEL:"Hy b",CALLING_DISABLE_AUDIO:"Tt m thanh",CALLING_DISABLE_VIDEO:"V hiu ha video",CALLING_ENABLE_AUDIO:"Bt m thanh",CALLING_ENABLE_VIDEO:"Bt video",CALLING_END:"Kt thc cuc gi",CALLING_JOIN:"Tham gia cuc gi",CALLING_JOIN_PROMPT:"Mt nhn vin h tr mun gi cho bn.",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"Ti",CALLING_MICROPHONE_PERMISSION_DENIED:"Quyn truy cp micro b t chi. Vui lng bt trong ci t trnh duyt ca bn.",CALLING_MICROPHONE_PERMISSION_PROMPT:"Cho php truy cp micro",CALLING_NO_DEVICES:"Khng c g",CALLING_PERMISSION_NEEDED:"Cn quyn truy cp",CALLING_REJECT:"T chi cuc gi",CALLING_REJOIN_PROMPT:"Bn ang c mt cuc gi ang hot ng vi nhn vin h tr. Bn c mun tham gia li khng?",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"i l",CALLING_REQUEST:"Tham gia gi video?",CALLING_SAVE:"Lu",CALLING_SELECT_CAMERA:"Chn camera",CALLING_SELECT_MICROPHONE:"Chn micro",CALLING_SELECT_SPEAKER:"Chn ngi ni",CALLING_SHOW_CALL_SETTINGS:"Hin th ci t cuc gi",DENY:"T chi",END_SESSION:"Kt thc phin Cobrowse",FULL_DEVICE_REQUEST_DESCRIPTION:"Mt tng i vin h tr mun xem ton b mn hnh ca bn.",FULL_DEVICE_REQUEST_TITLE:"Cho php chp ton b mn hnh?",REMOTE_CONTROL_REQUEST_DESCRIPTION:"Mt tng i vin h tr mun kim sot trang ny.",REMOTE_CONTROL_REQUEST_TITLE:"Cho php iu khin t xa?",SESSION_REQUEST_DESCRIPTION:"Mt tng i vin mun tm thi s dng trang web ny vi bn.",SESSION_REQUEST_TITLE:"Cho php cobrowsing?",UNIVERSAL_PROXY_BLOCKED:"Trang web ny khng th c xem cng vi mt tng i vin h tr",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"Mt tng i vin h tr mun theo di bn n cc trang web khc.",UNIVERSAL_PROXY_REQUEST_TITLE:"Cho php tip tc phin?"},zh:{ALLOW:"",CALLING_ACCEPT:"",CALLING_CAMERA_OFF:"",CALLING_CAMERA_PERMISSION_DENIED:"",CALLING_CAMERA_PERMISSION_PROMPT:"",CALLING_CAMERA_STARTING:"",CALLING_CANCEL:"",CALLING_DISABLE_AUDIO:"",CALLING_DISABLE_VIDEO:"",CALLING_ENABLE_AUDIO:"",CALLING_ENABLE_VIDEO:"",CALLING_END:"",CALLING_JOIN:"",CALLING_JOIN_PROMPT:"",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"",CALLING_MICROPHONE_PERMISSION_DENIED:"",CALLING_MICROPHONE_PERMISSION_PROMPT:"",CALLING_NO_DEVICES:"",CALLING_PERMISSION_NEEDED:"",CALLING_REJECT:"",CALLING_REJOIN_PROMPT:"",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"",CALLING_REQUEST:"",CALLING_SAVE:"",CALLING_SELECT_CAMERA:"",CALLING_SELECT_MICROPHONE:"",CALLING_SELECT_SPEAKER:"",CALLING_SHOW_CALL_SETTINGS:"",DENY:"",END_SESSION:"",FULL_DEVICE_REQUEST_DESCRIPTION:"",FULL_DEVICE_REQUEST_TITLE:"",REMOTE_CONTROL_REQUEST_DESCRIPTION:"",REMOTE_CONTROL_REQUEST_TITLE:"",SESSION_REQUEST_DESCRIPTION:"",SESSION_REQUEST_TITLE:"",UNIVERSAL_PROXY_BLOCKED:"",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"",UNIVERSAL_PROXY_REQUEST_TITLE:""},"zh-Hant":{ALLOW:"",CALLING_ACCEPT:"",CALLING_CAMERA_OFF:"",CALLING_CAMERA_PERMISSION_DENIED:"",CALLING_CAMERA_PERMISSION_PROMPT:"",CALLING_CAMERA_STARTING:"",CALLING_CANCEL:"",CALLING_DISABLE_AUDIO:"",CALLING_DISABLE_VIDEO:"",CALLING_ENABLE_AUDIO:"",CALLING_ENABLE_VIDEO:"",CALLING_END:"",CALLING_JOIN:"",CALLING_JOIN_PROMPT:"",CALLING_LOCAL_PARTICIPANT_DESCRIPTION:"",CALLING_MICROPHONE_PERMISSION_DENIED:"",CALLING_MICROPHONE_PERMISSION_PROMPT:"",CALLING_NO_DEVICES:"",CALLING_PERMISSION_NEEDED:"",CALLING_REJECT:"",CALLING_REJOIN_PROMPT:"",CALLING_REMOTE_PARTICIPANT_DESCRIPTION:"",CALLING_REQUEST:"",CALLING_SAVE:"",CALLING_SELECT_CAMERA:"",CALLING_SELECT_MICROPHONE:"",CALLING_SELECT_SPEAKER:"",CALLING_SHOW_CALL_SETTINGS:"",DENY:"",END_SESSION:"",FULL_DEVICE_REQUEST_DESCRIPTION:"",FULL_DEVICE_REQUEST_TITLE:"",REMOTE_CONTROL_REQUEST_DESCRIPTION:"",REMOTE_CONTROL_REQUEST_TITLE:"",SESSION_REQUEST_DESCRIPTION:"",SESSION_REQUEST_TITLE:"",UNIVERSAL_PROXY_BLOCKED:"",UNIVERSAL_PROXY_REQUEST_DESCRIPTION:"",UNIVERSAL_PROXY_REQUEST_TITLE:""}},lr=["ar","he","fa","ur"];class cr{static getLocale(){for(const e of navigator.languages){if(rr[e])return new cr(e);if(e.includes("-")){const t=e.split("-")[0].toLowerCase();if(rr[t])return new cr(t)}}return new cr("en")}static tr(e){return this.getLocale().translate(e)}static direction(){return this.getLocale().direction}constructor(e){this.language=e,this.direction=lr.includes(e)?"rtl":"ltr"}translate(e){return rr[this.language][e]||rr.en[e]||e}}const dr={base:"Button-module__base___gx4CL",primary:"Button-module__primary___TUjdp",secondary:"Button-module__secondary___CJVQq"},hr=["children","className","variant"],ur=e=>{let{children:t,className:i,variant:s}=e,n=q(e,hr);return v(S,{children:v("button",$($({className:x(dr.base,dr[s],i)},n),{},{children:t}))})},Er=({children:e,style:t,corner:i="top-left",onCornerChange:s})=>{const[n,o]=C({x:0,y:0}),[a,r]=C(!1),[l,c]=C(!1),d=I(n),h=I(null),u=I({x:0,y:0}),E=I(null),_=I(i);m(()=>{d.current=n},[n]),m(()=>{var e,t;if(!h.current)return;const s=(null===(e=window.visualViewport)||void 0===e?void 0:e.width)||window.innerWidth,n=(null===(t=window.visualViewport)||void 0===t?void 0:t.height)||window.innerHeight,{offsetWidth:a,offsetHeight:r}=h.current,l={"top-left":{x:0,y:0,dx:0,dy:0},"top-right":{x:s-a,y:0,dx:1,dy:0},"bottom-left":{x:0,y:n-r,dx:0,dy:1},"bottom-right":{x:s-a,y:n-r,dx:1,dy:1}},{x:c,y:d,dx:u,dy:p}=l[i];o({x:c,y:d}),E.current={dx:u,dy:p},_.current=i},[i]);const p=(e,t)=>{r(!0),c(!1),u.current={x:e-n.x,y:t-n.y}};m(()=>{const e=e=>{var t,i;if(!a)return;const s=(null===(t=window.visualViewport)||void 0===t?void 0:t.width)||window.innerWidth,n=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||window.innerHeight;let r=e.clientX-u.current.x,l=e.clientY-u.current.y;if(h.current){const{offsetWidth:e,offsetHeight:t}=h.current;r=Math.max(0,Math.min(r,s-e)),l=Math.max(0,Math.min(l,n-t))}o({x:r,y:l}),d.current={x:r,y:l}},t=e=>{var t,i;if(!a)return;e.preventDefault();const s=e.touches[0];if(!s)return;const n=(null===(t=window.visualViewport)||void 0===t?void 0:t.width)||window.innerWidth,r=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||window.innerHeight;let l=s.clientX-u.current.x,c=s.clientY-u.current.y;if(h.current){const{offsetWidth:e,offsetHeight:t}=h.current;l=Math.max(0,Math.min(l,n-e)),c=Math.max(0,Math.min(c,r-t))}o({x:l,y:c}),d.current={x:l,y:c}},i=()=>{r(!1),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",i),window.removeEventListener("touchmove",t),window.removeEventListener("touchend",i),setTimeout(g,0)};return a&&(window.addEventListener("mousemove",e),window.addEventListener("mouseup",i),window.addEventListener("touchmove",t,{passive:!1}),window.addEventListener("touchend",i)),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",i),window.removeEventListener("touchmove",t),window.removeEventListener("touchend",i)}},[a]);const N=L(()=>{var e,t;if(!h.current||!E.current)return;const i=(null===(e=window.visualViewport)||void 0===e?void 0:e.width)||window.innerWidth,s=(null===(t=window.visualViewport)||void 0===t?void 0:t.height)||window.innerHeight,{offsetWidth:n,offsetHeight:a}=h.current,{dx:r,dy:l}=E.current;o({x:0===r?0:i-n,y:0===l?0:s-a})},[]);m(()=>(window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)),[N]),m(()=>{const e=new ResizeObserver(()=>{c(!0),N(),setTimeout(()=>c(!1),300)});return h.current&&e.observe(h.current),()=>e.disconnect()},[N]);const g=()=>{var e,t;if(!h.current)return;const i=(null===(e=window.visualViewport)||void 0===e?void 0:e.width)||window.innerWidth,n=(null===(t=window.visualViewport)||void 0===t?void 0:t.height)||window.innerHeight,{offsetWidth:a,offsetHeight:r}=h.current,l=[{name:"top-left",x:0,y:0,dx:0,dy:0},{name:"top-right",x:i-a,y:0,dx:1,dy:0},{name:"bottom-left",x:0,y:n-r,dx:0,dy:1},{name:"bottom-right",x:i-a,y:n-r,dx:1,dy:1}],u=d.current,p=(e,t)=>Math.hypot(e.x-t.x,e.y-t.y),I=l.reduce((e,t)=>p(u,t)<p(u,e)?t:e);c(!0),o({x:I.x,y:I.y}),E.current={dx:I.dx,dy:I.dy},_.current!==I.name&&(null==s||s(I.name),_.current=I.name),setTimeout(()=>c(!1),300)};return v("div",{ref:h,style:$($({},t),{},{position:"fixed",left:n.x,top:n.y,cursor:a?"grabbing":"grab",transition:l?"left 0.3s ease, top 0.3s ease, transform 0.2s ease":"transform 0.2s ease",transform:a?"scale(1.02)":"scale(1)"}),onMouseDown:e=>{e.preventDefault(),p(e.clientX,e.clientY)},onTouchStart:e=>{const t=e.touches[0];t&&p(t.clientX,t.clientY)},children:e})},_r=A("svg",{xmlns:"http://www.w3.org/2000/svg",height:"100%",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[v("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]}),pr=v("svg",{height:"100%",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:v("path",{d:"M21.5 12V15C21.5 15.2652 21.3946 15.5196 21.2071 15.7071C21.0196 15.8946 20.7652 16 20.5 16H4.5C4.23478 16 3.98043 15.8946 3.79289 15.7071C3.60536 15.5196 3.5 15.2652 3.5 15L3.5 5C3.5 4.73478 3.60536 4.48043 3.79289 4.29289C3.98043 4.10536 4.23478 4 4.5 4L13.5 4M7.5 20H17.5M9.5 16V20M15.5 16V20M17.5 8L21.5 4M17.5 4L21.5 8",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})}),Ir=A("svg",{xmlns:"http://www.w3.org/2000/svg",height:"100%",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[v("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v("path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"}),v("path",{d:"M5 10a7 7 0 0 0 14 0"}),v("path",{d:"M8 21l8 0"}),v("path",{d:"M12 17l0 4"})]}),Lr=A("svg",{xmlns:"http://www.w3.org/2000/svg",height:"100%",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[v("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v("path",{d:"M3 3l18 18"}),v("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),v("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85"}),v("path",{d:"M8 21l8 0"}),v("path",{d:"M12 17l0 4"})]}),mr=v("svg",{height:"100%",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:v("path",{d:"M23.1068 13.9142L20.2784 16.7426L15.3286 14.6213L16.0357 11.7929C13.7429 11.0147 11.2574 11.0147 8.96465 11.7929L9.67175 14.6213L4.72201 16.7426L1.89358 13.9142C1.51851 13.5391 1.30779 13.0304 1.30779 12.5C1.30779 11.9696 1.51851 11.4609 1.89358 11.0858C4.81944 8.49517 8.59225 7.06493 12.5002 7.06493C16.4081 7.06493 20.1809 8.49517 23.1068 11.0858C23.4819 11.4609 23.6926 11.9696 23.6926 12.5C23.6926 13.0304 23.4819 13.5391 23.1068 13.9142Z",stroke:"#F5F6FB","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})}),Cr=A("svg",{xmlns:"http://www.w3.org/2000/svg",height:"100%",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[v("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v("path",{d:"M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z"}),v("path",{d:"M3 6m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"})]}),Nr=A("svg",{xmlns:"http://www.w3.org/2000/svg",height:"100%",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[v("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v("path",{d:"M3 3l18 18"}),v("path",{d:"M15 11v-1l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -.675 .946"}),v("path",{d:"M10 6h3a2 2 0 0 1 2 2v3m0 4v1a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2v-8a2 2 0 0 1 2 -2h1"})]}),gr=A("svg",{xmlns:"http://www.w3.org/2000/svg",height:"100%",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[v("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v("path",{d:"M15 8a5 5 0 0 1 0 8"}),v("path",{d:"M17.7 5a9 9 0 0 1 0 14"}),v("path",{d:"M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5"})]}),wr=Object.freeze({__proto__:null,DotsVertical:_r,EndSession:pr,Microphone:Ir,MicrophoneOff:Lr,Phone:mr,Video:Cr,VideoOff:Nr,Volume:gr}),vr=["name"],Ar=e=>{let{name:t}=e,i=q(e,vr);return v("div",$($({"aria-hidden":"true",style:{display:"inline-block"}},i),{},{children:wr[t]}))},Sr=["children","className","ariaLabel","title"],fr=e=>{let{children:t,className:i,ariaLabel:s,title:n}=e,o=q(e,Sr);return v("button",$($({className:x("IconButton-module__base___Cg18y",i),"aria-label":s,title:null!=s?s:n},o),{},{children:t}))},Tr=["children","className"],Or=e=>{let{children:t,className:i}=e,s=q(e,Tr);return v("div",$($({className:"Modal-module__container___ZH7Ev",role:"dialog","aria-modal":"true"},s),{},{children:v("section",{className:x("Modal-module__content___I-t2M",i),dir:cr.direction(),children:t})}))},Rr="data:image/svg+xml,%3Csvg%20xmlns%3D%5Cihttp%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%5Ci%20width%3D%5Ci24%5Ci%20height%3D%5Ci24%5Ci%20viewBox%3D%5Ci0%200%2024%2024%5Ci%20fill%3D%5Cinone%5Ci%20stroke%3D%5CicurrentColor%5Ci%20stroke-width%3D%5Ci2%5Ci%20stroke-linecap%3D%5Ciround%5Ci%20stroke-linejoin%3D%5Ciround%5Ci%3E%20%20%3Cpath%20stroke%3D%5Cinone%5Ci%20d%3D%5CiM0%200h24v24H0z%5Ci%20fill%3D%5Cinone%5Ci%2F%3E%3Cpath%20d%3D%5CiM6%209l6%206l6%20-6%5Ci%20%2F%3E%3C%2Fsvg%3E",yr=["children","iconUrl","className","ariaLabel","style"],br=e=>{let{children:t,iconUrl:i,className:s,ariaLabel:n,style:o}=e,a=q(e,yr);const r=$($({},i?{backgroundImage:`url("${i}"),url("${Rr}")`,backgroundPosition:"left 4px center,right 4px center",padding:"8px 24px 8px 24px"}:{backgroundImage:`url("${Rr}")`}),o);return v("select",$($({className:x("Select-module__base___M3sny",!i&&"Select-module__noIcon___WDzeV",s),"aria-label":n,style:r},a),{},{children:t}))},Pr=["children"],Mr=e=>{let{children:t}=e,i=q(e,Pr);return v("option",$($({},i),{},{children:t}))},kr="SessionStateOverlay-module__callingControlsToggle___nwNMK",Dr="SessionStateOverlay-module__callingControlsToggleOff___eQpYD",Gr="SessionStateOverlay-module__callingControlsToggleOn___O-zwI",Ur="SessionStateOverlay-module__callingControlsIcon___ZWYCZ",Wr=["showSessionControls","showCallingControls"],xr=({onClick:e})=>A(ur,{className:"SessionStateOverlay-module__endSessionButton___pO2E2",onClick:()=>e("session-end"),children:[cr.tr("END_SESSION"),v(Ar,{className:"SessionStateOverlay-module__endSessionIcon___rHBj2",name:"EndSession"})]}),Vr=({onClick:e,audioEnabled:t,videoEnabled:i})=>A("div",{className:"SessionStateOverlay-module__callingControlsContainer___tTF9Z",children:[A("div",{className:"SessionStateOverlay-module__callingControlsToggleContainer___yvybv",children:[v(fr,{className:x(kr,t?Gr:Dr),ariaLabel:t?cr.tr("CALLING_DISABLE_AUDIO"):cr.tr("CALLING_ENABLE_AUDIO"),onClick:()=>e("audio"),children:v(Ar,{name:t?"Microphone":"MicrophoneOff",className:Ur})}),v(fr,{className:x(kr,i?Gr:Dr),ariaLabel:i?cr.tr("CALLING_DISABLE_VIDEO"):cr.tr("CALLING_ENABLE_VIDEO"),onClick:()=>e("video"),children:v(Ar,{name:i?"Video":"VideoOff",className:Ur})}),v(fr,{className:x(kr,Gr),ariaLabel:cr.tr("CALLING_SHOW_CALL_SETTINGS"),onClick:()=>e("settings"),children:v(Ar,{name:"DotsVertical",className:Ur})})]}),v(fr,{className:"SessionStateOverlay-module__callingControlsEnd___1lW-O",ariaLabel:cr.tr("CALLING_END"),onClick:()=>e("call-end"),children:v(Ar,{name:"Phone",className:Ur})})]}),zr=e=>{let{showSessionControls:t,showCallingControls:i}=e,s=q(e,Wr);return A("div",{className:"SessionStateOverlay-module__sessionStateOverlay___vT0jC",children:[t?v(xr,$({},s)):null,i?v(Vr,$({},s)):null]})};var Fr=new WeakMap,jr=new WeakMap,Br=new WeakMap;const Qr=new class extends c{constructor(...e){super(...e),Q(this,Fr,null),Q(this,jr,{showSessionControls:!1,showCallingControls:!1,onClick:e=>this.emit("click",e),audioEnabled:!1,videoEnabled:!1}),Q(this,Br,()=>{var e;return B(jr,this).showSessionControls||B(jr,this).showCallingControls?B(Fr,this)?B(Fr,this).rerender(B(jr,this)):void H(Fr,this,ti(zr,B(jr,this),{hideFromAgent:!0,useShadowRoot:!0})):(null===(e=B(Fr,this))||void 0===e||e.unmount(),void H(Fr,this,null))}),J(this,"showSessionControls",()=>{B(jr,this).showSessionControls=!0,B(Br,this).call(this)}),J(this,"hideSessionControls",()=>{B(jr,this).showSessionControls=!1,B(Br,this).call(this)}),J(this,"showCallingControls",({audioEnabled:e,videoEnabled:t})=>{B(jr,this).showCallingControls=!0,B(jr,this).audioEnabled=e,B(jr,this).videoEnabled=t,B(Br,this).call(this)}),J(this,"hideCallingControls",()=>{B(jr,this).showCallingControls=!1,B(Br,this).call(this)})}},Hr=({title:e,description:t,onDeny:i,onAllow:s})=>v(S,{children:A(Or,{className:"ConsentDialog-module__content___9Rp4u","aria-labelledby":"title","aria-describedby":"description",children:[v("header",{children:v("h2",{id:"title",className:"ConsentDialog-module__title___QVdGh",children:e})}),v("div",{className:"ConsentDialog-module__body___azYOk",children:v("p",{id:"description",className:"ConsentDialog-module__description___zucXq",children:t})}),A("footer",{className:"ConsentDialog-module__buttons___f9Tr6",children:[v(ur,{variant:"secondary",onClick:i,children:cr.tr("DENY")}),v(ur,{variant:"primary",onClick:s,children:cr.tr("ALLOW")})]})]})});var Yr=new WeakMap;class Xr{constructor(){Q(this,Yr,void 0),J(this,"show",async(e,t)=>{var i;return null===(i=B(Yr,this))||void 0===i||i.unmount(),new Promise(i=>{const s={title:e,description:t,onDeny:e=>{e.isTrusted&&(i(!1),this.hide())},onAllow:e=>{e.isTrusted&&(i(!0),this.hide())}};H(Yr,this,ti(Hr,s,{hideFromAgent:!0,useShadowRoot:!0}))})}),J(this,"hide",()=>{var e;null===(e=B(Yr,this))||void 0===e||e.unmount(),H(Yr,this,null)})}}var Jr=new WeakMap,Kr=new WeakMap,$r=new WeakMap,qr=new WeakMap,Zr=new WeakMap,el=new WeakMap;class tl extends d{constructor(e,t){if(super(),Q(this,Jr,void 0),Q(this,Kr,void 0),Q(this,$r,void 0),Q(this,qr,void 0),Q(this,Zr,void 0),Q(this,el,!1),!window.AudioContext)return;if(!e||!e.getAudioTracks().length)return;H(Jr,this,new window.AudioContext),H(Kr,this,B(Jr,this).createMediaStreamSource(e)),H($r,this,B(Jr,this).createAnalyser()),B($r,this).fftSize=256,B(Kr,this).connect(B($r,this));const i=()=>{if(B(el,this))return;const e=new Uint8Array(B($r,this).frequencyBinCount);B($r,this).getByteFrequencyData(e);const s=e.reduce((e,t)=>e+t,0)/B($r,this).frequencyBinCount>t;B(qr,this)!==s&&(H(qr,this,s),this.emit("noise.updated",s)),B(qr,this)?setTimeout(()=>{H(Zr,this,requestAnimationFrame(i))},250):H(Zr,this,requestAnimationFrame(i))};i()}get hasNoise(){return B(qr,this)||!1}destroy(){var e,t,i;H(el,this,!0),cancelAnimationFrame(B(Zr,this)),null===(e=B(Kr,this))||void 0===e||e.disconnect(),H(Kr,this,null),null===(t=B($r,this))||void 0===t||t.disconnect(),H($r,this,null),null===(i=B(Jr,this))||void 0===i||i.close(),H(Jr,this,null)}}const il="_cobrowse_participants_position",sl=e=>Le().setItem(il,e),nl=({mediaSettings:e,callSession:t})=>{const[i,s]=C(t.participants),[n,o]=C(e.settings.audioOutputDeviceId);m(()=>{const t=({audioOutputDeviceId:e})=>o(e);return e.on("audioOutputSettings.updated",t),()=>{e.off("audioOutputSettings.updated",t)}},[e]),m(()=>{const e=e=>s(new Map(e));return t.on("participants.added",e),t.on("participants.removed",e),()=>{t.off("participants.removed",e),t.off("participants.added",e)}},[t]);const a=N(()=>[...i.values()].sort((e,t)=>Number(t.isLocal)-Number(e.isLocal)),[i]);return v(Er,{style:{zIndex:"2147483646"},corner:Le().getItem(il)||"top-right",onCornerChange:sl,children:v("div",{className:"CallParticipants-module__container___Ve9rt",children:a.map(e=>v(ol,{participant:e,audioOutputDeviceId:n},e.id))})})},ol=({participant:e,audioOutputDeviceId:t})=>{const i=I(null),[s,n]=C(e.hasVideo),[o,a]=C(e.hasAudio),r=(e=>{const[t,i]=C(!1),s=I(null);return m(()=>{const t=e=>i(e),n=()=>{e.hasAudio&&!s.current&&(s.current=new tl(e.stream,15),s.current.on("noise.updated",t)),!e.hasAudio&&s.current&&(s.current.off("noise.updated",t),s.current.destroy(),s.current=null,i(!1))};return e.on("track.added",n),e.on("track.removed",n),n(),()=>{e.off("track.removed",n),e.off("track.added",n),s.current&&(s.current.off("noise.updated",t),s.current.destroy(),s.current=null)}},[e]),t})(e);return m(()=>{const t=()=>{n(e.hasVideo),a(e.hasAudio)};return e.on("track.added",t),e.on("track.removed",t),()=>{e.off("track.removed",t),e.off("track.added",t)}},[e]),m(()=>{i.current.srcObject=e.stream},[e]),m(()=>{o&&(async()=>{await i.current.setSinkId(t)})()},[t,o]),A("div",{className:x("CallParticipants-module__participantContainer___pxqEA",r&&"CallParticipants-module__participantSpeaking___Iv0HT"),children:[A("div",{className:"CallParticipants-module__videoContainer___tdKF2",children:[v("video",{className:"CallParticipants-module__video___HSfYq",ref:i,autoPlay:!0,playsInline:!0,muted:e.isLocal}),s?null:A("div",{className:"CallParticipants-module__videoOverlay___fhTe0",children:[v("span",{className:"cbio-sr-only",children:cr.tr("CALLING_CAMERA_OFF")}),v(Ar,{name:"VideoOff",className:"CallParticipants-module__videoOverlayIcon___foQCB"})]})]}),A("div",{className:"CallParticipants-module__statusContainer___bcsse",children:[v(Ar,{className:"CallParticipants-module__statusIcon___dNlQZ",name:o?"Microphone":"MicrophoneOff"}),v("span",{className:"CallParticipants-module__statusTitle___6iPYt",children:e.isLocal?cr.tr("CALLING_LOCAL_PARTICIPANT_DESCRIPTION"):cr.tr("CALLING_REMOTE_PARTICIPANT_DESCRIPTION")})]})]})},al=["audioEnabled","audioInputDeviceId"],rl=["audioOutputDeviceId"],ll=["videoEnabled","videoInputDeviceId"],cl={videoEnabled:!1,videoInputDeviceId:"default",audioEnabled:!1,audioInputDeviceId:"default",audioOutputDeviceId:"default"},dl={width:{ideal:1280},height:{ideal:720}},hl=({audioEnabled:e,audioInputDeviceId:t})=>{const i="default"===(t||"default")?"ideal":"exact";return{audio:!!e&&{deviceId:{[i]:t}}}},ul=({videoEnabled:e,videoInputDeviceId:t})=>{const i="default"===(t||"default")?"ideal":"exact";return{video:!!e&&$($({},dl),{},{deviceId:{[i]:t}})}};var El=new WeakMap,_l=new WeakMap;class pl extends c{constructor(e,t){super(),Q(this,El,null),Q(this,_l,void 0),H(El,this,$($({},cl),e)),H(_l,this,t)}get settings(){return $({},B(El,this))}update(e){var t;const i=[];for(const[t,s]of Object.entries(e))void 0!==s&&t in B(El,this)&&B(El,this)[t]!==s&&(B(El,this)[t]=s,i.push(t));0!==i.length&&(null===(t=B(_l,this))||void 0===t||t.call(this,B(El,this)),i.some(e=>ll.includes(e))&&this.emit("videoInputSettings.updated",this.settings),i.some(e=>al.includes(e))&&this.emit("audioInputSettings.updated",this.settings),i.some(e=>rl.includes(e))&&this.emit("audioOutputSettings.updated",this.settings))}toggleAudio(){this.update({audioEnabled:!B(El,this).audioEnabled})}toggleVideo(){this.update({videoEnabled:!B(El,this).videoEnabled})}}const Il="prompt",Ll=e=>({granted:"granted"===e,denied:"denied"===e,prompt:e===Il}),ml="MediaPreview-module__voiceVideoControlsToggle___k5XoS",Cl="MediaPreview-module__voiceVideoControlsToggleOff___2nclS",Nl="MediaPreview-module__voiceVideoControlsToggleOn___whg1G",gl="MediaPreview-module__voiceVideoControlsIcon___JYkty",wl="requested",vl="rejoining",Al="updating",Sl="default",fl=(e,t)=>e.some(e=>e.deviceId===t),Tl={[wl]:{title:cr.tr("CALLING_REQUEST"),description:cr.tr("CALLING_JOIN_PROMPT"),acceptTitle:cr.tr("CALLING_ACCEPT"),rejectTitle:cr.tr("CALLING_REJECT")},[vl]:{title:cr.tr("CALLING_REQUEST"),description:cr.tr("CALLING_REJOIN_PROMPT"),acceptTitle:cr.tr("CALLING_JOIN"),rejectTitle:cr.tr("CALLING_END")},[Al]:{title:null,description:null,acceptTitle:cr.tr("CALLING_SAVE"),rejectTitle:cr.tr("CALLING_CANCEL")}},Ol=({settings:e,status:t,accept:i,reject:s})=>{const n=I(null),o=I(new MediaStream),{audioInputDevices:a,audioOutputDevices:r,videoInputDevices:l,audioPermission:c,videoPermission:d,updateDeviceLists:h,updatePermissions:u}=(()=>{const[e,t]=C([]),[i,s]=C([]),[n,o]=C([]),[a,r]=C(Il),[l,c]=C(Il),d=N(()=>Ll(a),[a]),h=N(()=>Ll(l),[l]),u=I(null),E=I(null),_=L(async()=>{if(!navigator.mediaDevices)return;const e=await navigator.mediaDevices.enumerateDevices(),i=[],n=[],a=[];e.forEach(e=>{e.deviceId&&("audioinput"===e.kind&&i.push(e),"audiooutput"===e.kind&&n.push(e),"videoinput"===e.kind&&a.push(e))}),t(i),s(n),o(a)},[]),p=()=>r(u.current.state),g=()=>c(E.current.state),w=L(async()=>{try{var e,t;null===(e=u.current)||void 0===e||e.removeEventListener("change",p),u.current=await navigator.permissions.query({name:"microphone"}),u.current.addEventListener("change",p),null===(t=E.current)||void 0===t||t.removeEventListener("change",g),E.current=await navigator.permissions.query({name:"camera"}),E.current.addEventListener("change",g),r(u.current.state),c(E.current.state)}catch(e){console.warn("CobrowseIO: Failed to get permissions",e),r(Il),c(Il)}},[]);return m(()=>{w()},[w]),m(()=>{var e;return null===(e=navigator.mediaDevices)||void 0===e||e.addEventListener("devicechange",_),_(),()=>{var e;null===(e=navigator.mediaDevices)||void 0===e||e.removeEventListener("devicechange",_)}},[_]),m(()=>{_()},[a,l,_]),{audioInputDevices:e,audioOutputDevices:i,videoInputDevices:n,audioPermission:d,videoPermission:h,updateDeviceLists:_,updatePermissions:w}})(),[E,_]=C(!1),[p,g]=C(e.videoEnabled),[w,S]=C(e.videoInputDeviceId),[f,T]=C(e.audioEnabled),[O,R]=C(e.audioInputDeviceId),[y,b]=C(e.audioOutputDeviceId),P=L(e=>{o.current.getTracks().filter(t=>t.kind===e).forEach(e=>{e.stop(),o.current.removeTrack(e)})},[]);m(()=>{n.current&&(n.current.srcObject=o.current)},[]),m(()=>{if(!fl(a,O))return fl(a,Sl)?R(Sl):void(a.length&&R(a[0].deviceId))},[a,O]),m(()=>{if(!fl(r,y))return fl(r,Sl)?b(Sl):void(r.length&&b(r[0].deviceId))},[r,y]),m(()=>{if(!fl(l,w))return fl(l,Sl)?S(Sl):void(l.length&&S(l[0].deviceId))},[l,w]),m(()=>{if(!p)return;if(!navigator.mediaDevices)return console.warn("CobrowseIO: Failed to start video, mediaDevices is not available"),void g(!1);_(!0);const e=ul({videoEnabled:p,videoInputDeviceId:w});return navigator.mediaDevices.getUserMedia(e).then(e=>{e.getTracks().forEach(e=>o.current.addTrack(e)),h()}).catch(e=>{console.warn("CobrowseIO: Failed to get video",e),d.prompt&&g(!1)}).finally(()=>{u(),_(!1)}),()=>P("video")},[d,p,w,P]),m(()=>{if(!f)return;if(!navigator.mediaDevices)return console.warn("CobrowseIO: Failed to start audio, mediaDevices is not available"),void T(!1);const e=hl({audioEnabled:f,audioInputDeviceId:O});return navigator.mediaDevices.getUserMedia(e).then(e=>{e.getTracks().forEach(e=>o.current.addTrack(e)),h()}).catch(e=>{console.warn("CobrowseIO: Failed to get audio",e),c.prompt&&T(!1)}).finally(()=>{u()}),()=>P("audio")},[c,f,O,P]);const M=(e,t)=>v("div",{className:x("MediaPreview-module__videoOverlay___e7YkR",t?"MediaPreview-module__videoOverlayTransparent___qVogL":"MediaPreview-module__videoOverlaySolid___uy0ao"),children:v("p",{className:"MediaPreview-module__videoOverlayText___L-nXB",children:e})}),k=(e,t)=>e?t.length?t.map(e=>v(Mr,{value:e.deviceId,children:e.label},e.deviceId)):v(Mr,{value:"",disabled:!0,selected:!0,children:cr.tr("CALLING_NO_DEVICES")}):v(Mr,{value:"",disabled:!0,selected:!0,children:cr.tr("CALLING_PERMISSION_NEEDED")}),{title:D,description:G,acceptTitle:U,rejectTitle:W}=Tl[t];return A(Or,{className:"MediaPreview-module__content___kRPXQ","aria-labelledby":"title","aria-describedby":"description",children:[A("header",{className:"MediaPreview-module__header___9Bort",children:[A("section",{className:"MediaPreview-module__media___5QG1q",children:[A("div",{className:"MediaPreview-module__previewContainer___jg4yL",children:[A("div",{className:"MediaPreview-module__videoContainer___-OEXn",children:[v("video",{ref:n,className:"MediaPreview-module__video___0LBZO",autoPlay:!0,playsInline:!0,muted:!0}),(()=>{const e=p&&d.granted;if(f){if(c.denied)return M(cr.tr("CALLING_MICROPHONE_PERMISSION_DENIED"),e);if(c.prompt)return M(cr.tr("CALLING_MICROPHONE_PERMISSION_PROMPT"),e)}return p?d.denied?M(cr.tr("CALLING_CAMERA_PERMISSION_DENIED"),e):d.prompt?M(cr.tr("CALLING_CAMERA_PERMISSION_PROMPT"),e):E?M(cr.tr("CALLING_CAMERA_STARTING"),e):null:M(cr.tr("CALLING_CAMERA_OFF"),e)})()]}),v(Rl,{audioEnabled:f,toggleAudio:()=>T(e=>!e),videoEnabled:p,toggleVideo:()=>g(e=>!e)})]}),A("div",{className:"MediaPreview-module__deviceContainer___NlbuY",children:[v(br,{iconUrl:"data:image/svg+xml,%3Csvg%20xmlns%3D%5Cihttp%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%5Ci%20width%3D%5Ci24%5Ci%20height%3D%5Ci24%5Ci%20viewBox%3D%5Ci0%200%2024%2024%5Ci%20fill%3D%5Cinone%5Ci%20stroke%3D%5CicurrentColor%5Ci%20stroke-width%3D%5Ci2%5Ci%20stroke-linecap%3D%5Ciround%5Ci%20stroke-linejoin%3D%5Ciround%5Ci%3E%20%20%3Cpath%20stroke%3D%5Cinone%5Ci%20d%3D%5CiM0%200h24v24H0z%5Ci%20fill%3D%5Cinone%5Ci%20%2F%3E%3Cpath%20d%3D%5CiM9%202m0%203a3%203%200%200%201%203%20-3h0a3%203%200%200%201%203%203v5a3%203%200%200%201%20-3%203h0a3%203%200%200%201%20-3%20-3z%5Ci%20%2F%3E%3Cpath%20d%3D%5CiM5%2010a7%207%200%200%200%2014%200%5Ci%20%2F%3E%3Cpath%20d%3D%5CiM8%2021l8%200%5Ci%20%2F%3E%3Cpath%20d%3D%5CiM12%2017l0%204%5Ci%20%2F%3E%3C%2Fsvg%3E",ariaLabel:cr.tr("CALLING_SELECT_MICROPHONE"),value:c.granted&&a.length?O:"",onChange:e=>R(e.target.value),disabled:!c.granted||!a.length,children:k(c.granted,a)}),v(br,{iconUrl:"data:image/svg+xml,%20%20%3Csvg%20xmlns%3D%5Cihttp%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%5Ci%20width%3D%5Ci24%5Ci%20height%3D%5Ci24%5Ci%20viewBox%3D%5Ci0%200%2024%2024%5Ci%20fill%3D%5Cinone%5Ci%20stroke%3D%5CicurrentColor%5Ci%20stroke-width%3D%5Ci2%5Ci%20stroke-linecap%3D%5Ciround%5Ci%20stroke-linejoin%3D%5Ciround%5Ci%3E%3Cpath%20stroke%3D%5Cinone%5Ci%20d%3D%5CiM0%200h24v24H0z%5Ci%20fill%3D%5Cinone%5Ci%20%2F%3E%20%20%20%20%3Cpath%20d%3D%5CiM15%208a5%205%200%200%201%200%208%5Ci%20%2F%3E%3Cpath%20d%3D%5CiM17.7%205a9%209%200%200%201%200%2014%5Ci%20%2F%3E%3Cpath%20d%3D%5CiM6%2015h-2a1%201%200%200%201%20-1%20-1v-4a1%201%200%200%201%201%20-1h2l3.5%20-4.5a.8%20.8%200%200%201%201.5%20.5v14a.8%20.8%200%200%201%20-1.5%20.5l-3.5%20-4.5%5Ci%20%2F%3E%20%20%3C%2Fsvg%3E",ariaLabel:cr.tr("CALLING_SELECT_SPEAKER"),value:c.granted&&r.length?y:"",onChange:e=>b(e.target.value),disabled:!c.granted||!r.length,children:k(c.granted,r)}),v(br,{iconUrl:"data:image/svg+xml,%3Csvg%20xmlns%3D%5Cihttp%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%5Ci%20width%3D%5Ci24%5Ci%20height%3D%5Ci24%5Ci%20viewBox%3D%5Ci0%200%2024%2024%5Ci%20fill%3D%5Cinone%5Ci%20stroke%3D%5CicurrentColor%5Ci%20stroke-width%3D%5Ci2%5Ci%20stroke-linecap%3D%5Ciround%5Ci%20stroke-linejoin%3D%5Ciround%5Ci%3E%20%20%3Cpath%20stroke%3D%5Cinone%5Ci%20d%3D%5CiM0%200h24v24H0z%5Ci%20fill%3D%5Cinone%5Ci%20%2F%3E%3Cpath%20d%3D%5CiM15%2010l4.553%20-2.276a1%201%200%200%201%201.447%20.894v6.764a1%201%200%200%201%20-1.447%20.894l-4.553%20-2.276v-4z%5Ci%20%2F%3E%3Cpath%20d%3D%5CiM3%206m0%202a2%202%200%200%201%202%20-2h8a2%202%200%200%201%202%202v8a2%202%200%200%201%20-2%202h-8a2%202%200%200%201%20-2%20-2z%5Ci%20%2F%3E%3C%2Fsvg%3E",ariaLabel:cr.tr("CALLING_SELECT_CAMERA"),value:d.granted&&l.length?w:"",onChange:e=>S(e.target.value),disabled:!d.granted||!l.length,children:k(d.granted,l)})]})]}),D?v("h2",{id:"title",className:"MediaPreview-module__title___iQXs-",children:D}):null]}),G?v("div",{className:"MediaPreview-module__body___YbIAM",children:v("p",{id:"description",className:"MediaPreview-module__description___OB0uZ",children:G})}):null,A("footer",{className:"MediaPreview-module__buttonContainer___FiwSk",children:[v(ur,{variant:"secondary",onClick:()=>s(),children:W}),v(ur,{variant:"primary",onClick:()=>i({videoEnabled:p,videoInputDeviceId:w,audioEnabled:f,audioInputDeviceId:O,audioOutputDeviceId:y}),children:U})]})]})},Rl=({audioEnabled:e,toggleAudio:t,videoEnabled:i,toggleVideo:s})=>A("div",{className:"MediaPreview-module__voiceVideoControls___7f--Y",children:[v(fr,{onClick:t,ariaLabel:e?cr.tr("CALLING_DISABLE_AUDIO"):cr.tr("CALLING_ENABLE_AUDIO"),className:x(ml,e?Nl:Cl),children:v(Ar,{className:gl,name:e?"Microphone":"MicrophoneOff"})}),v(fr,{onClick:s,ariaLabel:i?cr.tr("CALLING_DISABLE_VIDEO"):cr.tr("CALLING_ENABLE_VIDEO"),className:x(ml,i?Nl:Cl),style:{marginLeft:"-4px"},children:v(Ar,{className:gl,name:i?"Video":"VideoOff"})})]}),yl="Mouse",bl="Touch",Pl="Pointer",Ml="Focus",kl="KeyPress",Dl="Scroll",Gl="Change",Ul="Input",Wl="Laser",xl="Highlight",Vl="Drawing",zl="Select";var Fl=new WeakMap,jl=new WeakMap,Bl=new WeakMap,Ql=new WeakMap,Hl=new WeakMap,Yl=new WeakMap;class Xl extends c{constructor(e,t,{interval:i}={interval:3e3}){super(),Q(this,Fl,void 0),Q(this,jl,void 0),Q(this,Bl,void 0),Q(this,Ql,void 0),Q(this,Hl,new Map),J(this,"ping",()=>{this.emit("ping",{id:B(Fl,this),instanceId:B(jl,this),timeout:2*B(Bl,this)})}),J(this,"track",({id:e,instanceId:t,timeout:i,agent:s})=>{if(this.id===e)return;const n=B(Hl,this).has(e);n||B(Hl,this).set(e,{instances:new Map,agent:s});const o=B(Hl,this).get(e),a=o.instances.get(t),r=setTimeout(()=>B(Yl,this).call(this,e,t),i||2*B(Bl,this));a&&clearTimeout(a.timeout),o.instances.set(t,{timestamp:new Date,timeout:r}),n||this.emit("join",{id:e,agent:s}),a||this.ping()}),Q(this,Yl,(e,t)=>{const i=B(Hl,this).get(e);i.instances.delete(t),0===i.instances.size&&(B(Hl,this).delete(e),this.emit("leave",e))}),J(this,"all",()=>Array.from(B(Hl,this)).map(([e,{agent:t}])=>({id:e,agent:t}))),J(this,"destroy",()=>{for(const e of B(Hl,this).values()){for(const t of e.instances.values())clearTimeout(t.timeout);e.instances.clear()}B(Hl,this).clear(),clearInterval(B(Ql,this)),this.removeAllListeners()}),H(Fl,this,e),H(jl,this,t),H(Bl,this,i),H(Ql,this,setInterval(this.ping,i))}get id(){return B(Fl,this)}}const Jl=_("cbio.Calling.Signalling"),Kl="sdp",$l="icecandidate";var ql=new WeakMap,Zl=new WeakMap,ec=new WeakMap,tc=new WeakMap,ic=new WeakMap,sc=new WeakMap;class nc extends d{constructor(e,t){super(),Q(this,ql,void 0),Q(this,Zl,void 0),Q(this,ec,new Map),J(this,"sendSDP",(e,t,i)=>{Jl("sending sdp with type",i.type,"to",t),B(ql,this).send(Kl,{from:e,to:t,sdp:JSON.stringify(i)})}),J(this,"sendCandidate",(e,t,i)=>{Jl("sending ice candidate","to",t),B(ql,this).send($l,{from:e,to:t,candidate:JSON.stringify(i)})}),J(this,"takeLastOffer",e=>{const t=B(ec,this).get(e);return B(ec,this).delete(e),t}),J(this,"flushLastOfferCache",()=>{B(ec,this).clear()}),Q(this,tc,(e,t)=>{e===Kl&&B(ic,this).call(this,t),e===$l&&B(sc,this).call(this,t)}),Q(this,ic,({from:e,to:t,sdp:i})=>{if(!B(Zl,this).call(this,t))return;const s=JSON.parse(i);Jl("receiving sdp with type",s.type,"from",e),"offer"===s.type&&B(ec,this).set(e.clientId,{from:e,to:t,sdp:s}),this.emit(Kl,e,t,s)}),Q(this,sc,({from:e,to:t,candidate:i})=>{B(Zl,this).call(this,t)&&(Jl("receiving ice candidate","from",e),this.emit($l,e,t,JSON.parse(i)))}),J(this,"destroy",()=>{B(ql,this).off("event",B(tc,this)),this.flushLastOfferCache()}),H(ql,this,e),H(Zl,this,t),B(ql,this).on("event",B(tc,this))}}const oc=_("cbio.Calling.PeerManager");var ac=new WeakMap,rc=new WeakMap,lc=new WeakMap,cc=new WeakMap,dc=new WeakMap,hc=new WeakMap,uc=new WeakMap,Ec=new WeakMap;class _c extends d{constructor(e,t){super(),Q(this,ac,void 0),Q(this,rc,void 0),Q(this,lc,new Map),J(this,"createPeer",async(e,t,i)=>{oc("creating peer",t);const s={clientId:e,connectionId:h()},n={clientId:t,connectionId:i?i.from.connectionId:null},o={connection:new RTCPeerConnection({iceServers:B(rc,this)}),makingOffer:!1,bePolite:[e,t].sort()[0]===e,iceCandidateQueue:[],localEndpoint:s,remoteEndpoint:n};o.connection.onnegotiationneeded=async()=>{oc("negotiation needed for peer",t),await this.connectToPeer(t)};const a=e=>{oc("removing track with kind",e.track.kind,"from peer",t),this.emit("track.removed",e.track,t)};o.connection.ontrack=e=>{oc("adding track with kind",e.track.kind,"from peer",t);const i=e.streams[0];i.removeEventListener("removetrack",a),i.addEventListener("removetrack",a),this.emit("track.added",e.track,t)},o.connection.onicecandidate=e=>{e.candidate&&B(ac,this).sendCandidate(s,n,e.candidate)},o.connection.oniceconnectionstatechange=()=>{"failed"===o.connection.iceConnectionState&&(oc("connection failed for peer",t,"restarting"),o.connection.restartIce())},o.connection.onconnectionstatechange=()=>{"connected"===o.connection.connectionState&&(oc("connected to peer",t),this.emit("peer.connected",t)),"disconnected"===o.connection.connectionState&&(oc("disconnected from peer",t),this.emit("peer.disconnected",t))},B(lc,this).set(t,o),i&&(oc("using last offer from peer",t),await B(hc,this).call(this,i.from,i.to,i.sdp)),this.emit("peer.created",t)}),J(this,"connectToPeer",async e=>{oc("connecting to peer",e);const t=B(lc,this).get(e);if(!t)return oc("unknown peer",e);const{localEndpoint:i,remoteEndpoint:s}=t;try{t.makingOffer=!0;const e=await t.connection.createOffer();await t.connection.setLocalDescription(e),B(ac,this).sendSDP(i,s,t.connection.localDescription)}finally{t.makingOffer=!1}}),J(this,"disconnectFromPeer",e=>{oc("disconnecting from peer",e);const t=B(lc,this).get(e);if(!t)return oc("unknown peer",e);t.connection.getSenders().forEach(e=>t.connection.removeTrack(e)),t.connection.close(),B(lc,this).delete(e)}),J(this,"removeTracksByKindFromRemotePeer",(e,t)=>{oc("removing tracks with kind",t,"from peer",e);const i=B(lc,this).get(e);if(!i)return oc("unknown peer",e);i.connection.getSenders().forEach(e=>{var s;(null===(s=e.track)||void 0===s?void 0:s.kind)===t&&i.connection.removeTrack(e)})}),J(this,"addStreamToRemotePeer",(e,t)=>{oc("adding stream to peer",e);const i=B(lc,this).get(e);if(!i)return oc("unknown peer",e);const s=i.connection.getSenders();t.getTracks().forEach(n=>{s.some(e=>{var t;return(null===(t=e.track)||void 0===t?void 0:t.id)===n.id})||(oc("adding track with kind",n.kind,"to peer",e),i.connection.addTrack(n,t))})}),Q(this,cc,async(e,t,i)=>{oc("reconnecting to",e,"using offer"),this.disconnectFromPeer(e.clientId),await this.createPeer(t.clientId,e.clientId,{from:e,to:t,sdp:i})}),Q(this,dc,(e,t,i)=>{"offer"===i.type&&(B(ac,this).takeLastOffer(e.clientId),B(hc,this).call(this,e,t,i)),"answer"===i.type&&B(uc,this).call(this,e,t,i)}),Q(this,hc,async(e,t,i)=>{oc("receiving offer from",e);const s=B(lc,this).get(e.clientId);if(!s)return oc("unknown peer",e.clientId);const{localEndpoint:n,remoteEndpoint:o}=s;if(n.connectionId!==t.connectionId&&t.connectionId)return oc("offer intended for different connection");if(o.connectionId||(o.connectionId=e.connectionId),o.connectionId!==e.connectionId)return oc("offer from",e,"has a different connection id"),await B(cc,this).call(this,e,t,i);const a=s.makingOffer||"stable"!==s.connection.signalingState;if(!s.bePolite&&a)return oc("offer ignored as the impolite peer");await s.connection.setRemoteDescription(i);const r=s.iceCandidateQueue.length;r>0&&(oc("adding ice candidates from queue",r),await Promise.allSettled(s.iceCandidateQueue.map(e=>s.connection.addIceCandidate(e))),s.iceCandidateQueue.length=0);const l=await s.connection.createAnswer();await s.connection.setLocalDescription(l),B(ac,this).sendSDP(n,o,s.connection.localDescription)}),Q(this,uc,async(e,t,i)=>{oc("receiving answer from",e);const s=B(lc,this).get(e.clientId);if(!s)return oc("unknown peer",e.clientId);const{localEndpoint:n,remoteEndpoint:o}=s;if(n.connectionId!==t.connectionId)return oc("answer intended for different connection");if(o.connectionId||(o.connectionId=e.connectionId),o.connectionId!==e.connectionId)return oc("answer from different connection ignored");await s.connection.setRemoteDescription(i);const a=s.iceCandidateQueue.length;a>0&&(oc("adding ice candidates from queue",a),await Promise.allSettled(s.iceCandidateQueue.map(e=>s.connection.addIceCandidate(e))),s.iceCandidateQueue.length=0)}),Q(this,Ec,async(e,t,i)=>{oc("receiving ice candidate from",e);const s=B(lc,this).get(e.clientId);if(!s)return oc("unknown peer",e.clientId);const{localEndpoint:n,remoteEndpoint:o}=s;return n.connectionId!==t.connectionId?oc("ice candidate intended for different connection"):o.connectionId!==e.connectionId?oc("ice candidate from different connection ignored"):void(s.connection.remoteDescription?await s.connection.addIceCandidate(i):s.iceCandidateQueue.push(i))}),J(this,"destroy",()=>{B(ac,this).off($l,B(Ec,this)),B(ac,this).off(Kl,B(dc,this)),B(lc,this).forEach((e,t)=>this.disconnectFromPeer(t)),B(lc,this).clear()}),H(ac,this,e),H(rc,this,t),B(ac,this).on(Kl,B(dc,this)),B(ac,this).on($l,B(Ec,this))}get remotePeerIds(){return[...B(lc,this).keys()]}}var pc=new WeakMap,Ic=new WeakMap,Lc=new WeakMap,mc=new WeakMap,Cc=new WeakMap,Nc=new WeakMap;class gc extends d{constructor(e,t,i=!1){super(),Q(this,pc,void 0),Q(this,Ic,void 0),Q(this,Lc,void 0),Q(this,mc,void 0),Q(this,Cc,void 0),J(this,"addTrack",e=>{B(Cc,this).getTrackById(e.id)||(B(Nc,this).call(this,e.kind),B(Cc,this).addTrack(e),this.emit("track.added"))}),J(this,"removeTrackById",e=>{const t=B(Cc,this).getTrackById(e);t&&(t.stop(),B(Cc,this).removeTrack(t),this.emit("track.removed"))}),J(this,"removeTracksByKind",e=>{B(Nc,this).call(this,e)&&this.emit("track.removed")}),Q(this,Nc,e=>{var t;const i=(null===(t=B(Cc,this))||void 0===t?void 0:t.getTracks().filter(t=>t.kind===e))||[];return i.forEach(e=>{e.stop(),B(Cc,this).removeTrack(e)}),i.length>0}),J(this,"destroy",()=>{var e;null===(e=B(Cc,this))||void 0===e||e.getTracks().forEach(e=>{e.stop(),B(Cc,this).removeTrack(e)}),H(Cc,this,null)}),H(pc,this,e),H(Ic,this,t),H(Lc,this,i),H(mc,this,i||!1),H(Cc,this,new MediaStream)}get id(){return B(pc,this)}get isAgent(){return!!B(Ic,this)}get isLocal(){return B(Lc,this)}get isConnected(){return B(mc,this)}set isConnected(e){B(Lc,this)||(H(mc,this,e),this.emit("connection.changed",B(mc,this)))}get stream(){return B(Cc,this)}get hasAudio(){var e;return(null===(e=B(Cc,this))||void 0===e?void 0:e.getAudioTracks().some(e=>"live"===e.readyState))||!1}get hasVideo(){var e;return(null===(e=B(Cc,this))||void 0===e?void 0:e.getVideoTracks().some(e=>"live"===e.readyState))||!1}}const wc=_("cbio.Calling.CallSession");var vc=new WeakMap,Ac=new WeakMap,Sc=new WeakMap,fc=new WeakMap,Tc=new WeakSet,Oc=new WeakMap,Rc=new WeakMap,yc=new WeakMap,bc=new WeakMap,Pc=new WeakMap,Mc=new WeakMap;class kc extends c{constructor(e,t,i,s){super(),X(this,Tc),Q(this,vc,void 0),Q(this,Ac,void 0),Q(this,Sc,void 0),Q(this,fc,new Map),J(this,"publishStreamTracks",e=>{e.getTracks().forEach(Y(Tc,this,Dc).addTrack),B(Sc,this).remotePeerIds.forEach(e=>{B(Sc,this).addStreamToRemotePeer(e,Y(Tc,this,Dc).stream)})}),J(this,"unpublishVideoTrack",()=>B(Oc,this).call(this,"video")),J(this,"unpublishAudioTrack",()=>B(Oc,this).call(this,"audio")),J(this,"addParticipant",async(e,t)=>{if(wc("adding participant",e),B(fc,this).has(e))return wc("participant already exists",e);B(fc,this).set(e,new gc(e,t));const i=B(Ac,this).takeLastOffer(e);await B(Sc,this).createPeer(B(vc,this),e,i),this.emit("participants.added",this.participants)}),J(this,"removeParticipant",e=>{wc("removing participant",e);const t=B(fc,this).get(e);if(!t)return wc("unknown participant",e);t.destroy(),B(fc,this).delete(e),B(Sc,this).disconnectFromPeer(e),this.emit("participants.removed",this.participants)}),J(this,"reconnectParticipant",async e=>{if(wc("reconnecting participant",e),!B(fc,this).get(e))return wc("unknown participant",e);B(Sc,this).disconnectFromPeer(e),await B(Sc,this).createPeer(B(vc,this),e)}),Q(this,Oc,e=>{Y(Tc,this,Dc).removeTracksByKind(e),B(Sc,this).remotePeerIds.forEach(t=>{B(Sc,this).removeTracksByKindFromRemotePeer(t,e)})}),Q(this,Rc,e=>{wc("peer created",e),Y(Tc,this,Dc).hasVideo||Y(Tc,this,Dc).hasAudio?B(Sc,this).addStreamToRemotePeer(e,Y(Tc,this,Dc).stream):B(Sc,this).connectToPeer(e)}),Q(this,yc,e=>{wc("peer connected",e);const t=B(fc,this).get(e);t&&(t.isConnected=!0)}),Q(this,bc,e=>{wc("peer disconnected",e);const t=B(fc,this).get(e);t&&(t.isConnected=!1)}),Q(this,Pc,(e,t)=>{wc("track added",t);const i=B(fc,this).get(t);i&&i.addTrack(e)}),Q(this,Mc,(e,t)=>{wc("track removed",t);const i=B(fc,this).get(t);i&&i.removeTrackById(e.id)}),J(this,"destroy",()=>{B(Sc,this).off("track.removed",B(Mc,this)),B(Sc,this).off("track.added",B(Pc,this)),B(Sc,this).off("peer.disconnected",B(bc,this)),B(Sc,this).off("peer.connected",B(yc,this)),B(Sc,this).off("peer.created",B(Rc,this)),B(fc,this).forEach(e=>e.destroy()),B(fc,this).clear(),B(Sc,this).destroy(),H(Sc,this,null),B(Ac,this).flushLastOfferCache()}),H(vc,this,e),B(fc,this).set(e,new gc(e,t,!0)),H(Ac,this,s),H(Sc,this,new _c(s,i)),B(Sc,this).on("peer.created",B(Rc,this)),B(Sc,this).on("peer.connected",B(yc,this)),B(Sc,this).on("peer.disconnected",B(bc,this)),B(Sc,this).on("track.added",B(Pc,this)),B(Sc,this).on("track.removed",B(Mc,this))}get participants(){return B(fc,this)}}function Dc(e){return B(fc,e).get(B(vc,e))}var Gc=new WeakMap;class Uc extends hs{constructor(e){super(),Q(this,Gc,void 0),H(Gc,this,e.id()),this.setHeader("X-CobrowseDeviceToken",e.getHeader("X-CobrowseDeviceToken"))}url(){return new URL(`api/1/sessions/${B(Gc,this)}/ice`,Uc.api).toString()}}const Wc="_cobrowse_media_settings";var xc=new WeakMap,Vc=new WeakMap,zc=new WeakMap,Fc=new WeakMap,jc=new WeakMap,Bc=new WeakMap,Qc=new WeakMap,Hc=new WeakMap,Yc=new WeakMap,Xc=new WeakMap,Jc=new WeakMap,Kc=new WeakMap,$c=new WeakMap,qc=new WeakMap,Zc=new WeakMap,ed=new WeakMap,td=new WeakMap,id=new WeakMap,sd=new WeakMap,nd=new WeakMap,od=new WeakMap,ad=new WeakMap,rd=new WeakMap,ld=new WeakMap,cd=new WeakMap;class dd{constructor(e,t,i){Q(this,xc,Le()),Q(this,Vc,void 0),Q(this,zc,void 0),Q(this,Fc,void 0),Q(this,jc,void 0),Q(this,Bc,void 0),Q(this,Qc,void 0),Q(this,Hc,void 0),Q(this,Yc,void 0),Q(this,Xc,void 0),Q(this,Jc,!1),Q(this,Kc,e=>{B(xc,this).setItem(Wc,e)}),Q(this,$c,async()=>{if("on"===B(Yc,this)){if(B(Qc,this).update(B(xc,this).getItem(Wc)),B(Xc,this)){const e=Array.from(B(Xc,this).participants.values()).filter(e=>!e.isLocal);return void await Promise.all(e.map(e=>B(Xc,this).reconnectParticipant(e.id)))}await B(ld,this).call(this)}}),Q(this,qc,async({id:e,agent:t})=>{B(Xc,this)&&await B(Xc,this).addParticipant(e,t)}),Q(this,Zc,e=>{B(Xc,this)&&B(Xc,this).removeParticipant(e)}),Q(this,ed,async()=>{try{return await B(Hc,this).create(),B(Hc,this).resource.iceServers}catch(e){return console.warn("failed to fetch ice servers",e),[]}}),Q(this,td,async e=>{if(B(Xc,this)){if(Qr.showCallingControls(e),!e.audioEnabled)return B(Xc,this).unpublishAudioTrack();if(!navigator.mediaDevices)return console.warn("CobrowseIO: Failed to start audio, mediaDevices is not available"),void B(Qc,this).update({audioEnabled:!1});try{const t=hl(e),i=await navigator.mediaDevices.getUserMedia(t);B(Xc,this).publishStreamTracks(i)}catch(e){console.warn("CobrowseIO: Failed to get audio",e),B(Qc,this).update({audioEnabled:!1})}}}),Q(this,id,async e=>{if(B(Xc,this)){if(Qr.showCallingControls(e),!e.videoEnabled)return B(Xc,this).unpublishVideoTrack();if(!navigator.mediaDevices)return console.warn("CobrowseIO: Failed to start video, mediaDevices is not available"),void B(Qc,this).update({videoEnabled:!1});try{const t=ul(e),i=await navigator.mediaDevices.getUserMedia(t);B(Xc,this).publishStreamTracks(i)}catch(e){console.warn("CobrowseIO: Failed to get video",e),B(Qc,this).update({videoEnabled:!1})}}}),Q(this,sd,e=>{"audio"===e&&B(Qc,this).toggleAudio(),"video"===e&&B(Qc,this).toggleVideo(),"settings"===e&&B(cd,this).call(this)}),Q(this,nd,(e,t)=>{H(Yc,this,e.calling()),B(Yc,this)!==(null==t?void 0:t.calling())&&("off"===B(Yc,this)&&B(ad,this).call(this),"requested"===B(Yc,this)&&fe.isActive()&&B(rd,this).call(this),"on"===B(Yc,this)&&fe.isActive()&&B(ld,this).call(this))}),Q(this,od,()=>{Qr.hideCallingControls()}),Q(this,ad,()=>{var e,t,i;null===(e=B(zc,this))||void 0===e||e.unmount(),H(zc,this,null),null===(t=B(Vc,this))||void 0===t||t.unmount(),H(Vc,this,null),null===(i=B(Xc,this))||void 0===i||i.destroy(),H(Xc,this,null),Qr.hideCallingControls()}),Q(this,rd,async()=>{H(Jc,this,await B(cd,this).call(this)),B(Fc,this).update({calling:B(Jc,this)?"on":"rejected"})}),Q(this,ld,async()=>{const{videoEnabled:e,audioEnabled:t}=B(Qc,this).settings;if(!B(Jc,this)){if(!e&&!t&&!await B(cd,this).call(this))return B(Fc,this).update({calling:"off"});H(Jc,this,!0)}const i=await B(ed,this).call(this);if(H(Xc,this,new kc(B(jc,this).id,null,i,B(Bc,this))),await Promise.all(B(jc,this).all().map(({id:e,agent:t})=>B(Xc,this).addParticipant(e,t))),e||t)try{const e=$($({},hl(B(Qc,this).settings)),ul(B(Qc,this).settings)),t=await navigator.mediaDevices.getUserMedia(e);B(Xc,this).publishStreamTracks(t)}catch(e){console.warn("CobrowseIO: Failed to get media",e),B(Qc,this).update({videoEnabled:!1,audioEnabled:!1})}Qr.showCallingControls(B(Qc,this).settings),H(zc,this,ti(nl,{mediaSettings:B(Qc,this),callSession:B(Xc,this)},{hideFromAgent:!0,useShadowRoot:!0}))}),Q(this,cd,()=>new Promise(e=>{const t=()=>{var e;null===(e=B(Vc,this))||void 0===e||e.unmount(),H(Vc,this,null)},i={settings:B(Qc,this).settings,status:(()=>"requested"===B(Yc,this)?wl:"on"!==B(Yc,this)||B(Jc,this)?Al:vl)(),isCallAccepted:B(Jc,this),accept:i=>{B(Qc,this).update(i),t(),e(!0)},reject:()=>{t(),e(!1)}};H(Vc,this,ti(Ol,i,{hideFromAgent:!0,useShadowRoot:!0}))})),J(this,"destroy",()=>{var e,t,i,s;fe.off("activate",B($c,this)),B(jc,this).off("leave",B(Zc,this)),B(jc,this).off("join",B(qc,this)),B(Qc,this).off("videoInputSettings.updated",B(id,this)),B(Qc,this).off("audioInputSettings.updated",B(td,this)),Qr.off("click",B(sd,this)),B(Fc,this).off("updated",B(nd,this)),B(Fc,this).off("ended",B(od,this)),null===(e=B(zc,this))||void 0===e||e.unmount(),H(zc,this,null),null===(t=B(Vc,this))||void 0===t||t.unmount(),H(Vc,this,null),H(Qc,this,null),null===(i=B(Xc,this))||void 0===i||i.destroy(),H(Xc,this,null),null===(s=B(Bc,this))||void 0===s||s.destroy(),H(Bc,this,null)}),H(Fc,this,e),H(jc,this,t),H(Bc,this,new nc(i,({clientId:e})=>t.id===e&&fe.isActive())),H(Qc,this,new pl(B(xc,this).getItem(Wc),B(Kc,this))),H(Hc,this,new Uc(e)),B(Fc,this).on("ended",B(od,this)),B(Fc,this).on("updated",B(nd,this)),B(nd,this).call(this,e),Qr.on("click",B(sd,this)),B(Qc,this).on("audioInputSettings.updated",B(td,this)),B(Qc,this).on("videoInputSettings.updated",B(id,this)),B(jc,this).on("join",B(qc,this)),B(jc,this).on("leave",B(Zc,this)),fe.on("activate",B($c,this))}}const hd=_("cbio.SessionContext"),ud=_("cbio.SessionContext.events");var Ed=new WeakMap,_d=new WeakMap,pd=new WeakMap,Id=new WeakMap,Ld=new WeakMap,md=new WeakMap,Cd=new WeakMap,Nd=new WeakMap,gd=new WeakMap,wd=new WeakMap,vd=new WeakMap,Ad=new WeakMap,Sd=new WeakMap,fd=new WeakSet,Td=new WeakMap,Od=new WeakMap,Rd=new WeakMap,yd=new WeakMap,bd=new WeakMap,Pd=new WeakMap,Md=new WeakMap,kd=new WeakMap,Dd=new WeakMap,Gd=new WeakMap,Ud=new WeakMap,Wd=new WeakMap,xd=new WeakMap,Vd=new WeakMap,zd=new WeakMap,Fd=new WeakMap,jd=new WeakMap,Bd=new WeakMap,Qd=new WeakMap,Hd=new WeakMap,Yd=new WeakMap,Xd=new WeakMap,Jd=new WeakMap,Kd=new WeakMap,$d=new WeakMap,qd=new WeakMap,Zd=new WeakMap,eh=new WeakMap;class th{constructor(e,t){X(this,fd),Q(this,Ed,void 0),Q(this,_d,void 0),Q(this,pd,new In),Q(this,Id,void 0),Q(this,Ld,void 0),Q(this,md,void 0),Q(this,Cd,void 0),Q(this,Nd,void 0),Q(this,gd,void 0),Q(this,wd,void 0),Q(this,vd,()=>{B(Hd,this).call(this),B(Nd,this)||(H(Nd,this,new Xl((e=>{const t=Le().getItem(e);if(t)return t;const i=h();return Le().setItem(e,i),i})("_cobrowse_client_id"),h())),B(Nd,this).on("ping",e=>B(Ed,this).stream.send("client",e)),this.session.on("client",B(Dd,this))),B(gd,this)||H(gd,this,new dd(this.session,B(Nd,this),B(Ed,this).stream)),B(Nd,this).ping(),H(wd,this,()=>{H(wd,this,null),za.resolvePendingHighlight()})}),Q(this,Ad,e=>{var t;"session-end"===e&&null!==(t=this.session)&&void 0!==t&&t.isActive()&&this.session.end(),"call-end"===e&&this.session.update({calling:"off"})}),Q(this,Sd,e=>{var t;return!(null===(t=this.session)||void 0===t||!t.isActive()||e===wi&&!this.session.capabilities.includes(Ts))}),J(this,"handleNavigation",(e,t,i,s)=>{var n;const{name:o,go:a,type:r}=s,{handle:l,document:c}=B(md,this).resolveDocument(s.handle,o),{windowProxy:d}=c,h=n=>{const a=B(Cd,this).runHandler(e,n||t,i,$($({},s),{},{document:c}));return a.rewrittenUrl?{rewrittenUrl:a.rewrittenUrl}:(a.document&&B(md,this).addDocument(l,o,a.document),{windowProxy:d})};if(!r)return h();if(r===gi)return h();const u=this.delegate.confirmOpen(e,r);return u?!0===u?h("_blank"):(null===(n=u.then)||void 0===n||n.call(u,e=>{if(!e)return a(),{windowProxy:d};h("_blank")}),{windowProxy:d}):{rewrittenUrl:e}}),J(this,"invalidateFrames",()=>{B(pd,this).isRunning()&&B(pd,this).invalidateFrame()}),J(this,"destroy",()=>{hd("destroy session context"),B(Bd,this).call(this),Qr.off("click",B(Ad,this)),B(Cd,this)&&B(Cd,this).destroy(),H(Cd,this,null),Ln.off("navigate",B(Td,this)),B(Ed,this)&&B(Ed,this).close(),H(Ed,this,null),B(pd,this)&&B(pd,this).destroy(),H(pd,this,null),B(gd,this)&&B(gd,this).destroy(),H(gd,this,null),B(md,this)&&B(md,this).destroy(),H(md,this,null),B(Nd,this)&&B(Nd,this).destroy(),H(Nd,this,null),fe.off("activate",B(Hd,this)),window.removeEventListener("focus",B(Hd,this),{capture:!0,passive:!0}),window.removeEventListener("hashchange",B(Yd,this),{capture:!0,passive:!0}),Ee.onChange===B(Zd,this)&&(Ee.onChange=null),Gt.off("click",B(Kd,this)),Gt.off("change",B($d,this)),Ma.off("click",B(Kd,this)),Ma.off("change",B($d,this)),za.off("end",B(Pd,this)),this.session&&(this.session.removeListener("update",B(jd,this)),this.session.removeListener("ended",B(Bd,this)),this.session.removeListener("sync",B(Rd,this)),this.session.removeListener("drawing",B(Md,this)),this.session.removeListener("laser",B(yd,this)),this.session.removeListener("control",B(kd,this)),this.session.removeListener("remote-error",B(Od,this)),this.session.removeListener("client",B(Dd,this))),document.removeEventListener("DOMContentLoaded",B(Gd,this),{once:!0}),this.session=null}),Q(this,Td,(e,t)=>{B(Ud,this).call(this,this.session),Ci.hide(),(mt.hasChange(this.delegate.redactedViews,t)||mt.hasChange(this.delegate.unredactedViews,t)||mt.hasChange(this.session.redactionSelectors(),t)||mt.hasChange(this.session.unredactionSelectors(),t))&&this.invalidateFrames()}),Q(this,Od,async e=>{const t=B(pd,this).getSource();if(!(t instanceof zn))return;const{target:i,error:{cause:s}}=e;if("load-error"!==s)return;const n="string"==typeof i?i:i.id;await St(n),t.partialSync(n)}),Q(this,Rd,({id:e})=>{e&&B(Id,this)===e||(H(Id,this,e),B(pd,this).invalidateFrame())}),Q(this,yd,e=>{V(fd,this,ih).call(this,e)&&fe.isActive()&&(this.session.fullDevice()||nr.update(e))}),Q(this,bd,async e=>{ud("on(highlight)",e),V(fd,this,ih).call(this,e)&&fe.isActive()&&(this.session.fullDevice()||await za.highlightAndWait(this.delegate,e))}),Q(this,Pd,({id:e,state:t})=>{B(Qd,this).call(this,"highlight",{type:xl,id:e,state:t,timestamp:new Date})}),Q(this,Md,e=>{V(fd,this,ih).call(this,e)&&(e.image||Ka.hide(e.agent),fe.isActive()&&(this.session.fullDevice()||Ka.update(e)))}),Q(this,kd,(e,t)=>{"focus"!==e||t.agent||fe.resignActive(),t.agent&&fe.isActive()&&(this.session.fullDevice()||this.session.allowRemoteControl()&&(this.session.capabilities.includes(fs)&&ar.update(e,t),V(fd,this,ih).call(this,t)&&Aa.applyEvent(e,t)))}),Q(this,Dd,e=>{B(Nd,this).track(e)}),Q(this,Gd,e=>{this.session&&(e.isActive()?document.body?this.delegate.showSessionControls(e):document.addEventListener("DOMContentLoaded",B(Gd,this),{once:!0}):this.delegate.hideSessionControls(e))}),Q(this,Ud,e=>{_t.instance=new Je(mt.filterSelectors(this.delegate.redactedViews),mt.filterSelectors(this.delegate.unredactedViews),mt.filterSelectors(e.redactionSelectors()),mt.filterSelectors(e.unredactionSelectors()))}),Q(this,Wd,(e,t)=>{const i=!G(e.redactionSelectors(),(null==t?void 0:t.redactionSelectors())||[]),s=!G(e.unredactionSelectors(),(null==t?void 0:t.unredactionSelectors())||[]);return i||s}),Q(this,xd,async e=>{if(!e.agent()||e.isActive()||e.isEnded())return null;if(B(Ld,this))return null;if(H(Ld,this,!0),!e.requireConsent())return e.activate();try{if(hd("authorizing session"),await e.update({state:"authorizing"}),!this.session||!e.isAuthorizing())return null;const t=await this.delegate.confirmSession(e);return this.session?!1===t?(hd("user rejected session request"),e.end()):(hd("session accepted"),e.activate()):null}catch(t){return t&&console.warn("CobrowseIO: error caught during confirmation",t),this.session?e.end():null}}),Q(this,Vd,async e=>{if("requested"!==e.remoteControl())return null;try{return!1===await this.delegate.confirmRemoteControl()?(hd("user rejeted remote control"),e.update({remote_control:"rejected"})):(hd("user accepted remote control"),e.update({remote_control:"on"}))}catch(t){return t&&console.warn("CobrowseIO: error caught during confirmation",t),e.update({remote_control:"rejected"})}}),Q(this,zd,async()=>{const e=this.session.resource.full_device;if(!0!==e&&"requested"!==e)return!1;if(!fe.isActive())return!1;if(this.session.capabilities.includes(Ss))try{const e=await this.delegate.confirmFullDevice();return hd("full device request",e),e||await this.session.setFullDevice("rejected"),e}catch(e){return await this.session.setFullDevice("off"),!1}}),Q(this,Fd,async e=>{if(e.isEnded()||!B(pd,this))return null;const t=B(pd,this).getSource();e.fullDevice()?t instanceof To||await B(pd,this).setSource(new To({handleFrame:B(Jd,this),scale:e.scale,captureStarted:t=>{e.setFullDevice("on"),e.emit("media",t)},captureEnded:t=>{t&&console.warn("Full device mode failed: ",t),e.setFullDevice(t?"rejected":"off")},requestPermission:B(zd,this)})):t instanceof zn?e.isVirtual()&&B(pd,this).getSource().setOptions({includeVisibility:e.isVirtual()}):B(pd,this).setSource(new zn(B(Xd,this),{includeVisibility:e.isVirtual()})),B(pd,this).getSource().setCodecs(e.resource.video_codecs)}),Q(this,jd,(e,t)=>{this.session?(B(xd,this).call(this,e),B(Gd,this).call(this,e),B(Ud,this).call(this,e),B(Wd,this).call(this,e,t)&&this.invalidateFrames(),B(Vd,this).call(this,e),B(Fd,this).call(this,e),e.isActive()&&B(eh,this).call(this)):hd("onSessionUpdated called after destroy()")}),Q(this,Bd,()=>{Ka.hide(),ar.hide(),nr.hide(),Ci.hide(),this.delegate.hideSessionControls(this.session),B(md,this)&&B(md,this).closeAllDocuments()}),Q(this,Qd,(e,t)=>!(!this.session||!this.session.isActive()||!this.session.fullDevice()&&!fe.isActive()||!B(Ed,this)||!B(Ed,this).stream||!B(Ed,this).stream.connected||!B(Ed,this).stream.bufferedAmount>100||(B(Ed,this).stream.send(e,t),0))),Q(this,Hd,()=>B(Qd,this).call(this,"focus",{type:"Focus",timestamp:new Date})),Q(this,Yd,()=>B(Qd,this).call(this,"screen",{type:"Screen",timestamp:new Date,url:window.location.href,title:document.title})),Q(this,Xd,e=>{H(_d,this,(B(_d,this)||0)+1);const t=B(Qd,this).call(this,"frame",{type:"Frame",id:B(_d,this),data:e,timestamp:new Date,mime_type:"application/x-cbio-vdom-patch"});return t&&B(wd,this)&&B(wd,this).call(this),t}),Q(this,Jd,(e,t,i)=>{B(Ed,this).stream.messageLag()>=i?hd("dropped frame due to message lag",B(Ed,this).stream.messageLag()):(H(_d,this,(B(_d,this)||0)+1),B(Qd,this).call(this,"frame",{type:"Frame",id:B(_d,this),data:e,timestamp:new Date,mime_type:t}))}),Q(this,Kd,e=>{const t=Ee.position();B(Qd,this).call(this,"mouse",{type:yl,x:t.x/window.innerWidth,y:t.y/window.innerHeight,target:e,state:"click",timestamp:new Date})}),Q(this,$d,e=>{B(Qd,this).call(this,"change",{type:Gl,target:e,state:"change",timestamp:new Date})}),Q(this,qd,e=>{B(Qd,this).call(this,"input",{type:Ul,target:e,state:"input",timestamp:new Date})}),Q(this,Zd,e=>{let t="mouseout";return e.in&&(t=e.down?"mousedown":"mouseup"),B(Qd,this).call(this,"mouse",{type:yl,x:e.x/window.innerWidth,y:e.y/window.innerHeight,state:t,timestamp:new Date})}),Q(this,eh,()=>(B(pd,this).isRunning()||(hd("start frames"),B(pd,this).start()),this)),hd("session context constructed"),this.session=e,this.delegate=t,H(Ed,this,new Ja(e)),fe.on("activate",B(Hd,this)),window.addEventListener("focus",B(Hd,this),{capture:!0,passive:!0}),window.addEventListener("hashchange",B(Yd,this),{capture:!0,passive:!0}),Ee.onChange=B(Zd,this),Gt.on("click",B(Kd,this)),Gt.on("change",B($d,this)),Gt.on("input",B(qd,this)),Ma.on("click",B(Kd,this)),Ma.on("change",B($d,this)),Ma.on("input",B(qd,this)),za.on("end",B(Pd,this)),B(jd,this).call(this,e),e.on("updated",B(jd,this)),e.on("ended",B(Bd,this)),e.on("sync",B(Rd,this)),e.on("highlight",B(bd,this)),e.on("drawing",B(Md,this)),e.on("laser",B(yd,this)),e.on("control",B(kd,this)),e.on("remote-error",B(Od,this)),e.once("stream-open",B(vd,this)),H(md,this,new Zo({onDocumentAdded:e=>this.delegate.showDocument(e)}));const i=new Qi(e,t),s=new es(e,t),n=new _n(e,t);H(Cd,this,new Oi({shouldNavigate:B(Sd,this),handlers:[i,s,n],handleNavigation:this.handleNavigation})),Ln.on("navigate",B(Td,this)),Qr.on("click",B(Ad,this))}}function ih(e){return{[yl]:[Is],[bl]:[Is],[Pl]:[Is],[Ml]:[Cs,Is],[kl]:[Cs],[Dl]:[Ls],[Gl]:Aa.isTypingInput(e)?[Cs]:[Cs,Is],[Ul]:Aa.isTypingInput(e)?[Cs]:[Cs,Is],[Wl]:[vs],[xl]:[Os],[Vl]:null!=e.disappears_in?[As]:[Ns,ws,gs],[zl]:[ms]}[e.type].some(e=>this.session.capabilities.includes(e))}const sh=_("cbio.Integrations.Intercom");function nh(){sh("Updating intercom integration"),window.intercomSettings||(window.intercomSettings={}),window.intercomSettings.CobrowseID=Yu.deviceId(),window.Intercom("update",{CobrowseID:Yu.deviceId()}),Yu.on("session.loaded",function(e){window.Intercom("update",{CobrowseSessionID:e.id()})})}const oh=_("cbio.Integrations.Zendesk");function ah(e,t){let i={};"identify"===e&&t?(t.name&&(i.user_name=t.name),t.email&&(i.user_email=t.email),t.organization&&(i.user_organization=t.organization)):"prefill"===e&&t?(t.name&&t.name.value&&(i.user_name=t.name.value),t.email&&t.email.value&&(i.user_email=t.email.value),t.phone&&t.phone.value&&(i.user_phone=t.phone.value)):"logout"===e&&(i={user_name:null,user_email:null,user_organization:null,user_phone:null}),Lh(i)}let rh=window.localStorage;function lh(e,t){let i={};"identify"===e&&t?i={zendesk_web_user_id:t.appUserId,cobrowseio_deviceid:t.deviceId}:"logoutUser"===e&&(i={user_name:null,user_email:null,user_organization:null,user_phone:null,zendesk_web_user_id:null,zendesk_user_id:null,zendesk_ticket_id:null}),Lh(i)}function ch(){const e=dh();if(!e)throw new Error("Missing client ID (ZD-buid)");const t=hh(e);if(!t)throw new Error("Instance ID could not be found");const i=uh(t);window.zE.__cobrowseio_zendesk_tags_set||window.zE("messenger:set","conversationTags",[`cobrowseio_deviceid_${Yu.deviceId()}`]),lh("identify",{appUserId:i,deviceId:Yu.deviceId()})}function dh(){return rh.getItem("ZD-buid")}function hh(e){var t;return null===(t=Object.keys(rh).find(t=>t.match(/\w+\.clientId/)&&rh[t]===e))||void 0===t||null===(t=t.split("."))||void 0===t?void 0:t[0]}function uh(e){return rh.getItem(`${e}.appUserId`)}function Eh(){const e=(t,i)=>{rh=sessionStorage.getItem("ZD-buid")?window.sessionStorage:window.localStorage;const s=uh(hh(dh()));s?t(s):setTimeout(e,Ih,t,i)};return new Promise(e)}function _h(){Lh({zendesk_web_user_id:ph()})}function ph(){var e;return null===(e=window.Smooch.getUser())||void 0===e?void 0:e.id}const Ih=2e3;function Lh(e){Object.keys(e).length&&(Yu.customData=e)}function mh(){const e=window.zE;window.zE=function(...t){const[i,s,n]=t;if("webWidget"===i&&ah(s,n),"messenger"===i&&lh(s,n),"messenger:set"===i&&"conversationTags"===s){let e=n;if(e&&e.length){const i=Yu.deviceId();e=[...e,`cobrowseio_deviceid_${i}`],t[2]=e,window.zE.__cobrowseio_zendesk_tags_set=!0}}return e(...t)};for(const t in e)window.zE[t]=e[t]}const Ch=_("cbio.Integrations.Salesforce");const Nh=_("cbio.Integrations.Genesys");let gh;function wh(){if(!gh)try{var e;const t=window.CXBus||(null===(e=window)||void 0===e||null===(e=e._genesys)||void 0===e||null===(e=e.widgets)||void 0===e?void 0:e.bus);if(!t)throw new Error("Genesys bus not found");gh=t.registerPlugin("CobrowseIOExtension"),window.oCobrowseIOExtension=gh,Nh("CobrowseIOExtension",gh),gh.subscribe("WebChat.opened",function(e){Nh("CobrowseIOExtension.WebChat.opened",e),function(e){document.querySelector(".cx-menu .cx-cobrowseio")||(document.getElementsByClassName("cx-menu")[0].insertAdjacentHTML("beforeend",'<li role="none"><div class="cx-menu-item cx-cobrowseio cx-icon" role="button" data-icon="cobrowseio" tabindex="0" aria-label="Start Co-browse Opens the Co-browse session" title="Start Co-browse" style="display: block/;"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" viewBox="0 0 100 100" focusable="false" role="img" aria-hidden="true" alt="" data-gcb-service-node="true"><g class="cx-svg-icon-tone1" data-gcb-service-node="true"><path d="M11.5000001,3 L85.4166665,3 L87.6666668,3 C90.2624998,3 97,3.75367965 97,8.36940835 L97,30.4776335 L4.16666671,30.4776335 L4.16666671,70.4963922 C4.16666671,78.8021647 9.0333332,80.6810966 11.3333336,80.6810966 L88.6666664,80.6810966 C90.9625002,80.6810966 92.8333333,78.8021647 92.8333333,76.4963922 L92.8333333,41.8470419 L97,41.8470419 L97,79.5093796 C97,84.1251081 93.2624998,84.8787879 91.6666668,84.8787879 L8.3333332,84.8787879 C3.73750015,84.8787879 1,81.1251081 0,75.5093796 L0,8.36940835 C3,3.75367965 2.73750015,3 8.3333332,3 L8.5000001,3 Z M18.0297398,7.03030303 L5.9962825,7.03030303 C5.79033476,7.03030303 3.99999999,8.59607987 3.99999999,10.5175565 L3.999999,26.1125541 L93,26.1125541 L93,10.5175565 C93,8.59607987 91.2056692,7.03030303 89.0037175,7.03030303 L81.9702602,7.03030303 L18.0297398,7.03030303 Z M42.3451929,54.7727663 L42.3451929,68.6904309 L35,68.6904309 L35,47.7138693 C35,44.657411 37.4676761,42.1818182 40.5082059,42.1818182 L61.3971055,42.1818182 L61.3971055,49.5560425 L47.5394308,49.5560425 L66.3971054,67.9373646 L61.202867,73.154089 L42.3451929,54.7727663 Z" id="Fill-1-Copy""></path></g></svg></div></li>'),document.getElementsByClassName("cx-cobrowseio")[0].onclick=()=>async function(e){Nh("Requesting cobrowse");const t=await Yu.createSessionCode();Nh(`Generated session code: ${t}`),e.command("WebChatService.sendFilteredMessage",{message:`Customer requests Cobrowse session with code: ${t.substr(0,3)} ${t.substr(3)}`,regex:/Customer requests Cobrowse session with code:.*/}).done(function(e){Nh("CobrowseIOExtension.WebChatService sent filtered message successfully",e)}).fail(function(e){Nh("CobrowseIOExtension.WebChatService failed to send filtered message",e)})}(e))}(gh),function(e){e.command("WebChatService.updateUserData",{cobrowse_device_id:Yu.deviceId()}).done(function(e){Nh("CobrowseIOExtension.WebChatService.updateUserData succeeded",e)}).fail(function(e){Nh("CobrowseIOExtension.WebChatService.updateUserData failed",e)})}(gh)}),gh.subscribe("WebChatService.started",function(e){try{Nh("CobrowseIOExtension.WebChatService.started",e);const t={cobrowse_device_id:Yu.deviceId()};e&&e.data&&(e.data.data&&e.data.data.conversationId&&(t.genesys_conversation_id=e.data.data.conversationId),e.data.userId&&"deprecated"!==e.data.userId&&(t.genesys_user_id=e.data.userId),e.data.sessionID&&"deprecated"!==e.data.sessionID&&(t.genesys_session_id=e.data.sessionID)),Yu.customData=t}catch(e){Nh("Error during CobrowseIOExtension.WebChatService.started",e)}}),gh.subscribe("WebChatService.agentConnected",function(e){Nh("CobrowseIOExtension.WebChatService.agentConnected",e)}),gh.subscribe("WebChatService.clientConnected",function(e){Nh("CobrowseIOExtension.WebChatService.clientConnected",e)}),gh.subscribe("WebChatService.restored",function(e){Nh("CobrowseIOExtension.WebChatService.restored",e)}),gh.subscribe("WebChatService.ended",function(e){Nh("CobrowseIOExtension.WebChatService.ended",e),Yu.currentSession&&!Yu.currentSession.isEnded()&&Yu.currentSession.end()}),gh.subscribe("WebChat.started",function(e){try{if(Nh("CobrowseIOExtension.WebChat.started",e),e&&e.data&&e.data.form){Nh("e.data.form",e.data.form);const t=e.data.form||{};t.device_name=e.data.form.firstname?`${e.data.form.firstname}'s device`:"WebChat User's Device",Yu.customData=t}}catch(e){Nh("Error during CobrowseIOExtension.WebChat.started",e)}}),gh.republish("ready"),gh.ready()}catch(e){console.error("Error syncing Cobrowse.io with Genesys, please contact hello@cobrowse.io for help!"),console.warn(e)}}const vh=_("cbio.Integrations.Freshchat");async function Ah(){const e=Yu.deviceId();window.fcWidget.user.setProperties({cobrowse_device_id:e});const t=await window.fcWidget.user.get();if(t.success){vh("Freshchat initialized");const i=t.data,s={freshchat_numeric_user_id:i.id+"",freshchat_user_id:i.alias,cobrowse_device_id:e};i.isNameGenerated||(s.freshchat_user_first_name=i.firstName,s.freshchat_user_last_name=i.lastName),i.email&&(s.freshchat_user_email=i.email),Yu.customData=s}}const Sh=_("cbio.Integrations.Nice"),fh=_("cbio.Integrations.Dynamics"),Th=_("cbio.Integrations.ServiceNow"),Oh=_("cbio.Integrations.Talkdesk");let Rh=!1;const yh=_("cbio.Integrations.AmazonConnect"),bh=_("cbio.Integrations");class Ph{static watchProperty(e,t,i){let s=e[t];const n=()=>{bh(`monitoring changes to ${t}`,e),Object.defineProperty(e,t,{configurable:!0,set:o=>{bh("CobrowseIO detected",t,"as",o),s=o,Object.defineProperty(e,t,{configurable:!0,writable:!0,value:o}),setTimeout(()=>i(n),0)},get:()=>s})};s?(bh(`${t} already exists as ${e[t]}`),i(n)):n()}static initialize(){bh("Initializing integrations"),this.watchProperty(window,"Intercom",()=>function(){try{if(!window.Intercom||"function"!=typeof window.Intercom)throw new Error("expected window.Intercom to be a function");sh("Initializing intercom integration"),nh(),window.Intercom("onShow",l(nh,12e4,{trailing:!1}))}catch(e){console.error("Error syncing Cobrowse.io with Intercom, please contact hello@cobrowse.io for help!"),console.warn(e)}}()),this.watchProperty(window,"$zopim",()=>function(){try{if("function"!=typeof window.$zopim)throw new Error("expected window.$zopim to a be a function");window.$zopim(function(){oh("Initializing zendesk integration"),window.$zopim.livechat.addTags(`cobrowseio_deviceid_${Yu.deviceId()}`),Yu.customData={cobrowseio_deviceid:Yu.deviceId()}})}catch(e){console.error("Error syncing Cobrowse.io with Zendesk Chat, please contact hello@cobrowse.io for help!"),console.warn(e)}}()),this.watchProperty(window,"embedded_svc",()=>this.watchProperty(window.embedded_svc,"liveAgentAPI",()=>{!function(){try{if("object"!=typeof window.embedded_svc)throw new Error("expected window.embedded_svc to a be an object");if(window.embedded_svc&&!window.embedded_svc.liveAgentAPI)throw new Error("expected liveAgentAPI on embedded_svc");Ch("Initializing salesforce legacy integration"),window.embedded_svc.addEventHandler("onChatRequestSuccess",function(e){e&&e.liveAgentSessionKey&&(Yu.customData={salesforce_liveAgentSessionKey:e.liveAgentSessionKey})}),window.embedded_svc.addEventHandler("onChatEndedByAgent",function(){Yu.currentSession&&Yu.currentSession.end()}),window.embedded_svc.addEventHandler("onChatEndedByChasitor",function(){Yu.currentSession&&Yu.currentSession.end()})}catch(e){console.error("Error syncing Cobrowse.io with Salesforce Chat, please contact hello@cobrowse.io for help!"),console.warn(e)}}()})),this.watchProperty(window,"embeddedservice_bootstrap",()=>function(){try{if("object"!=typeof window.embeddedservice_bootstrap)throw new Error("expected window.embeddedservice_bootstrap to a be an object");Ch("Initializing salesforce enhanced messaging integration"),window.addEventListener("onEmbeddedMessagingConversationRouted",e=>{var t;const i=null==e||null===(t=e.detail)||void 0===t||null===(t=t.conversationEntry)||void 0===t?void 0:t.entryPayload;if(!i)throw new Error("No entry payload found");const s=JSON.parse(i),n=null==s?void 0:s.recordId;if(!n)throw new Error("No messaging Session Id found in entry payload");const o=function(e){if(18===e.length)return e;if(15!==e.length)throw Error(`Invalid salesforce id: ${e}`);let t="";for(let i=0;i<3;i++){let s=0;for(let t=0;t<5;t++){const n=e.charAt(5*i+t);n>="A"&&n<="Z"&&(s+=1<<t)}t+="ABCDEFGHIJKLMNOPQRSTUVWXYZ012345".charAt(s)}return e+t}(n);Yu.customData={salesforce_MessagingSessionId:o}}),window.addEventListener("onEmbeddedMessagingConversationClosed",e=>{Yu.currentSession&&Yu.currentSession.end()}),window.addEventListener("onEmbeddedMessagingWindowClosed",e=>{Yu.currentSession&&Yu.currentSession.end()})}catch(e){console.error("Error syncing Cobrowse.io with Salesforce Chat, please contact hello@cobrowse.io for help!"),console.warn(e)}}()),this.initializeGenesys(()=>function(){try{window.Genesys("subscribe","Database.ready",()=>{const e=Yu.deviceId();Yu.customData={cobrowse_device_id:e},window.Genesys("command","Database.set",{messaging:{customAttributes:{cobrowse_device_id:e}}})}),window.Genesys("subscribe","MessagingService.ready",()=>{window.Genesys("subscribe","MessagingService.conversationDisconnected",({data:e})=>{Nh("MessagingService.conversationDisconnected triggered",e),Yu.currentSession&&!Yu.currentSession.isEnded()&&(Nh("Ending Cobrowse session after conversation disconnected"),Yu.currentSession.end())})})}catch(e){console.error("Error syncing Cobrowse.io with Genesys, please contact hello@cobrowse.io for help!"),console.warn(e)}}(),()=>wh()),this.initializeZendesk(()=>function(){mh();try{"true"===sessionStorage.getItem("ZD-widgetOpen")?Eh().then(ch):window.zE("messenger:on","open",()=>{Eh().then(ch)})}catch(e){console.error("Error syncing Cobrowse.io with Zendesk (messenger), please contact hello@cobrowse.io for help!"),console.warn(e)}}(),()=>function(){try{!function(){if(!window.zE||!window.zE.identify)throw new Error("missing window.zE or window.zE.identify");{mh();const e=window.zE.identify;window.zE.identify=function(...t){const[i]=t;return ah("identify",i),e(...t)}}}()}catch(e){console.error("Error syncing Cobrowse.io with Zendesk (classic), please contact hello@cobrowse.io for help!"),console.warn(e)}}(),()=>function(){try{window.Smooch.on("widget:opened",()=>{(function(){const e=(t,i)=>{const s=ph();s?t(s):setTimeout(e,Ih,t,i)};return new Promise(e)})().then(_h)})}catch(e){console.error("Error syncing Cobrowse.io with Zendesk (Sunshine Conversations), please contact hello@cobrowse.io for help!"),console.warn(e)}}()),this.initializeFreshchat(()=>async function(){window.fcWidget?(window.fcWidget.on("user:created",e=>{e.success&&Ah()}),window.fcWidget.on("widget:opened",async()=>{!0===(await window.fcWidget.user.isExists()).data&&await Ah()})):vh("Freshchat not found")}()),this.initializeNice(()=>async function(){Sh("Swizzling started");const e=Yu.deviceId();try{window.cxone("chat","setCustomerCustomField","cobrowse_device_id",e)}catch(e){console.log("Error setting Nice CX custom field",e)}window.cxone("chat","onAnyPushUpdate",({data:t,eventType:i})=>{var s;if("CaseCreated"===i){var n;Sh("Nice case created");const{case:i}=t,s=i.id+"",o=null===(n=i.authorEndUserIdentity.fullName)||void 0===n?void 0:n.trim(),a=i.authorEndUserIdentity.idOnExternalPlatform;Yu.customData={nice_case_id:s,nice_external_contact_id:a,cobrowse_device_id:e,user_name:o}}else"CaseStatusChanged"===i&&"closed"===t.case.status&&null!==(s=Yu.currentSession)&&void 0!==s&&s.isActive()&&(Sh("Nice case closed"),Yu.currentSession.end())})}()),this.initializeDynamics(()=>function(){const e=Yu.deviceId();let t=!1;function i(e){window.Microsoft.Omnichannel.LiveChatWidget.SDK.setContextProvider(()=>({"cobrowse-device":{value:e,isDisplayable:!0}})),t=!0,fh("Dynamics initialized")}Yu.customData={cobrowse_device_id:e},window.addEventListener("lcw:ready",()=>{t||i(e)});try{i(e)}catch(e){}}()),this.initializeServiceNow(()=>function(){const e=Yu.deviceId();Yu.customData={cobrowse_device_id:e},Th("ServiceNow initialized")}()),this.initializeTalkdesk(()=>function(){if("function"==typeof TalkdeskChatSDK){if(!window.webchat)return console.warn('Talkdesk not found in variable "webchat". Please load Talkdesk using:'),void console.warn("window.webchat = TalkdeskChatSDK(node, props)");if("function"!=typeof window.webchat.setContextParam)return console.warn("window.webchat.setContextParam is missing or of an unexpected value. Please load Talkdesk using:"),void console.warn("window.webchat = TalkdeskChatSDK(node, props)");if(!Rh){const e={cobrowse_device_id:Yu.deviceId()};Yu.customData=e,window.webchat.setContextParam(e),Rh=!0,Oh("Talkdesk initialized")}}else console.warn("TalkdeskChatSDK is not a function, ignoring as Talkdesk widget might not be present.")}()),this.initializeAmazonConnect(()=>function(){const e=Yu.deviceId();Yu.customData={cobrowse_device_id:e},yh("AmazonConnect initialized")}())}static initializeGenesys(e,t){this.watchProperty(window,"Genesys",()=>e()),this.watchProperty(window,"CXBus",()=>t()),this.watchProperty(window,"_genesys",()=>this.watchProperty(window._genesys,"widgets",()=>this.watchProperty(window._genesys.widgets,"bus",()=>{setTimeout(()=>{t()},0)})))}static initializeFreshchat(e){this.watchProperty(window,"fcWidget",()=>e())}static initializeTalkdesk(e){this.watchProperty(window,"TalkdeskChatSDK",()=>this.watchProperty(window,"webchat",()=>this.watchProperty(window.webchat,"setContextParam",()=>e())))}static initializeZendesk(e,t,i){this.watchProperty(window,"zE",i=>{if(!window.zE.widget)return i();"messenger"===window.zE.widget?e():t()}),this.watchProperty(window,"Smooch",()=>i())}static initializeNice(e){this.watchProperty(window,"cxone",t=>{if(!window.cxone.guide)return this.watchProperty(window.cxone,"guide",()=>e()),t();e()})}static initializeDynamics(e){this.watchProperty(window,"Microsoft",()=>this.watchProperty(window.Microsoft,"Omnichannel",()=>this.watchProperty(window.Microsoft.Omnichannel,"LiveChatWidget",()=>this.watchProperty(window.Microsoft.Omnichannel.LiveChatWidget,"SDK",()=>{e()}))))}static initializeServiceNow(e){this.watchProperty(window,"ServiceNowChat",()=>e())}static initializeAmazonConnect(e){this.watchProperty(window,"amazon_connect",()=>e())}}class Mh{static isHeadless(){return navigator.userAgent.toLowerCase().includes("headless")}}const kh=_("cbio.sessionStorage.LocalSessionStorage");var Dh=new WeakMap;class Gh{constructor(){Q(this,Dh,Le())}isSupported(e){return kh("isSupported?",!0),!0}load(e){const t=B(Dh,this).getItem(rn);return t?(kh("loading session"),new an(e)[yi].deserialize(t)):(kh("no session to load"),null)}store(e,t){null!=t&&t.isActive()?(kh("storing active session"),B(Dh,this).setItem(rn,t[yi].serialize())):(kh("removing inactive session"),B(Dh,this).removeItem(rn))}reset(e){B(Dh,this).removeItem(rn)}}const Uh=_("cbio.sessionStorage.CookieSessionStorage");function Wh(e,t,i){return i?`${e}//${t}:${i}`:`${e}//${t}`}function xh(t,i){const s=function(e){try{return new URL(e)}catch(e){return null}}(t);if(!s)return null;const{hostname:n,protocol:o,port:a}=s,r=e(i),l=n.split(".");for(let e=l.length-1;e>=0;e--){const t=l.slice(e).join("."),i=Wh(o,t,a),s=Wh(o,`.${t}`,a);if(r(i)&&r(s))return t}return null}class Vh{isSupported(e){if(!e.trustedOrigins.length)return Uh("isSupported?",!1,"no trusted origins"),!1;const t=xh(window.location.href,e.trustedOrigins);return Uh("isSupported?",!!t,"domain",t),!!t}load(e){const t=E.get(rn,{path:"/"});return t?(Uh("loading session from cookie"),new an(e)[yi].decompress(t)):(Uh("no session to load from cookies"),null)}store(e,t){if(!this.isSupported(e))return;const i={path:"/",domain:xh(window.location.href,e.trustedOrigins),secure:!0};null!=t&&t.isActive()?(Uh("storing active session to cookies"),E.set(rn,t[yi].compress(),$($({},i),{},{expires:1}))):(Uh("removing inactive session from cookies"),E.remove(rn,i))}reset(e){this.store(e,null)}}const zh=_("cbio.sessionStorage");var Fh=new WeakMap,jh=new WeakMap,Bh=new WeakMap;class Qh{static create(e){const t=new Gh,i=new hn,s=new Vh;return new Qh(e,{load:[i,s,t],store:[t,s,i]})}constructor(e,{load:t=[],store:i=[]}){Q(this,Fh,void 0),Q(this,jh,void 0),Q(this,Bh,void 0),H(Bh,this,e),H(Fh,this,t),H(jh,this,i)}peek(){zh("peeking session");for(const e of B(Fh,this)){if(!e.isSupported(B(Bh,this)))continue;const t=e.load(B(Bh,this));if(t)return t}return null}async load(){zh("loading session");for(const e of B(Fh,this)){if(!e.isSupported(B(Bh,this)))continue;const t=e.load(B(Bh,this)),i=await(null==t?void 0:t.fetch());if(i){if(i.isActive())return i;await e.store(B(Bh,this),null)}}return null}async store(e){zh("storing session");for(const t of B(jh,this))if(t.isSupported(B(Bh,this)))try{await t.store(B(Bh,this),e)}catch(e){console.error(`Unexpected error storing session: ${t.constructor.name}`,e)}}reset(){const e=new Set([...B(Fh,this),...B(jh,this)]);for(const t of e)t.reset(B(Bh,this))}}const Hh={load:Date.now()};var Yh=new WeakMap,Xh=new WeakMap,Jh=new WeakMap,Kh=new WeakMap,$h=new WeakMap,qh=new WeakMap,Zh=new WeakMap,eu=new WeakMap,tu=new WeakMap,iu=new WeakMap,su=new WeakMap,nu=new WeakMap,ou=new WeakMap;const au=new class{constructor(){Q(this,Yh,void 0),Q(this,Xh,void 0),Q(this,Jh,[]),Q(this,Kh,window.matchMedia("(min-width: 768px)")),J(this,"singleTabFullScreen",!1),J(this,"enterFullScreen",()=>B(Xh,this).enterFullScreen()),J(this,"exitFullScreen",()=>B(Xh,this).exitFullScreen()),J(this,"getTabCount",()=>B(Jh,this).length),J(this,"newTab",(e,t,i,s,n,o)=>{const a=B(Xh,this).createTab({onTabClick:e=>{B(eu,this).call(this,a)},onClose:n,confirmUnload:o});return a.setIcon(t),a.setTitle(i),a.setIsLoading(s),a.setContent(e),B(Jh,this).push(a),B(eu,this).call(this,a),B(Xh,this).showModal(),1===B(Jh,this).length&&history.pushState({universalProxyOpen:!0},""),$($({},a),{},{close:()=>B(Zh,this).call(this,a)})}),Q(this,$h,()=>{1===B(Jh,this).length&&B(Zh,this).call(this,B(Jh,this)[0])}),Q(this,qh,e=>{B(Jh,this).some(e=>e.confirmUnload)&&e.preventDefault()}),J(this,"closeAllTabs",()=>{B(Jh,this).forEach(B(Zh,this))}),Q(this,Zh,e=>{const t=B(Jh,this).indexOf(e);if(-1===t)return;if(e.removeTab(),B(Jh,this).splice(t,1),!B(Jh,this).length)return B(Xh,this).hideModal();const i=B(Jh,this).length-1;e.isActive()&&(t<=i?B(Jh,this)[t].show():B(Jh,this)[i].show())}),Q(this,eu,e=>{B(Jh,this).forEach(e=>e.hide()),e.show()}),Q(this,tu,()=>{const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),i=document.createElement("div");i.style.background="rgba(50, 50, 50, 0.4)",i.style.position="fixed",i.style.zIndex="2147483645",i.style.bottom="0",i.style.top="0",i.style.left="0",i.style.right="0",i.style.display="flex",i.style.flexDirection="column",i.style.padding=B(Kh,this).matches?"25px":"0",t.appendChild(i);const s=B(iu,this).call(this);i.appendChild(s.element);const n=B(su,this).call(this);i.appendChild(n.element);let o=null;return{element:i,showModal:()=>{this.isVisible||(document.body.appendChild(e),o=document.body.style.overflow,document.body.style.overflow="hidden",this.isVisible=!0,H(Yh,this,history.length))},hideModal:()=>{document.body.removeChild(e),document.body.style.overflow=o,this.isVisible=!1;const t=history.length-B(Yh,this);t>0&&history.go(-t)},createTab:({onTabClick:e,onClose:t,confirmUnload:i})=>{const o=B(nu,this).call(this,{onTabClick:e,onCloseClick:e=>{e.stopPropagation(),t()}});s.addButton(o.element);const a=B(ou,this).call(this);return n.addPanel(a.element),{setIcon:o.setIcon,setTitle:o.setTitle,setIsLoading:o.setIsLoading,showBanner:a.showBanner,hideBanner:a.hideBanner,show:()=>{o.setIsActive(!0),a.showPanel()},hide:()=>{o.setIsActive(!1),a.hidePanel()},removeTab:()=>{s.removeButton(o.element),n.removePanel(a.element)},isActive:()=>o.isActive,onClose:t,confirmUnload:i,setContent:a.setContent}},enterFullScreen:()=>{s.hide(),i.style.padding="0"},exitFullScreen:()=>{s.show(),i.style.padding=B(Kh,this).matches?"25px":"0"}}}),Q(this,iu,()=>{const e=document.createElement("div");return e.style.display="flex",e.style.backgroundColor="#d6e2fb",e.style.borderBottom="1px solid #d8d8d8",e.style.paddingTop="6px",e.style.paddingLeft="6px",e.style.paddingBottom="5px",e.style.borderRadius="10px 10px 0 0",this.fullScreen&&(e.style.display="none"),{element:e,addButton:t=>e.appendChild(t),removeButton:t=>e.removeChild(t),show:()=>{e.style.display="flex"},hide:()=>{e.style.display="none "}}}),Q(this,su,()=>{const e=document.createElement("div");return e.style.width="100%",e.style.height="100%",e.style.backgroundColor="white",e.style.borderRadius="0 0 10px 10px",e.style.overflow="hidden",{element:e,addPanel:t=>e.appendChild(t),removePanel:t=>e.removeChild(t)}}),Q(this,nu,({onTabClick:e,onCloseClick:t})=>{const i=document.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="end",i.style.flex="1 1 0",i.style.backgroundColor="#ffffff66",i.style.padding="4px",i.style.maxWidth="200px",i.style.minWidth="0",i.style.overflow="hidden",i.style.cursor="pointer",i.style.borderRadius="9px",i.style.marginRight="6px";const s=document.createElement("img");s.style.flex="0 0 auto",s.style.width="16px",s.style.height="16px",s.style.marginRight="4px";const n=document.createElement("span");n.style.flex="1 1 auto",n.style.display="block",n.style.fontFamily="sans-serif",n.style.fontSize="13px",n.style.overflow="hidden",n.style.whiteSpace="nowrap",n.style.textOverflow="ellipsis";const o=document.createElement("button");o.style.flex="0 0 auto",o.style.width="24px",o.style.height="24px",o.style.border="none",o.style.background="none",o.style.padding="4px",o.style.cursor="pointer";const a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("fill","none"),a.setAttribute("viewBox","0 0 24 24"),a.setAttribute("stroke-width","1.5"),a.setAttribute("stroke","currentColor"),a.style.width="16px",a.style.height="16px";const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("stroke-linecap","round"),r.setAttribute("stroke-linejoin","round"),r.setAttribute("d","M6 18 18 6M6 6l12 12"),a.appendChild(r),o.appendChild(a),i.appendChild(s),i.appendChild(n),i.appendChild(o),i.addEventListener("click",e),o.addEventListener("click",t),s.onerror=function(){this.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="gray"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418" /></svg>'},{element:i,icon:"",title:"",isActive:!1,isLoading:!1,setIcon:function(e){this.icon=e,s.src=e},setTitle:function(e){this.title=e,n.textContent=e},setIsActive:function(e){this.isActive=e,this.isActive?(i.style.backgroundColor="white",i.style.borderColor="#d8d8d8"):(i.style.backgroundColor="#ffffff66",i.style.borderColor="#efefef")},setIsLoading:function(e){this.isLoading=e,s.src=this.isLoading?'data:image/svg+xml,<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z"><animateTransform attributeName="transform" type="rotate" dur="0.75s" values="0 12 12;360 12 12" repeatCount="indefinite"/></path></svg>':this.icon}}}),Q(this,ou,()=>{const e=document.createElement("div");e.style.width="100%",e.style.height="100%",e.style.backgroundColor="white",e.style.display="flex",e.style.flexDirection="column";const t=document.createElement("div");t.style.height="30px",t.style.width="100%",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.backgroundColor="white",t.style.color="black",t.style.fontFamily="sans-serif",t.style.fontSize="13px",t.style.borderBottom="1px solid #d8d8d8";const i=document.createElement("div");return i.style.flex="1",e.appendChild(i),{element:e,showPanel:()=>{e.style.display="flex"},hidePanel:()=>{e.style.display="none"},showBanner:i=>{t.innerText=i,e.contains(t)||e.prepend(t)},hideBanner:()=>{e.contains(t)&&e.removeChild(t)},setContent:e=>{i.contains(e)||i.replaceChildren(e)}}}),H(Xh,this,B(tu,this).call(this)),B(Kh,this).addEventListener("change",e=>{B(Xh,this).element.style.padding=e.matches?"25px":"0"}),window.addEventListener("popstate",B($h,this)),window.addEventListener("beforeunload",B(qh,this))}},ru=_("cbio.VirtualAgent.VirtualAgentEmbed");class lu extends hs{constructor(){super(),J(this,"url",()=>new URL(`api/1/virtualagents/${encodeURIComponent(this.slug())}/embed`,lu.api).toString()),J(this,"slug",()=>this.field("slug")),J(this,"type",()=>this.field("type")),J(this,"data",()=>this.field("data")),ru("constructed")}static async load(e,t){var i;const s=new lu,n=Le(e.license),o=`_cobrowse_va_conversation_${t}`,{iat:a,resource:r,attempts:l=0}=null!==(i=n.getItem(o))&&void 0!==i?i:{};if(r&&a&&a>Date.now()-78e4)return ru("loaded agent embed data from storage"),s.updateResource(r),s;if(!r&&l){const e=cu(a,l);if(e>Date.now())return void console.warn(`Not loading virtual agent embed data, next retry at: ${new Date(e)}`)}try{ru("loading agent embed data from the API"),s.updateResource({slug:t}),await s.fetch()}catch(e){const t=cu(Date.now(),l);return console.error(`Unable to resolve virtual agent embed data. Next retry at ${new Date(t)}`,e),void n.setItem(o,{iat:Date.now(),attempts:l+1})}return n.setItem(o,{resource:s.resource,iat:Date.now()}),s}}function cu(e,t){return e+1e3*Math.min(Math.pow(2,t),900)}const du=_("cbio.VirtualAgent"),hu=_("cbio.CobrowseIO");var uu=new WeakMap,Eu=new WeakMap,_u=new WeakMap,pu=new WeakMap,Iu=new WeakMap,Lu=new WeakMap,mu=new WeakMap,Cu=new WeakMap,Nu=new WeakMap,gu=new WeakMap,wu=new WeakMap,vu=new WeakMap,Au=new WeakMap,Su=new WeakMap,fu=new WeakMap,Tu=new WeakMap,Ou=new WeakMap,Ru=new WeakMap,yu=new WeakMap,bu=new WeakMap,Pu=new WeakMap,Mu=new WeakMap,ku=new WeakMap,Du=new WeakMap,Gu=new WeakMap,Uu=new WeakMap,Wu=new WeakMap,xu=new WeakSet,Vu=new WeakMap,zu=new WeakMap,Fu=new WeakMap;class ju extends d{constructor({sessionStorage:e}={}){super(),X(this,xu),Q(this,uu,new o),Q(this,Eu,void 0),Q(this,_u,!1),Q(this,pu,!0),Q(this,Iu,Qh.create(this)),Q(this,Lu,{}),Q(this,mu,Bs.info.capabilities),Q(this,Cu,new Bs(this)),Q(this,Nu,new Xr),Q(this,gu,new Xr),Q(this,wu,new Xr),Q(this,vu,new Xr),Q(this,Au,void 0),Q(this,Su,void 0),Q(this,fu,void 0),Q(this,Tu,void 0),Q(this,Ou,void 0),Q(this,Ru,void 0),Q(this,yu,void 0),Q(this,bu,void 0),J(this,"start",async(e={})=>{if(hu("start()",e,"in",document),!Mh.isHeadless()||e.allowHeadless){if(window.self!==window.top){if(!e.allowIFrameStart)return de(window.parent)?(B(yu,this)&&B(yu,this).call(this),H(yu,this,async function(e){const t=new an(e),i=Ta(Ma,{currentSession:t}),s=ya(Ma,e,{waitForParentSync:!0});Ma.start();const n=await s.getSyncedConfig();let o;ba("synced config",n);const a=()=>{t.isActive()&&!o&&(ba("creating iframe context",o),Da(n.api)(t),o=new ga(t,$($({},n),{},{trustedOrigins:e.trustedOrigins,version:e.version,showDocument:e.showDocument,confirmOpen:(e,t)=>ka.send("confirmOpen",{url:e,type:t}),open:(e,t,i,s)=>ka.send("open",{url:e,target:t,windowFeatures:i,options:s})}),Ma.sendToParent),t.once("ended",()=>{ba("destroying iframe context",o),o.destroy(),o=null}))};Ma.on("session",a);const r=(e,{trustedOnly:t,fromParent:i})=>{i?Ma.broadcastToChildren("rpc:request",e,{trustedOnly:t}):Ma.sendToParent("rpc:request",e,{trustedOnly:t})};Ma.on("rpc:request",r);const l=(e,{trustedOnly:t,fromParent:i})=>{i?Ma.broadcastToChildren("rpc:response",e,{trustedOnly:t}):Ma.sendToParent("rpc:response",e,{trustedOnly:t})};Ma.on("rpc:response",l);const c=()=>{var e;return null===(e=o)||void 0===e?void 0:e.invalidateFrame()};Ma.on("sync",c);const d=(e,{trustedOnly:t})=>{var i;const{target:s,error:{cause:n}}=e,a="string"==typeof s?s:s.id;"load-error"===n&&(null===(i=o)||void 0===i||i.partialSync(a)),Ma.broadcastToChildren("remote-error",e,{trustedOnly:t})};Ma.on("remote-error",d);const h=async t=>za.highlight(e,t);return ka.on("highlight",h),()=>{s.unsubscribe(),i.unsubscribe(),Ma.off("remote-error",d),Ma.off("sync",c),Ma.off("session",a),Ma.off("rpc:request",r),Ma.off("rpc:response",l),ka.off("highlight",h)}}(this)),void hu("Starting Cobrowse in Iframe bridge mode with trusted origins:",Ma.trustedOrigins,"for",document)):void hu("Not starting Cobrowse for same-origin iframe",document);fe.setTracksIframes(!0)}var t,i;B(yu,this)&&B(yu,this).call(this),H(yu,this,function(e,{open:t}){const i=Ta(Ma,e);e.on("session.loaded",i.publish),e.on("session.updated",i.publish);const s=Da(e.api);e.on("session.loaded",s),e.on("session.updated",s);const n=ya(Ma,e);e.on("session.sync",n.sendSync);const o=async({url:t,type:i})=>({accepted:await e.confirmOpen(t,i)});ka.on("confirmOpen",o);const a=({url:e,target:i,windowFeatures:s,options:n})=>{t(e,i,s,n)};return ka.on("open",a),Ma.start(),()=>{i.unsubscribe(),n.unsubscribe(),e.off("session.loaded",i.publish),e.off("session.updated",i.publish),e.off("session.loaded",s),e.off("session.updated",s),e.off("session.sync",n.sendSync),ka.off("confirmOpen",o),ka.off("open",a)}}(this,{open:B(Pu,this)})),this.license?B(_u,this)||(Ph.initialize(),fe.start(),async function(){Rt.isLocalResource(window.location.href)&&console.warn("CobrowseIO: This page was loaded from a local address, Cobrowse may not work as expected due to inaccessible resources. We recommend using ngrok for testing development versions.")}().catch(()=>{}),console.log("CobrowseIO started",ju.version,null===(t=document.timeline)||void 0===t?void 0:t.currentTime),H(_u,this,!0),"boolean"==typeof e.register&&H(pu,this,e.register),this.registration&&V(xu,this,Bu).call(this),hu("attempting to restore session after start"),await B(Mu,this).call(this),null!==(i=this.currentSession)&&void 0!==i&&i.isActive()||this.hideSessionControls(),Hh.start=Date.now(),await B(Fu,this).call(this)):console.error("CobrowseIO.license must be set before calling start")}else console.warn("CobrowseIO: Not starting Cobrowse in a headless browser")}),J(this,"stop",async()=>(this.currentSession&&!this.currentSession.isEnded()&&await this.currentSession.end().catch(e=>{console.warn("CobrowseIO: Failed to end session on stop",e)}),B(ku,this).call(this,null),fe.stop(),B(uu,this).stop(),await B(Cu,this).destroy(),await B(Iu,this).reset(),H(_u,this,!1),B(yu,this)&&(B(yu,this).call(this),H(yu,this,null)),this)),J(this,"open",(e,t,i,{type:s}={})=>B(Pu,this).call(this,e,t,i,{type:s})),Q(this,Pu,(e,t,i,s)=>{const n=()=>window.open(e,t,i);if(!B(Eu,this))return n();const{target:o,name:a}=Wt(t,"_blank"),r=$($({},s),{},{name:a,go:n}),{rewrittenUrl:l,windowProxy:c}=B(Eu,this).handleNavigation(e,o,i,r);return l?window.open(l,t,i):c}),Q(this,Mu,async()=>{try{const e=await B(Iu,this).load(this);e&&B(ku,this).call(this,e,{invalidateFrames:!0})}catch(e){console.warn("CobrowseIO: Failed to fetch restored session",e),B(ku,this).call(this,null)}return null}),Q(this,ku,(e,{invalidateFrames:t=!1}={})=>{if(hu("setting current session",e),e&&B(Eu,this)&&B(Eu,this).session.id()===e.id())return;B(Nu,this).hide(),B(gu,this).hide(),B(wu,this).hide(),B(vu,this).hide();const i=(e,t)=>Ma.broadcastToChildren("control",[e,t]),s=e=>Ma.broadcastToChildren("remote-error",e);B(Eu,this)&&(B(Eu,this).session.off("updated",B(Du,this)),B(Eu,this).session.off("ended",B(Gu,this)),B(Eu,this).session.off("control",i),B(Eu,this).session.off("remote-error",s),B(Eu,this).session.off("metrics.updated",B(Uu,this)),B(Eu,this).destroy(),H(Eu,this,null)),B(Iu,this).store(e),e&&(H(Eu,this,new th(e,this)),e.state()&&B(Du,this).call(this,e),e.on("updated",B(Du,this)),e.once("ended",B(Gu,this)),e.on("sync",()=>this.emit("session.sync")),e.on("control",i),e.on("remote-error",s),e.on("metrics.updated",B(Uu,this)),t&&B(Eu,this).invalidateFrames())}),Q(this,Du,e=>{B(Iu,this).store(e),e.fullDevice()||B(wu,this).hide(),"requested"!==e.remoteControl()&&B(gu,this).hide(),e.isAuthorizing()||B(Nu,this).hide(),this.emit("session.updated",e)}),Q(this,Gu,e=>{this.emit("session.ended",e),B(ku,this).call(this,null),H(Ru,this,!1)}),Q(this,Uu,e=>{this.emit("session.metrics.updated",e)}),Q(this,Wu,void 0),J(this,"hideSessionControls",()=>{Qr.hideSessionControls()}),Q(this,Vu,l(()=>{B(Cu,this).hasPendingUpdates()&&B(_u,this)&&this.registration&&B(Cu,this).updateRegistration().catch(e=>{console.warn("CobrowseIO: updating customData failed",e)})},8e3,{leading:!0,trailing:!0})),J(this,"confirmRemoteControl",async()=>B(gu,this).show(cr.tr("REMOTE_CONTROL_REQUEST_TITLE"),cr.tr("REMOTE_CONTROL_REQUEST_DESCRIPTION"))),J(this,"confirmFullDevice",async()=>B(wu,this).show(cr.tr("FULL_DEVICE_REQUEST_TITLE"),cr.tr("FULL_DEVICE_REQUEST_DESCRIPTION"))),J(this,"confirmSession",async()=>B(Nu,this).show(cr.tr("SESSION_REQUEST_TITLE"),cr.tr("SESSION_REQUEST_DESCRIPTION"))),J(this,"confirmOpen",(e,t)=>{if(t!==wi)return!0;if(B(Ru,this))return!0;const i=B(vu,this).show(cr.tr("UNIVERSAL_PROXY_REQUEST_TITLE"),cr.tr("UNIVERSAL_PROXY_REQUEST_DESCRIPTION"));return i.then(e=>{e&&H(Ru,this,!0)}),i}),J(this,"showDocument",e=>{"_blank"!==e.target&&0===au.getTabCount()?au.enterFullScreen():au.exitFullScreen();const t=e.type===wi,i=au.newTab(e.element,"",e.url,e.isLoading,e.close,t);e.isBlocked&&i.showBanner(cr.tr("UNIVERSAL_PROXY_BLOCKED"));const s=()=>{i.setIcon(e.icon),i.setTitle(e.title||e.url),i.setIsLoading(e.isLoading),i.setContent(e.element),e.isBlocked?i.showBanner(cr.tr("UNIVERSAL_PROXY_BLOCKED")):i.hideBanner()};e.on("updated",s),e.once("closed",()=>{e.off("updated",s),i.close()})}),J(this,"getSession",async e=>{if(!B(_u,this))throw new Error("CobrowseIO not started. Call CobrowseIO.start()");if(this.currentSession&&(this.currentSession.id()===e||this.currentSession.code()===e))return this.currentSession.fetch();const t=new an(this).updateResource({id:e});return B(ku,this).call(this,t),await t.fetch(),this.emit("session.loaded",t),t}),J(this,"createSession",async()=>{if(!B(_u,this))throw new Error("CobrowseIO not started. Call CobrowseIO.start()");if(this.currentSession&&(this.currentSession.isActive()||this.currentSession.isAuthorizing()))throw new Error("Already in a session");(Hh["load"]?Date.now()-Hh.load:NaN)<8e3&&console.warn("Six digit codes have a short expiry time. You should wait to generate a code until it is required! Do not generate codes on page load.");const e=new an(this);return B(ku,this).call(this,e),await e.update({custom_data:this.customData,device:Bs.info}),this.emit("session.loaded",e),e}),J(this,"createSessionCode",async()=>(await this.createSession()).code()),J(this,"client",async()=>this),Q(this,zu,e=>{e&&["license","api","registration","customData","showSessionControls","hideSessionControls","confirmSession","confirmRemoteControl","confirmFullDevice","trustedOrigins","redactedViews","unredactedViews","ignoredViews","capabilities","pdfLinks","universalLinks","confirmOpen","showDocument","highlightElement","virtualAgent"].forEach(t=>{void 0!==e[t]&&(this[t]=e[t])})}),Q(this,Fu,async()=>{B(bu,this)&&await async function(e,t){du("Loading virtual agent %s",e);const i=await lu.load(t,e);if("elevenlabs"===(null==i?void 0:i.type())){const{loadElevenLabsWidget:e}=await import("./index.bundler2.mjs");await e(i,t)}}(B(bu,this),this)}),hu("interface constructed in",document),e&&H(Iu,this,e),this.api="https://api.cobrowse.io",B(zu,this).call(this,window&&window.CobrowseIO),B(Cu,this).on("notification",e=>{const t=e["cobrowseio-code"];t&&this.getSession(t).catch(e=>{console.warn("CobrowseIO: session fetch failed:",e)})})}deviceId(){return Bs.deviceId()}get currentSession(){return B(Eu,this)?B(Eu,this).session:B(Iu,this).peek()}set showSessionControls(e){var t;H(Wu,this,e),Qr.hideSessionControls(),null!==(t=B(Eu,this))&&void 0!==t&&t.session.isActive()&&B(Wu,this).call(this)}get showSessionControls(){return B(Wu,this)?B(Wu,this):Qr.showSessionControls}set license(e){if(B(_u,this)&&this.license!==e)throw new Error("Cannot change license once Cobrowse is started");hs.setHeader("X-CobrowseLicense",e)}get license(){return hs.getHeader("X-CobrowseLicense")}set api(e){if(B(_u,this)&&hs.api!==e)throw new Error("Cannot change API once Cobrowse is started");hs.api=e}get api(){return hs.api}set registration(e){const t=!!e;t!==B(pu,this)&&V(xu,this,Hu).call(this,t)}get registration(){return!!B(pu,this)}set redactedViews(e){if(B(_u,this))throw new Error("Cannot set redacted views after Cobrowse is started");H(Au,this,e)}get redactedViews(){return B(Au,this)}set unredactedViews(e){if(B(_u,this))throw new Error("Cannot set unredacted views after Cobrowse is started");H(Su,this,e)}get unredactedViews(){return B(Su,this)}set ignoredViews(e){if(B(_u,this))throw new Error("Cannot set ignored views after Cobrowse is started");H(fu,this,e),je.setIgnoredViews(e)}get ignoredViews(){return B(fu,this)}set capabilities(e){if(B(_u,this))throw new Error("Cannot set capabilities after Cobrowse is started");if(!Array.isArray(e))throw new Error("Capabilities should be an array");H(mu,this,e.filter(e=>!!Bs.info.capabilities.includes(e)||(console.warn(`Capability '${e}' not supported. Ignoring...`),!1)))}get capabilities(){return B(mu,this)}set customData(e){if("object"!=typeof e)throw new Error("Custom data must be an object");if(H(Lu,this,$($({},B(Lu,this)),e)),B(_u,this)&&setTimeout(B(Vu,this),0),this.currentSession&&this.currentSession.isActive()){const t=this.currentSession.resource.custom_data;if(!Object.keys(e).find(i=>t[i]!==e[i]))return void hu("no changes to session custom data");this.currentSession.update({custom_data:e}).catch(()=>{console.warn("CobrowseIO: failed to update custom data on active session")})}}get customData(){return $($({},B(Cu,this).customData),B(Lu,this))}set trustedOrigins(e){const t=[];e.forEach(e=>{try{const i=new URL(e).origin,s=decodeURIComponent(i);return t.push(s)}catch(e){}if(a(e))return t.push(e);console.warn("CobrowseIO: Invalid URL in trustedOrigins:",e)}),Ma.trustedOrigins=t}get trustedOrigins(){return[...Ma.trustedOrigins]}set pdfLinks(e){if(B(_u,this))throw new Error("Cannot set pdfLinks after Cobrowse is started");const t=e.map(e=>e instanceof RegExp||"string"==typeof e?e:(console.warn("CobrowseIO: Invalid link in pdfLinks:",e),null)).filter(e=>e);H(Tu,this,t)}get pdfLinks(){return B(Tu,this)}set universalLinks(e){if(B(_u,this))throw new Error("Cannot set universalLinks after Cobrowse is started");const t=e.map(e=>e instanceof RegExp||"string"==typeof e?e:(console.warn("CobrowseIO: Invalid link in universalLinks:",e),null)).filter(e=>e);H(Ou,this,t)}get universalLinks(){return B(Ou,this)}set virtualAgent(e){if(B(_u,this))throw new Error("Cannot set virtualAgent after Cobrowse is started");H(bu,this,e)}get virtualAgent(){return B(bu,this)}static get version(){return Bs.info.sdk_version}get version(){return ju.version}}function Bu(){hu("starting registration"),B(uu,this).on("active",B(Cu,this).runRegistrationLoop),B(uu,this).on("inactive",B(Cu,this).pauseRegistrationLoop),B(uu,this).start()}async function Qu(){hu("stopping registration"),B(uu,this).stop(),B(uu,this).off("active",B(Cu,this).runRegistrationLoop),B(uu,this).off("inactive",B(Cu,this).pauseRegistrationLoop);try{await B(Cu,this).destroy()}catch(e){console.log("Failed to deregister device",e)}}function Hu(e){H(pu,this,e),B(_u,this)&&(e?V(xu,this,Bu).call(this):V(xu,this,Qu).call(this))}hs.setHeader("Content-Type","application/json"),hs.setHeader("X-CobrowsePlatform","web"),hs.setHeader("X-CobrowseSDKVersion",ju.version),hs.setHeader("X-CobrowseDevice",Bs.deviceId()),hs.setHeader("X-CobrowseAPIVersion","1.63.3");const Yu=new ju;var Xu=new WeakMap,Ju=new WeakMap,Ku=new WeakMap,$u=new WeakMap,qu=new WeakMap,Zu=new WeakMap,eE=new WeakMap,tE=new WeakMap,iE=new WeakMap,sE=new WeakMap,nE=new WeakMap,oE=new WeakMap,aE=new WeakMap,rE=new WeakMap,lE=new WeakMap,cE=new WeakMap,dE=new WeakMap,hE=new WeakMap,uE=new WeakMap,EE=new WeakMap,_E=new WeakMap,pE=new WeakMap,IE=new WeakMap,LE=new WeakMap;const mE=Yu;if(window.__cobrowse_io_loaded)throw new Error("CobrowseIO already loaded. This usually means you included the snippet multiple times.");window.__cobrowse_io_loaded=!0;let CE=!1;const NE=new class{constructor(e){Q(this,Xu,void 0),Q(this,Ju,void 0),Q(this,Ku,void 0),Q(this,$u,void 0),Q(this,qu,void 0),Q(this,Zu,void 0),Q(this,eE,void 0),Q(this,tE,void 0),Q(this,iE,void 0),Q(this,sE,void 0),J(this,"track",e=>{B(Ju,this).has(e)||(B(Ju,this).add(e),e.addEventListener("mousedown",B(pE,this)),e.addEventListener("keydown",B(IE,this)),e.addEventListener("click",B(LE,this),{capture:!0,passive:!0}))}),Q(this,nE,()=>{var e,t,i;null===(e=B(tE,this))||void 0===e||e.call(this),null===(t=B(iE,this))||void 0===t||t.call(this),null===(i=B(sE,this))||void 0===i||i.call(this),H(Ku,this,null)}),Q(this,oE,e=>{B(qu,this)>=0&&B($u,this)[B(qu,this)].removeHighlight(),B($u,this)[e].addHighlight(),H(qu,this,e)}),Q(this,aE,()=>{if(B(qu,this)<=0)return;let e=B(qu,this)-1;for(;e>=0;){if(!B($u,this)[e].disabled)return B(oE,this).call(this,e);e--}}),Q(this,rE,()=>{if(B(qu,this)>=B($u,this).length-1)return;let e=B(qu,this)+1;for(;e<B($u,this).length;){if(!B($u,this)[e].disabled)return B(oE,this).call(this,e);e++}}),Q(this,lE,()=>{B($u,this)[B(qu,this)].select()}),Q(this,cE,()=>{B($u,this).forEach(e=>e.removeHighlight())}),Q(this,dE,e=>{switch(H(Zu,this,!1),e.code){case"ArrowUp":e.preventDefault(),B(aE,this).call(this);break;case"ArrowDown":e.preventDefault(),B(rE,this).call(this);break;case"Space":case"Enter":e.preventDefault(),B(lE,this).call(this);break;case"Escape":e.preventDefault(),B(nE,this).call(this)}}),Q(this,hE,()=>{H(Zu,this,!0)}),Q(this,uE,e=>{const t=e.ownerDocument||document,i=(e=>{const t=e.createElement("style");return e.head.appendChild(t),{appendRule:e=>{try{t.sheet.insertRule(e,t.sheet.cssRules.length)}catch(e){}},cleanUp:()=>t.remove()}})(t);var s;H(sE,this,i.cleanUp),(s=i.appendRule)('\n    .cbioSelect {\n      z-index: 2147483647;\n      background-color: #6e6e6e;\n      box-sizing: border-box;\n      padding: 5px;\n      font-size: 13px;\n      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;\n      border-radius: 5px;\n      border: 1px solid #ccc;\n      max-height: 300px;\n      overflow-y: auto;\n      scrollbar-width: thin;\n      scrollbar-color: #c0c0c0 transparent;\n    }\n  '),s("\n    .cbioOption {\n      color: white;\n      padding: 5px;\n      border-radius: 5px;\n      cursor: pointer;\n      display: flex;\n    }\n  "),s("\n    .cbioOption:hover {\n      background-color: #649eec;\n    }\n  "),s("\n    .cbioOptionIcon {\n      visibility: hidden;\n      margin-right: 5px;\n    }\n  "),s("\n    .cbioOptionSelect .cbioOptionIcon {\n      visibility: visible;\n    }\n  "),s("\n    .cbioOptionDisable {\n      color: #a9a9a9;\n      pointer-events: none;\n    }\n  "),s("\n    .cbioOptionHighlight.cbioOption {\n      background-color: #649eec;\n    }\n  "),s("\n    .cbioSelect::-webkit-scrollbar {\n      width: 8px;\n    }\n  "),s("\n    .cbioSelect::-webkit-scrollbar-track {\n      background: transparent;\n    }\n  "),s("\n    .cbioSelect::-webkit-scrollbar-thumb {\n      background-color: #c0c0c0;\n      border-radius: 4px;\n    }\n  "),s("\n    .cbioSelect::-webkit-scrollbar-thumb:hover {\n      background-color: #a0a0a0;\n    }\n  ");const n=B(Xu,this).isRedacted(e),o=((e,t,i,s,n)=>{const o=e.createElement("div");return o.classList.add("cbioSelect"),t&&o.classList.add("__cbio_ignored"),o.setAttribute("role","combobox"),o.setAttribute("aria-expanded","true"),o.tabIndex=0,o.addEventListener("keydown",i),o.addEventListener("mouseenter",s),o.addEventListener("mousemove",n),{element:o,addOption:e=>o.appendChild(e.element),cleanUp:()=>o.remove()}})(t,n,B(dE,this),B(cE,this),B(hE,this));H(iE,this,o.cleanUp);const a=Array.from(e.options);return H($u,this,a.map((i,s)=>{const{text:n,value:a,disabled:r}=i,l=!r&&i.selected,c=((e,t,i,s,n,o)=>{const a=e.createElement("div");a.classList.add("cbioOption"),s&&a.classList.add("cbioOptionDisable"),i&&a.classList.add("cbioOptionSelect"),a.setAttribute("role","option"),a.setAttribute("aria-disabled",s),a.setAttribute("aria-selected",i),a.addEventListener("mouseup",()=>n()),a.addEventListener("mouseenter",o);const r=e.createElement("img");r.className="cbioOptionIcon",r.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l5 5l10 -10" /></svg>';const l=e.createElement("span");return l.innerText=t,a.appendChild(r),a.appendChild(l),{element:a,disabled:s,addHighlight:()=>{a.classList.add("cbioOptionHighlight"),a.scrollIntoView({block:"nearest",inline:"nearest"})},removeHighlight:()=>a.classList.remove("cbioOptionHighlight"),select:()=>n()}})(t,n,l,r,()=>{B(eE,this)&&(e.value=a,i.selected=!0,e.dispatchEvent(new We("input",{bubbles:!0})),e.dispatchEvent(new We("change",{bubbles:!0})),B(nE,this).call(this))},()=>{B(Zu,this)&&B(oE,this).call(this,s)});return l&&(H(qu,this,s),c.addHighlight()),o.addOption(c),c})),e.after(o.element),H(tE,this,f(e,o.element,((e,t)=>{let i=!1,s=!1;return()=>{T(e,t,{placement:"bottom-start",strategy:"fixed",middleware:[R(),M({apply(){s&&Object.assign(t.style,{width:`${e.offsetWidth}px`})}})]}).then(({x:n,y:o})=>{Object.assign(t.style,{top:`${o}px`,left:`${n}px`,position:"fixed"}),i||(s=t.offsetWidth<e.offsetWidth,t.focus()),i=!0})}})(e,o.element))),{containsElement:t=>e===t||o.element===t||!!o.element.contains(t)}}),Q(this,EE,e=>{B(Ku,this)?B(nE,this).call(this):(H(eE,this,!1),setTimeout(()=>{H(eE,this,!0)},200),H(Ku,this,B(uE,this).call(this,e)))}),Q(this,_E,e=>{var t;if(!B(Xu,this).shouldShowSelect())return!1;if("SELECT"!==(null===(t=e.target)||void 0===t?void 0:t.tagName))return!1;if(e.target.size>1)return!1;if(e.defaultPrevented)return!1;const i=e.target;return 0!==i.options.length&&!i.multiple}),Q(this,pE,e=>{B(_E,this).call(this,e)&&0===e.button&&(e.preventDefault(),B(EE,this).call(this,e.target))}),Q(this,IE,e=>{B(_E,this).call(this,e)&&["Space","ArrowDown","ArrowUp"].includes(e.code)&&(e.preventDefault(),B(EE,this).call(this,e.target))}),Q(this,LE,e=>{var t;!1===(null===(t=B(Ku,this))||void 0===t?void 0:t.containsElement(e.target))&&B(eE,this)&&B(nE,this).call(this)}),H(Xu,this,e),H(Ju,this,new Set)}}({shouldShowSelect:()=>{var e;return(null===(e=Yu.currentSession)||void 0===e?void 0:e.isActive())||CE},isRedacted:e=>{var t;return null===(t=_t.instance)||void 0===t?void 0:t.isRedacted(e)}});NE.track(window),Ma.on("iframe_discovered",e=>{r(e)||NE.track(e.contentWindow)}),Ma.on("session",e=>{const t=new an(mE);t[yi].deserialize(e),CE=t.isActive()});export{$ as _,te as a,q as b,J as c,V as d,B as e,X as f,Q as g,H as h,Y as i,ee as j,z as k,mE as l,Le as s};